import{S as R,t as x,m as S,d as O,e as y,s as I,c as G,O as B,y as te,$ as ie}from"./BpcKryD-.js";import{e as H,a as re,g as ae,i as se,j as ne}from"./fnY6dSo8.js";import{a as oe,g as pe}from"./4_nDscJ4.js";import{f as le}from"./BxTrv8Ik.js";function ge(a="curveLinear",n){return se().x(t=>t.axisX).y0(t=>n).y1(t=>t.axisY).curve(ne[a])}function ce(a){let n=[[]],t=0;for(let p in a){if(a[p].visible==!1||a[p].value===void 0||a[p].value===null){n[t].length&&(t++,n[t]=[]);continue}n[t].push(a[p])}return n}function ue({selection:a,pathClassName:n,segmentData:t,areaPath:p,linearGradientIds:r,params:h}){return a.selectAll("path").data(t,(s,l)=>s.length?`${s[0].id}_${s[s.length-1].id}`:l).join(s=>s.append("path").classed(n,!0).attr("fill","none").style("vector-effect","non-scaling-stroke").style("cursor","pointer"),s=>s,s=>s.remove()).attr("fill",(s,l)=>s[0]?`url(#${r[s[0].seriesIndex]})`:"").attr("d",s=>p(s))}function he({selection:a,seriesLabel:n,fullChartParams:t}){if(a.interrupt("highlight"),!n){a.transition("highlight").duration(200).style("opacity",1);return}a.each((p,r,h)=>{p===n?G(h[r]).style("opacity",1):G(h[r]).style("opacity",t.styles.unhighlightedOpacity)})}function de({defsSelection:a,computedData:n,linearGradientIds:t,params:p}){a.selectAll("linearGradient").data(n??[]).join(r=>r.append("linearGradient").attr("x1","0%").attr("x2","0%").attr("y1","100%").attr("y2","0%").attr("spreadMethod","pad"),r=>r,r=>r.remove()).attr("id",(r,h)=>r[0]?t[r[0].seriesIndex]:"").html((r,h)=>{const b=r[0]?r[0].color:"";return`
        <stop offset="0%"   stop-color="${b}" stop-opacity="${p.linearGradientOpacity[0]}"/>
        <stop offset="100%" stop-color="${b}" stop-opacity="${p.linearGradientOpacity[1]}"/>
      `})}function xe({defsSelection:a,clipPathData:n,transitionDuration:t,transitionEase:p}){a.selectAll("clipPath").data(n).join(r=>r.append("clipPath"),r=>r,r=>r.remove()).attr("id",r=>r.id).each((r,h,b)=>{G(b[h]).selectAll("rect").data([r]).join(s=>{const l=s.append("rect");return l.transition().duration(t).ease(re(p)).tween("tween",(P,M,A)=>T=>{const w=P.width*T;l.attr("x",0).attr("y",0).attr("width",_=>w).attr("height",_=>_.height)}),l},s=>s.attr("x",0).attr("y",0).attr("width",l=>l.width).attr("height",l=>l.height),s=>s.remove())})}const be=(a,{selection:n,computedData$:t,existSeriesLabels$:p,SeriesDataMap$:r,GroupDataMap$:h,fullParams$:b,fullDataFormatter$:s,fullChartParams$:l,gridAxesTransform$:P,gridGraphicTransform$:M,gridAxesSize$:A,gridHighlight$:T,gridContainer$:w,layout$:_,event$:$})=>{const d=new R,j=H(a,"clipPath-box"),N=ae(a,"path"),{seriesSelection$:me,axesSelection$:De,defsSelection$:z,graphicGSelection$:k}=oe({selection:n,pluginName:a,clipPathID:j,existSeriesLabels$:p,gridContainer$:w,gridAxesTransform$:P,gridGraphicTransform$:M}),W=M.pipe(x(d),S(e=>-e.translate[1]/e.scale[1])),X=new B(e=>{const o=y({fullParams:b,valueAxisStart:W}).pipe(x(d)).subscribe(u=>{const m=ge(u.fullParams.lineCurve,u.valueAxisStart);e.next(m)});return()=>{o.unsubscribe()}}),E=new B(e=>{t.pipe(x(d),I(async o=>o)).subscribe(o=>{const u=o[0]&&o[0][0]?o.map(m=>m[0].seriesLabel):[];e.next(u)})}),Y=l.pipe(S(e=>e.transitionDuration),O()),q=l.pipe(S(e=>e.transitionEase),O());y({defsSelection:z,seriesLabels:E,axisSize:A,transitionDuration:Y,transitionEase:q}).pipe(x(d),I(async e=>e)).subscribe(e=>{const u=[{id:j,width:e.axisSize.width,height:e.axisSize.height}].concat(e.seriesLabels.map(m=>({id:`orbcharts__clipPath_${m}`,width:e.axisSize.width,height:e.axisSize.height})));xe({defsSelection:e.defsSelection,clipPathData:u,transitionDuration:e.transitionDuration,transitionEase:e.transitionEase})});const J=t.pipe(S(e=>{const o=new Map;return e.flat().forEach(u=>o.set(u.id,u)),o})),K=pe({fullDataFormatter$:s,gridAxesSize$:A,computedData$:t,fullChartParams$:l}),Q=l.pipe(x(d),S(e=>e.highlightTarget),O()),V=E.pipe(x(d),S(e=>e.map((o,u)=>H(a,`lineargradient-${o}`))));return y({graphicGSelection:k,defsSelection:z,seriesLabels:E,computedData:t,linearGradientIds:V,SeriesDataMap:r,GroupDataMap:h,areaPath:X,params:b,highlightTarget:Q,gridGroupPositionFn:K}).pipe(x(d),I(async e=>e)).subscribe(e=>{e.graphicGSelection.each((o,u,m)=>{const Z=ce(e.computedData[u]??[]),ee=ue({selection:G(m[u]),pathClassName:N,areaPath:e.areaPath,segmentData:Z,linearGradientIds:e.linearGradientIds,params:e.params});de({defsSelection:e.defsSelection,computedData:e.computedData,linearGradientIds:e.linearGradientIds,params:e.params}),ee.on("mouseover",(g,c)=>{g.stopPropagation();const D=c[0]?c[0].seriesLabel:"",{groupIndex:F,groupLabel:L}=e.gridGroupPositionFn(g),i=e.GroupDataMap.get(L).find(f=>f.seriesLabel===D)??c[0];$.next({type:"grid",eventName:"mouseover",pluginName:a,highlightTarget:e.highlightTarget,datum:i,gridIndex:i.gridIndex,series:e.SeriesDataMap.get(i.seriesLabel),seriesIndex:i.seriesIndex,seriesLabel:i.seriesLabel,groups:e.GroupDataMap.get(i.groupLabel),groupIndex:i.groupIndex,groupLabel:i.groupLabel,event:g,data:e.computedData})}).on("mousemove",(g,c)=>{g.stopPropagation();const D=c[0]?c[0].seriesLabel:"",{groupIndex:F,groupLabel:L}=e.gridGroupPositionFn(g),i=e.GroupDataMap.get(L).find(f=>f.seriesLabel===D)??c[0];$.next({type:"grid",eventName:"mousemove",pluginName:a,highlightTarget:e.highlightTarget,datum:i,gridIndex:i.gridIndex,series:e.SeriesDataMap.get(i.seriesLabel),seriesIndex:i.seriesIndex,seriesLabel:i.seriesLabel,groups:e.GroupDataMap.get(i.groupLabel),groupIndex:i.groupIndex,groupLabel:i.groupLabel,event:g,data:e.computedData})}).on("mouseout",(g,c)=>{g.stopPropagation();const D=c[0]?c[0].seriesLabel:"",{groupIndex:F,groupLabel:L}=e.gridGroupPositionFn(g),i=e.GroupDataMap.get(L).find(f=>f.seriesLabel===D)??c[0];$.next({type:"grid",eventName:"mouseout",pluginName:a,highlightTarget:e.highlightTarget,datum:i,gridIndex:i.gridIndex,series:e.SeriesDataMap.get(i.seriesLabel),seriesIndex:i.seriesIndex,seriesLabel:i.seriesLabel,groups:e.GroupDataMap.get(i.groupLabel),groupIndex:i.groupIndex,groupLabel:i.groupLabel,event:g,data:e.computedData})}).on("click",(g,c)=>{g.stopPropagation();const D=c[0]?c[0].seriesLabel:"",{groupIndex:F,groupLabel:L}=e.gridGroupPositionFn(g),i=e.GroupDataMap.get(L).find(f=>f.seriesLabel===D)??c[0];$.next({type:"grid",eventName:"click",pluginName:a,highlightTarget:e.highlightTarget,datum:i,gridIndex:i.gridIndex,series:e.SeriesDataMap.get(i.seriesLabel),seriesIndex:i.seriesIndex,seriesLabel:i.seriesLabel,groups:e.GroupDataMap.get(i.groupLabel),groupIndex:i.groupIndex,groupLabel:i.groupLabel,event:g,data:e.computedData})})})}),l.pipe(x(d),le(e=>e.highlightTarget==="series"),I(e=>y({graphicGSelection:k,gridHighlight:T,DataMap:J,fullChartParams:l}).pipe(x(d),I(async o=>o)))).subscribe(e=>{const o=e.gridHighlight[0]?e.gridHighlight[0].seriesLabel:null;he({selection:e.graphicGSelection,seriesLabel:o,fullChartParams:e.fullChartParams})}),()=>{d.next(void 0)}},U="LineAreas",$e=te(U,ie)(({selection:a,name:n,observer:t,subject:p})=>{const r=new R,h=be(U,{selection:a,computedData$:t.computedData$,existSeriesLabels$:t.existSeriesLabels$,SeriesDataMap$:t.SeriesDataMap$,GroupDataMap$:t.GroupDataMap$,fullParams$:t.fullParams$,fullDataFormatter$:t.fullDataFormatter$,fullChartParams$:t.fullChartParams$,gridAxesTransform$:t.gridAxesTransform$,gridGraphicTransform$:t.gridGraphicTransform$,gridAxesSize$:t.gridAxesSize$,gridHighlight$:t.gridHighlight$,gridContainer$:t.gridContainer$,layout$:t.layout$,event$:p.event$});return()=>{r.next(void 0),h()}}),ye=[[55,80,50,11,150],[35,40,15,65,120]];export{$e as L,be as c,ye as g};
