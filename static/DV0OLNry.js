import{ao as N,E as O,T as D,al as k,Q as J,R as z,G as L,F as U,ap as j,I as K,aq as _,ar as w,S as B,t as A,m as M,e as S,s as C,d as V,c as f}from"./BpcKryD-.js";import{c as q}from"./DlSMjF2j.js";import{q as Q,r as X,t as Y,c as R,g as W}from"./fnY6dSo8.js";import{o as Z}from"./ydwatUDO.js";const ee=s=>{const{data:r=[],dataFormatter:n,chartParams:a}=s,i=new Map(n.categoryLabels.map((o,g)=>[o,g]));let c={id:"",index:0,label:"",description:"",categoryIndex:0,categoryLabel:"",color:"",visible:!0,data:{},value:0,level:0,seq:0,children:[]};try{const o=function(){if(N(r)===!0)return structuredClone(r);if(Array.isArray(r)===!1)return{id:""};let l;const t=new Map;r.forEach(d=>{if(!d.parent)l=d;else{const b=t.get(d.parent)??[];b.push(d),t.set(d.parent,b)}});const h=d=>({id:d.id,label:d.label,data:d.data,value:d.value,categoryLabel:d.categoryLabel,children:(t.get(d.id)??[]).map(b=>h(b))});return l?h(l):{id:""}}();let g=0;const e=(l,t,h)=>{const d=t+1,b=n.visibleFilter(l,t,h,s),u=l.categoryLabel??null;let v=0;u!=null&&(i.has(u)||i.set(u,i.size),v=i.get(u)??0);const P=g;return g++,{id:l.id,index:P,level:t,seq:h,label:l.label??"",description:l.description??"",categoryIndex:v,categoryLabel:u,color:O(v,a),data:l.data??{},value:l.value,visible:b,children:(l.children??[]).map((m,y)=>e(m,d,y))}};c=e(o,0,0)}catch(o){throw Error(o)}return c},ae=({computedData$:s})=>s.pipe(D(r=>{function n(a,i){return a.push(i),i.children&&i.children.forEach(c=>{a=n(a,c)}),a}return n([],r)})),te=({nodeList$:s,fullDataFormatter$:r})=>{const n=r.pipe(D(a=>a.categoryLabels),k((a,i)=>JSON.stringify(a).length===JSON.stringify(i).length));return J({nodeList:s,categoryLabels:n}).pipe(z(async a=>a),D(a=>{const i=new Set(a.categoryLabels),c=new Set(a.nodeList.filter(o=>o.visible).map(o=>o.categoryLabel));return Array.from(c).forEach(o=>{i.has(o)||i.add(o)}),Array.from(i).forEach(o=>{c.has(o)||c.delete(o)}),Array.from(i)}),k((a,i)=>JSON.stringify(a).length===JSON.stringify(i).length))},ie=({computedData$:s})=>s.pipe(D(r=>{function n(a){return a.children&&(a.children=a.children.filter(i=>i.visible).map(i=>n(i))),a}return n(r)})),le=({subject:s,observer:r})=>{const n=ae({computedData$:r.computedData$}).pipe(L(1)),a=U({datumList$:n,fullChartParams$:r.fullChartParams$,event$:s.event$}).pipe(L(1)),i=te({nodeList$:n,fullDataFormatter$:r.fullDataFormatter$}).pipe(L(1)),c=j({datumList$:n}).pipe(L(1)),o=ie({computedData$:r.computedData$}).pipe(L(1));return{fullParams$:r.fullParams$,fullChartParams$:r.fullChartParams$,fullDataFormatter$:r.fullDataFormatter$,computedData$:r.computedData$,layout$:r.layout$,treeHighlight$:a,existCategoryLabels$:i,CategoryDataMap$:c,visibleComputedData$:o}};class he extends K{constructor(r,n){super({defaultDataFormatter:_,computedDataFn:ee,contextObserverFn:le},r,n)}}const re={paddingInner:2,paddingOuter:2,labelColorType:"primary",squarifyRatio:1.618034,sort:(s,r)=>r.value-s.value},oe={position:"right",justify:"end",padding:28,backgroundFill:"none",backgroundStroke:"none",gap:10,listRectWidth:14,listRectHeight:14,listRectRadius:0,textColorType:"primary"},E="TreeLegend",ve=w(E,oe)(({selection:s,rootSelection:r,observer:n,subject:a})=>{const i=new B,c=n.CategoryDataMap$.pipe(A(i),M(e=>Array.from(e.keys()))),o=n.fullParams$.pipe(A(i),M(e=>{const l=[{listRectWidth:e.listRectWidth,listRectHeight:e.listRectHeight,listRectRadius:e.listRectRadius}];return{...e,seriesList:l}})),g=q(E,{rootSelection:r,seriesLabels$:c,fullParams$:o,layout$:n.layout$,fullChartParams$:n.fullChartParams$});return()=>{i.next(void 0),g()}}),p="TreeMap",H=W(p,"tree"),F=W(p,"tile");function ne({selection:s,treeData:r,fullParams:n,fullChartParams:a}){const i=a.styles.textSize/2,c=s.selectAll(`g.${H}`).data(r,o=>o.data.id).join("g").attr("class",H);return c.attr("transform",o=>!o.x0||!o.y0?null:`translate(${o.x0},${o.y0})`).each((o,g,e)=>{const l=f(e[g]);l.selectAll(`rect.${F}`).data([o],t=>t.data.id).join("rect").attr("id",t=>t.data.id).attr("class",F).attr("cursor","pointer").attr("width",t=>t.x1-t.x0).attr("height",t=>t.y1-t.y0).attr("fill",t=>t.data.color).attr("data-name",t=>t.data.label).attr("data-category",t=>t.data.categoryLabel).attr("data-value",t=>t.data.value),l.selectAll("g").data([o]).join("g").each((t,h,d)=>{f(d[h]).selectAll("text").data([t]).join("text").text(u=>u.data.label).attr("dominant-baseline","hanging").attr("x",i).attr("y",i).attr("font-size",a.styles.textSize).each(function(u){const v=f(this),P=u.data.label.split(/\s+/).reverse();let m,y=[];const G=a.styles.textSize,$=v.attr("x");let x=v.attr("y"),I=0,T=v.text(null).append("tspan").attr("cursor","pointer").attr("fill",R(n.labelColorType,a)).attr("font-size",a.styles.textSize).attr("x",$).attr("y",x);for(;m=P.pop();)y.push(m),T.text(y.join(" ")),T.node().getComputedTextLength()>u.x1-u.x0-i&&(y.pop(),T.text(y.join(" ")),y=[m],I+=G,T=v.append("tspan").attr("cursor","pointer").attr("fill",R(n.labelColorType,a)).attr("font-size",a.styles.textSize).attr("x",$).attr("y",x).attr("dy",I+"px").text(m))})})}),c}function se({selection:s,ids:r,fullChartParams:n}){if(s.interrupt("highlight"),!r.length){s.transition("highlight").duration(200).style("opacity",1);return}s.each((a,i,c)=>{r.includes(a.data.id)?f(c[i]).style("opacity",1):f(c[i]).style("opacity",n.styles.unhighlightedOpacity)})}const be=w(p,re)(({selection:s,name:r,subject:n,observer:a})=>{const i=new B,c=S({layout:a.layout$,visibleComputedData:a.visibleComputedData$,fullParams:a.fullParams$,fullDataFormatter:a.fullDataFormatter$,fullChartParams:a.fullChartParams$}).pipe(A(i),C(async e=>e),M(e=>{const l=Q().size([e.layout.width,e.layout.height]).paddingInner(e.fullParams.paddingInner).paddingOuter(e.fullParams.paddingOuter).round(!0).tile(X.ratio(e.fullParams.squarifyRatio)),t=Y(e.visibleComputedData).sum(d=>d.value).sort(e.fullParams.sort);return l(t),t.leaves()})),o=S({selection:Z(s),treeData:c,fullParams:a.fullParams$,fullChartParams:a.fullChartParams$}).pipe(A(i),C(async e=>e),M(e=>ne({selection:s,treeData:e.treeData,fullParams:e.fullParams,fullChartParams:e.fullChartParams}))),g=a.fullChartParams$.pipe(A(i),M(e=>e.highlightTarget),V());return S({cellSelection:o,computedData:a.computedData$,treeData:c,fullParams:a.fullParams$,fullChartParams:a.fullChartParams$,highlightTarget:g,CategoryDataMap:a.CategoryDataMap$}).pipe(A(i),C(async e=>e)).subscribe(e=>{e.cellSelection.on("mouseover",(l,t)=>{l.stopPropagation(),n.event$.next({type:"tree",eventName:"mouseover",pluginName:p,highlightTarget:e.highlightTarget,datum:t.data,category:e.CategoryDataMap.get(t.data.categoryLabel),categoryIndex:t.data.categoryIndex,categoryLabel:t.data.categoryLabel,event:l,data:e.computedData})}).on("mousemove",(l,t)=>{l.stopPropagation(),n.event$.next({type:"tree",eventName:"mousemove",pluginName:p,highlightTarget:e.highlightTarget,datum:t.data,category:e.CategoryDataMap.get(t.data.categoryLabel),categoryIndex:t.data.categoryIndex,categoryLabel:t.data.categoryLabel,event:l,data:e.computedData})}).on("mouseout",(l,t)=>{l.stopPropagation(),n.event$.next({type:"tree",eventName:"mouseout",pluginName:p,highlightTarget:e.highlightTarget,datum:t.data,category:e.CategoryDataMap.get(t.data.categoryLabel),categoryIndex:t.data.categoryIndex,categoryLabel:t.data.categoryLabel,event:l,data:e.computedData})}).on("click",(l,t)=>{l.stopPropagation(),n.event$.next({type:"tree",eventName:"click",pluginName:p,highlightTarget:e.highlightTarget,datum:t.data,category:e.CategoryDataMap.get(t.data.categoryLabel),categoryIndex:t.data.categoryIndex,categoryLabel:t.data.categoryLabel,event:l,data:e.computedData})})}),S({cellSelection:o,highlight:a.treeHighlight$.pipe(M(e=>e.map(l=>l.id))),fullChartParams:a.fullChartParams$}).pipe(A(i),C(async e=>e)).subscribe(e=>{se({selection:e.cellSelection,ids:e.highlight,fullChartParams:e.fullChartParams})}),()=>{i.next(void 0)}}),ye={label:"Movies",children:[{label:"Action",children:[{label:"Avatar ",categoryLabel:"Action",value:"760505847",id:"Movies.Action.Avatar "},{label:"Jurassic World ",categoryLabel:"Action",value:"652177271",id:"Movies.Action.Jurassic World "},{label:"The Avengers ",categoryLabel:"Action",value:"623279547",id:"Movies.Action.The Avengers "},{label:"The Dark Knight ",categoryLabel:"Action",value:"533316061",id:"Movies.Action.The Dark Knight "},{label:"Star Wars: Episode I - The Phantom Menace ",categoryLabel:"Action",value:"474544677",id:"Movies.Action.Star Wars: Episode I - The Phantom Menace "},{label:"Star Wars: Episode IV - A New Hope ",categoryLabel:"Action",value:"460935665",id:"Movies.Action.Star Wars: Episode IV - A New Hope "},{label:"Avengers: Age of Ultron ",categoryLabel:"Action",value:"458991599",id:"Movies.Action.Avengers: Age of Ultron "},{label:"The Dark Knight Rises ",categoryLabel:"Action",value:"448130642",id:"Movies.Action.The Dark Knight Rises "},{label:"Pirates of the Caribbean: Dead Man's Chest ",categoryLabel:"Action",value:"423032628",id:"Movies.Action.Pirates of the Caribbean: Dead Man's Chest "},{label:"Iron Man 3",categoryLabel:"Action",value:"408992272",id:"Movies.Action.Iron Man 3"},{label:"Captain America: Civil War ",categoryLabel:"Action",value:"407197282",id:"Movies.Action.Captain America: Civil War "},{label:"Spider-Man ",categoryLabel:"Action",value:"403706375",id:"Movies.Action.Spider-Man "},{label:"Transformers: Revenge of the Fallen ",categoryLabel:"Action",value:"402076689",id:"Movies.Action.Transformers: Revenge of the Fallen "},{label:"Star Wars: Episode III - Revenge of the Sith ",categoryLabel:"Action",value:"380262555",id:"Movies.Action.Star Wars: Episode III - Revenge of the Sith "},{label:"The Lord of the Rings: The Return of the King ",categoryLabel:"Action",value:"377019252",id:"Movies.Action.The Lord of the Rings: The Return of the King "},{label:"Spider-Man 2",categoryLabel:"Action",value:"373377893",id:"Movies.Action.Spider-Man 2"},{label:"Deadpool ",categoryLabel:"Action",value:"363024263",id:"Movies.Action.Deadpool "},{label:"Transformers: Dark of the Moon ",categoryLabel:"Action",value:"352358779",id:"Movies.Action.Transformers: Dark of the Moon "},{label:"American Sniper ",categoryLabel:"Action",value:"350123553",id:"Movies.Action.American Sniper "},{label:"Furious 7",categoryLabel:"Action",value:"350034110",id:"Movies.Action.Furious 7"},{label:"The Lord of the Rings: The Two Towers ",categoryLabel:"Action",value:"340478898",id:"Movies.Action.The Lord of the Rings: The Two Towers "},{label:"Spider-Man 3",categoryLabel:"Action",value:"336530303",id:"Movies.Action.Spider-Man 3"},{label:"Minions ",categoryLabel:"Action",value:"336029560",id:"Movies.Action.Minions "},{label:"Guardians of the Galaxy ",categoryLabel:"Action",value:"333130696",id:"Movies.Action.Guardians of the Galaxy "},{label:"Batman v Superman: Dawn of Justice ",categoryLabel:"Action",value:"330249062",id:"Movies.Action.Batman v Superman: Dawn of Justice "},{label:"Transformers ",categoryLabel:"Action",value:"318759914",id:"Movies.Action.Transformers "},{label:"Iron Man ",categoryLabel:"Action",value:"318298180",id:"Movies.Action.Iron Man "},{label:"Indiana Jones and the Kingdom of the Crystal Skull ",categoryLabel:"Action",value:"317011114",id:"Movies.Action.Indiana Jones and the Kingdom of the Crystal Skull "},{label:"The Lord of the Rings: The Fellowship of the Ring ",categoryLabel:"Action",value:"313837577",id:"Movies.Action.The Lord of the Rings: The Fellowship of the Ring "},{label:"Iron Man 2",categoryLabel:"Action",value:"312057433",id:"Movies.Action.Iron Man 2"},{label:"Star Wars: Episode II - Attack of the Clones ",categoryLabel:"Action",value:"310675583",id:"Movies.Action.Star Wars: Episode II - Attack of the Clones "},{label:"Pirates of the Caribbean: At World's End ",categoryLabel:"Action",value:"309404152",id:"Movies.Action.Pirates of the Caribbean: At World's End "},{label:"Star Wars: Episode VI - Return of the Jedi ",categoryLabel:"Action",value:"309125409",id:"Movies.Action.Star Wars: Episode VI - Return of the Jedi "},{label:"Independence Day ",categoryLabel:"Action",value:"306124059",id:"Movies.Action.Independence Day "},{label:"Pirates of the Caribbean: The Curse of the Black Pearl ",categoryLabel:"Action",value:"305388685",id:"Movies.Action.Pirates of the Caribbean: The Curse of the Black Pearl "},{label:"Skyfall ",categoryLabel:"Action",value:"304360277",id:"Movies.Action.Skyfall "},{label:"Inception ",categoryLabel:"Action",value:"292568851",id:"Movies.Action.Inception "},{label:"Man of Steel ",categoryLabel:"Action",value:"291021565",id:"Movies.Action.Man of Steel "},{label:"Star Wars: Episode V - The Empire Strikes Back ",categoryLabel:"Action",value:"290158751",id:"Movies.Action.Star Wars: Episode V - The Empire Strikes Back "},{label:"The Matrix Reloaded ",categoryLabel:"Action",value:"281492479",id:"Movies.Action.The Matrix Reloaded "},{label:"The Amazing Spider-Man ",categoryLabel:"Action",value:"262030663",id:"Movies.Action.The Amazing Spider-Man "},{label:"The Incredibles ",categoryLabel:"Action",value:"261437578",id:"Movies.Action.The Incredibles "},{label:"Captain America: The Winter Soldier ",categoryLabel:"Action",value:"259746958",id:"Movies.Action.Captain America: The Winter Soldier "},{label:"The Lego Movie ",categoryLabel:"Action",value:"257756197",id:"Movies.Action.The Lego Movie "},{label:"Star Trek ",categoryLabel:"Action",value:"257704099",id:"Movies.Action.Star Trek "},{label:"Batman ",categoryLabel:"Action",value:"251188924",id:"Movies.Action.Batman "},{label:"Night at the Museum ",categoryLabel:"Action",value:"250863268",id:"Movies.Action.Night at the Museum "}],id:"Movies.Action"},{label:"Drama",children:[{label:"Titanic ",categoryLabel:"Drama",value:"658672302",id:"Movies.Drama.Titanic "},{label:"The Sixth Sense ",categoryLabel:"Drama",value:"293501675",id:"Movies.Drama.The Sixth Sense "},{label:"I Am Legend ",categoryLabel:"Drama",value:"256386216",id:"Movies.Drama.I Am Legend "}],id:"Movies.Drama"},{label:"Adventure",children:[{label:"Shrek 2",categoryLabel:"Adventure",value:"436471036",id:"Movies.Adventure.Shrek 2"},{label:"The Hunger Games: Catching Fire ",categoryLabel:"Adventure",value:"424645577",id:"Movies.Adventure.The Hunger Games: Catching Fire "},{label:"The Lion King ",categoryLabel:"Adventure",value:"422783777",id:"Movies.Adventure.The Lion King "},{label:"Toy Story 3",categoryLabel:"Adventure",value:"414984497",id:"Movies.Adventure.Toy Story 3"},{label:"The Hunger Games ",categoryLabel:"Adventure",value:"407999255",id:"Movies.Adventure.The Hunger Games "},{label:"Frozen ",categoryLabel:"Adventure",value:"400736600",id:"Movies.Adventure.Frozen "},{label:"Finding Nemo ",categoryLabel:"Adventure",value:"380838870",id:"Movies.Adventure.Finding Nemo "},{label:"The Jungle Book ",categoryLabel:"Adventure",value:"362645141",id:"Movies.Adventure.The Jungle Book "},{label:"Jurassic Park ",categoryLabel:"Adventure",value:"356784000",id:"Movies.Adventure.Jurassic Park "},{label:"Inside Out ",categoryLabel:"Adventure",value:"356454367",id:"Movies.Adventure.Inside Out "},{label:"The Hunger Games: Mockingjay - Part 1",categoryLabel:"Adventure",value:"337103873",id:"Movies.Adventure.The Hunger Games: Mockingjay - Part 1"},{label:"Alice in Wonderland ",categoryLabel:"Adventure",value:"334185206",id:"Movies.Adventure.Alice in Wonderland "},{label:"Shrek the Third ",categoryLabel:"Adventure",value:"320706665",id:"Movies.Adventure.Shrek the Third "},{label:"Harry Potter and the Sorcerer's Stone ",categoryLabel:"Adventure",value:"317557891",id:"Movies.Adventure.Harry Potter and the Sorcerer's Stone "},{label:"The Hobbit: An Unexpected Journey ",categoryLabel:"Adventure",value:"303001229",id:"Movies.Adventure.The Hobbit: An Unexpected Journey "},{label:"Harry Potter and the Half-Blood Prince ",categoryLabel:"Adventure",value:"301956980",id:"Movies.Adventure.Harry Potter and the Half-Blood Prince "},{label:"The Twilight Saga: Eclipse ",categoryLabel:"Adventure",value:"300523113",id:"Movies.Adventure.The Twilight Saga: Eclipse "},{label:"The Twilight Saga: New Moon ",categoryLabel:"Adventure",value:"296623634",id:"Movies.Adventure.The Twilight Saga: New Moon "},{label:"Up ",categoryLabel:"Adventure",value:"292979556",id:"Movies.Adventure.Up "},{label:"The Twilight Saga: Breaking Dawn - Part 2",categoryLabel:"Adventure",value:"292298923",id:"Movies.Adventure.The Twilight Saga: Breaking Dawn - Part 2"},{label:"Harry Potter and the Order of the Phoenix ",categoryLabel:"Adventure",value:"292000866",id:"Movies.Adventure.Harry Potter and the Order of the Phoenix "},{label:"The Chronicles of Narnia: The Lion, the Witch and the Wardrobe ",categoryLabel:"Adventure",value:"291709845",id:"Movies.Adventure.The Chronicles of Narnia: The Lion, the Witch and the Wardrobe "},{label:"Harry Potter and the Goblet of Fire ",categoryLabel:"Adventure",value:"289994397",id:"Movies.Adventure.Harry Potter and the Goblet of Fire "},{label:"Monsters, Inc. ",categoryLabel:"Adventure",value:"289907418",id:"Movies.Adventure.Monsters, Inc. "},{label:"The Hunger Games: Mockingjay - Part 2",categoryLabel:"Adventure",value:"281666058",id:"Movies.Adventure.The Hunger Games: Mockingjay - Part 2"},{label:"Gravity ",categoryLabel:"Adventure",value:"274084951",id:"Movies.Adventure.Gravity "},{label:"Monsters University ",categoryLabel:"Adventure",value:"268488329",id:"Movies.Adventure.Monsters University "},{label:"Shrek ",categoryLabel:"Adventure",value:"267652016",id:"Movies.Adventure.Shrek "},{label:"Harry Potter and the Chamber of Secrets ",categoryLabel:"Adventure",value:"261970615",id:"Movies.Adventure.Harry Potter and the Chamber of Secrets "},{label:"Jaws ",categoryLabel:"Adventure",value:"260000000",id:"Movies.Adventure.Jaws "},{label:"The Hobbit: The Desolation of Smaug ",categoryLabel:"Adventure",value:"258355354",id:"Movies.Adventure.The Hobbit: The Desolation of Smaug "},{label:"The Hobbit: The Battle of the Five Armies ",categoryLabel:"Adventure",value:"255108370",id:"Movies.Adventure.The Hobbit: The Battle of the Five Armies "},{label:"Men in Black ",categoryLabel:"Adventure",value:"250147615",id:"Movies.Adventure.Men in Black "}],id:"Movies.Adventure"},{label:"Family",children:[{label:"E.T. the Extra-Terrestrial ",categoryLabel:"Family",value:"434949459",id:"Movies.Family.E.T. the Extra-Terrestrial "}],id:"Movies.Family"},{label:"Animation",children:[{label:"Despicable Me 2",categoryLabel:"Animation",value:"368049635",id:"Movies.Animation.Despicable Me 2"},{label:"The Secret Life of Pets ",categoryLabel:"Animation",value:"323505540",id:"Movies.Animation.The Secret Life of Pets "},{label:"Despicable Me ",categoryLabel:"Animation",value:"251501645",id:"Movies.Animation.Despicable Me "}],id:"Movies.Animation"},{label:"Comedy",children:[{label:"Forrest Gump ",categoryLabel:"Comedy",value:"329691196",id:"Movies.Comedy.Forrest Gump "},{label:"Home Alone ",categoryLabel:"Comedy",value:"285761243",id:"Movies.Comedy.Home Alone "},{label:"Meet the Fockers ",categoryLabel:"Comedy",value:"279167575",id:"Movies.Comedy.Meet the Fockers "},{label:"The Hangover ",categoryLabel:"Comedy",value:"277313371",id:"Movies.Comedy.The Hangover "},{label:"How the Grinch Stole Christmas ",categoryLabel:"Comedy",value:"260031035",id:"Movies.Comedy.How the Grinch Stole Christmas "},{label:"The Hangover Part II ",categoryLabel:"Comedy",value:"254455986",id:"Movies.Comedy.The Hangover Part II "}],id:"Movies.Comedy"},{label:"Biography",children:[{label:"The Blind Side ",categoryLabel:"Biography",value:"255950375",id:"Movies.Biography.The Blind Side "}],id:"Movies.Biography"}],id:"Movies"};export{he as T,be as a,ve as b,ye as t};
