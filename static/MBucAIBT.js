import{S as R,t as b,m as S,d as O,e as y,s as I,c as G,O as B,y as te,$ as ie}from"./DNpuBO6_.js";import{e as U,a as re,g as ae,i as se,j as ne}from"./D8yrUiOY.js";import{a as oe,g as pe}from"./CdoJceY_.js";import{f as le}from"./Crq2_Lxn.js";function ge(a="curveLinear",o){return se().x(t=>t.axisX).y0(t=>o).y1(t=>t.axisY).curve(ne[a])}function ce(a){let o=[[]],t=0;for(let p in a){if(a[p].visible==!1||a[p].value===void 0||a[p].value===null){o[t].length&&(t++,o[t]=[]);continue}o[t].push(a[p])}return o}function ue({selection:a,pathClassName:o,segmentData:t,areaPath:p,linearGradientIds:r,params:h}){return a.selectAll("path").data(t,(s,l)=>s.length?`${s[0].id}_${s[s.length-1].id}`:l).join(s=>s.append("path").classed(o,!0).attr("fill","none").style("vector-effect","non-scaling-stroke").style("cursor","pointer"),s=>s,s=>s.remove()).attr("fill",(s,l)=>s[0]?`url(#${r[s[0].seriesIndex]})`:"").attr("d",s=>p(s))}function he({selection:a,seriesLabel:o,fullChartParams:t}){if(a.interrupt("highlight"),!o){a.transition("highlight").duration(200).style("opacity",1);return}a.each((p,r,h)=>{p===o?G(h[r]).style("opacity",1):G(h[r]).style("opacity",t.styles.unhighlightedOpacity)})}function de({defsSelection:a,computedData:o,linearGradientIds:t,params:p}){a.selectAll("linearGradient").data(o??[]).join(r=>r.append("linearGradient").attr("x1","0%").attr("x2","0%").attr("y1","100%").attr("y2","0%").attr("spreadMethod","pad"),r=>r,r=>r.remove()).attr("id",(r,h)=>r[0]?t[r[0].seriesIndex]:"").html((r,h)=>{const x=r[0]?r[0].color:"";return`
        <stop offset="0%"   stop-color="${x}" stop-opacity="${p.linearGradientOpacity[0]}"/>
        <stop offset="100%" stop-color="${x}" stop-opacity="${p.linearGradientOpacity[1]}"/>
      `})}function be({defsSelection:a,clipPathData:o,transitionDuration:t,transitionEase:p}){a.selectAll("clipPath").data(o).join(r=>r.append("clipPath"),r=>r,r=>r.remove()).attr("id",r=>r.id).each((r,h,x)=>{G(x[h]).selectAll("rect").data([r]).join(s=>{const l=s.append("rect");return l.transition().duration(t).ease(re(p)).tween("tween",(P,M,A)=>T=>{const w=P.width*T;l.attr("x",0).attr("y",0).attr("width",_=>w).attr("height",_=>_.height)}),l},s=>s.attr("x",0).attr("y",0).attr("width",l=>l.width).attr("height",l=>l.height),s=>s.remove())})}const xe=(a,{selection:o,computedData$:t,existSeriesLabels$:p,SeriesDataMap$:r,GroupDataMap$:h,fullParams$:x,fullDataFormatter$:s,fullChartParams$:l,gridAxesTransform$:P,gridGraphicTransform$:M,gridAxesSize$:A,gridHighlight$:T,gridContainer$:w,layout$:_,event$:$})=>{const d=new R,j=U(a,"clipPath-box"),N=ae(a,"path"),{seriesSelection$:me,axesSelection$:De,defsSelection$:z,graphicGSelection$:k}=oe({selection:o,pluginName:a,clipPathID:j,existSeriesLabels$:p,gridContainer$:w,gridAxesTransform$:P,gridGraphicTransform$:M}),W=M.pipe(b(d),S(e=>-e.translate[1]/e.scale[1])),X=new B(e=>{const n=y({fullParams:x,valueAxisStart:W}).pipe(b(d)).subscribe(u=>{const m=ge(u.fullParams.lineCurve,u.valueAxisStart);e.next(m)});return()=>{n.unsubscribe()}}),E=new B(e=>{t.pipe(b(d),I(async n=>n)).subscribe(n=>{const u=n[0]&&n[0][0]?n.map(m=>m[0].seriesLabel):[];e.next(u)})}),Y=l.pipe(S(e=>e.transitionDuration),O()),q=l.pipe(S(e=>e.transitionEase),O());y({defsSelection:z,seriesLabels:E,axisSize:A,transitionDuration:Y,transitionEase:q}).pipe(b(d),I(async e=>e)).subscribe(e=>{const u=[{id:j,width:e.axisSize.width,height:e.axisSize.height}].concat(e.seriesLabels.map(m=>({id:`orbcharts__clipPath_${m}`,width:e.axisSize.width,height:e.axisSize.height})));be({defsSelection:e.defsSelection,clipPathData:u,transitionDuration:e.transitionDuration,transitionEase:e.transitionEase})});const J=t.pipe(S(e=>{const n=new Map;return e.flat().forEach(u=>n.set(u.id,u)),n})),K=pe({fullDataFormatter$:s,gridAxesSize$:A,computedData$:t,fullChartParams$:l}),Q=l.pipe(b(d),S(e=>e.highlightTarget),O()),V=E.pipe(b(d),S(e=>e.map((n,u)=>U(a,`lineargradient-${n}`))));return y({graphicGSelection:k,defsSelection:z,seriesLabels:E,computedData:t,linearGradientIds:V,SeriesDataMap:r,GroupDataMap:h,areaPath:X,params:x,highlightTarget:Q,gridGroupPositionFn:K}).pipe(b(d),I(async e=>e)).subscribe(e=>{e.graphicGSelection.each((n,u,m)=>{const Z=ce(e.computedData[u]??[]),ee=ue({selection:G(m[u]),pathClassName:N,areaPath:e.areaPath,segmentData:Z,linearGradientIds:e.linearGradientIds,params:e.params});de({defsSelection:e.defsSelection,computedData:e.computedData,linearGradientIds:e.linearGradientIds,params:e.params}),ee.on("mouseover",(g,c)=>{g.stopPropagation();const D=c[0]?c[0].seriesLabel:"",{groupIndex:F,groupLabel:L}=e.gridGroupPositionFn(g),i=e.GroupDataMap.get(L).find(f=>f.seriesLabel===D)??c[0];$.next({type:"grid",eventName:"mouseover",pluginName:a,highlightTarget:e.highlightTarget,datum:i,gridIndex:i.gridIndex,series:e.SeriesDataMap.get(i.seriesLabel),seriesIndex:i.seriesIndex,seriesLabel:i.seriesLabel,groups:e.GroupDataMap.get(i.groupLabel),groupIndex:i.groupIndex,groupLabel:i.groupLabel,event:g,data:e.computedData})}).on("mousemove",(g,c)=>{g.stopPropagation();const D=c[0]?c[0].seriesLabel:"",{groupIndex:F,groupLabel:L}=e.gridGroupPositionFn(g),i=e.GroupDataMap.get(L).find(f=>f.seriesLabel===D)??c[0];$.next({type:"grid",eventName:"mousemove",pluginName:a,highlightTarget:e.highlightTarget,datum:i,gridIndex:i.gridIndex,series:e.SeriesDataMap.get(i.seriesLabel),seriesIndex:i.seriesIndex,seriesLabel:i.seriesLabel,groups:e.GroupDataMap.get(i.groupLabel),groupIndex:i.groupIndex,groupLabel:i.groupLabel,event:g,data:e.computedData})}).on("mouseout",(g,c)=>{g.stopPropagation();const D=c[0]?c[0].seriesLabel:"",{groupIndex:F,groupLabel:L}=e.gridGroupPositionFn(g),i=e.GroupDataMap.get(L).find(f=>f.seriesLabel===D)??c[0];$.next({type:"grid",eventName:"mouseout",pluginName:a,highlightTarget:e.highlightTarget,datum:i,gridIndex:i.gridIndex,series:e.SeriesDataMap.get(i.seriesLabel),seriesIndex:i.seriesIndex,seriesLabel:i.seriesLabel,groups:e.GroupDataMap.get(i.groupLabel),groupIndex:i.groupIndex,groupLabel:i.groupLabel,event:g,data:e.computedData})}).on("click",(g,c)=>{g.stopPropagation();const D=c[0]?c[0].seriesLabel:"",{groupIndex:F,groupLabel:L}=e.gridGroupPositionFn(g),i=e.GroupDataMap.get(L).find(f=>f.seriesLabel===D)??c[0];$.next({type:"grid",eventName:"click",pluginName:a,highlightTarget:e.highlightTarget,datum:i,gridIndex:i.gridIndex,series:e.SeriesDataMap.get(i.seriesLabel),seriesIndex:i.seriesIndex,seriesLabel:i.seriesLabel,groups:e.GroupDataMap.get(i.groupLabel),groupIndex:i.groupIndex,groupLabel:i.groupLabel,event:g,data:e.computedData})})})}),l.pipe(b(d),le(e=>e.highlightTarget==="series"),I(e=>y({graphicGSelection:k,highlight:T,DataMap:J,fullChartParams:l}).pipe(b(d),I(async n=>n)))).subscribe(e=>{const n=e.DataMap.get(e.highlight[0]);he({selection:e.graphicGSelection,seriesLabel:n&&n.seriesLabel?n.seriesLabel:null,fullChartParams:e.fullChartParams})}),()=>{d.next(void 0)}},H="LineAreas",$e=te(H,ie)(({selection:a,name:o,observer:t,subject:p})=>{const r=new R,h=xe(H,{selection:a,computedData$:t.computedData$,existSeriesLabels$:t.existSeriesLabels$,SeriesDataMap$:t.SeriesDataMap$,GroupDataMap$:t.GroupDataMap$,fullParams$:t.fullParams$,fullDataFormatter$:t.fullDataFormatter$,fullChartParams$:t.fullChartParams$,gridAxesTransform$:t.gridAxesTransform$,gridGraphicTransform$:t.gridGraphicTransform$,gridAxesSize$:t.gridAxesSize$,gridHighlight$:t.gridHighlight$,gridContainer$:t.gridContainer$,layout$:t.layout$,event$:p.event$});return()=>{r.next(void 0),h()}}),ye=[[55,80,50,11,150],[35,40,15,65,120]];export{$e as L,ye as g};
