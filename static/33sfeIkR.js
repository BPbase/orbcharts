import{ag as At,ah as tt,ai as lt,aj as ct,ak as $t,al as N,l as Ft,am as Pt,q as kt,o as Ct,an as Gt,y as O,z as R,v as C,r as rt,ao as at,B as it,X as Nt,ap as ut,F as ft,aq as Tt,e as W,h as K,g as X,s as z,S as Lt,O as mt,t as dt,ar as Ot}from"./sHDoh0EE.js";import{s as U,g as Q}from"./opDUeYou.js";function I(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Rt(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function xt(t){let e,r,n;t.length!==2?(e=I,r=(s,c)=>I(t(s),c),n=(s,c)=>t(s)-c):(e=t===I||t===Rt?t:jt,r=t,n=t);function i(s,c,l=0,m=s.length){if(l<m){if(e(c,c)!==0)return m;do{const u=l+m>>>1;r(s[u],c)<0?l=u+1:m=u}while(l<m)}return l}function a(s,c,l=0,m=s.length){if(l<m){if(e(c,c)!==0)return m;do{const u=l+m>>>1;r(s[u],c)<=0?l=u+1:m=u}while(l<m)}return l}function o(s,c,l=0,m=s.length){const u=i(s,c,l,m-1);return u>l&&n(s[u-1],c)>-n(s[u],c)?u-1:u}return{left:i,center:o,right:a}}function jt(){return 0}function Vt(t){return t===null?NaN:+t}const Xt=xt(I),zt=Xt.right;xt(Vt).center;const Yt=Math.sqrt(50),Et=Math.sqrt(10),Wt=Math.sqrt(2);function B(t,e,r){const n=(e-t)/Math.max(0,r),i=Math.floor(Math.log10(n)),a=n/Math.pow(10,i),o=a>=Yt?10:a>=Et?5:a>=Wt?2:1;let s,c,l;return i<0?(l=Math.pow(10,-i)/o,s=Math.round(t*l),c=Math.round(e*l),s/l<t&&++s,c/l>e&&--c,l=-l):(l=Math.pow(10,i)*o,s=Math.round(t/l),c=Math.round(e/l),s*l<t&&++s,c*l>e&&--c),c<s&&.5<=r&&r<2?B(t,e,r*2):[s,c,l]}function Ut(t,e,r){if(e=+e,t=+t,r=+r,!(r>0))return[];if(t===e)return[t];const n=e<t,[i,a,o]=n?B(e,t,r):B(t,e,r);if(!(a>=i))return[];const s=a-i+1,c=new Array(s);if(n)if(o<0)for(let l=0;l<s;++l)c[l]=(a-l)/-o;else for(let l=0;l<s;++l)c[l]=(a-l)*o;else if(o<0)for(let l=0;l<s;++l)c[l]=(i+l)/-o;else for(let l=0;l<s;++l)c[l]=(i+l)*o;return c}function et(t,e,r){return e=+e,t=+t,r=+r,B(t,e,r)[2]}function qt(t,e,r){e=+e,t=+t,r=+r;const n=e<t,i=n?et(e,t,r):et(t,e,r);return(n?-1:1)*(i<0?1/-i:i)}function It(t,e){e||(e=[]);var r=t?Math.min(e.length,t.length):0,n=e.slice(),i;return function(a){for(i=0;i<r;++i)n[i]=t[i]*(1-a)+e[i]*a;return n}}function Bt(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function _t(t,e){var r=e?e.length:0,n=t?Math.min(r,t.length):0,i=new Array(n),a=new Array(r),o;for(o=0;o<n;++o)i[o]=ot(t[o],e[o]);for(;o<r;++o)a[o]=e[o];return function(s){for(o=0;o<n;++o)a[o]=i[o](s);return a}}function Ht(t,e){var r=new Date;return t=+t,e=+e,function(n){return r.setTime(t*(1-n)+e*n),r}}function Jt(t,e){var r={},n={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?r[i]=ot(t[i],e[i]):n[i]=e[i];return function(a){for(i in r)n[i]=r[i](a);return n}}function ot(t,e){var r=typeof e,n;return e==null||r==="boolean"?At(e):(r==="number"?tt:r==="string"?(n=lt(e))?(e=n,ct):$t:e instanceof lt?ct:e instanceof Date?Ht:Bt(e)?It:Array.isArray(e)?_t:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Jt:tt)(t,e)}function Zt(t,e){return t=+t,e=+e,function(r){return Math.round(t*(1-r)+e*r)}}function Kt(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function _(t,e){if((r=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var r,n=t.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+t.slice(r+1)]}function L(t){return t=_(Math.abs(t)),t?t[1]:NaN}function Qt(t,e){return function(r,n){for(var i=r.length,a=[],o=0,s=t[0],c=0;i>0&&s>0&&(c+s+1>n&&(s=Math.max(1,n-c)),a.push(r.substring(i-=s,i+s)),!((c+=s+1)>n));)s=t[o=(o+1)%t.length];return a.reverse().join(e)}}function te(t){return function(e){return e.replace(/[0-9]/g,function(r){return t[+r]})}}var ee=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function H(t){if(!(e=ee.exec(t)))throw new Error("invalid format: "+t);var e;return new st({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}H.prototype=st.prototype;function st(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}st.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function ne(t){t:for(var e=t.length,r=1,n=-1,i;r<e;++r)switch(t[r]){case".":n=i=r;break;case"0":n===0&&(n=r),i=r;break;default:if(!+t[r])break t;n>0&&(n=0);break}return n>0?t.slice(0,n)+t.slice(i+1):t}var Dt;function re(t,e){var r=_(t,e);if(!r)return t+"";var n=r[0],i=r[1],a=i-(Dt=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=n.length;return a===o?n:a>o?n+new Array(a-o+1).join("0"):a>0?n.slice(0,a)+"."+n.slice(a):"0."+new Array(1-a).join("0")+_(t,Math.max(0,e+a-1))[0]}function gt(t,e){var r=_(t,e);if(!r)return t+"";var n=r[0],i=r[1];return i<0?"0."+new Array(-i).join("0")+n:n.length>i+1?n.slice(0,i+1)+"."+n.slice(i+1):n+new Array(i-n.length+2).join("0")}const pt={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Kt,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>gt(t*100,e),r:gt,s:re,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function ht(t){return t}var bt=Array.prototype.map,yt=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function ae(t){var e=t.grouping===void 0||t.thousands===void 0?ht:Qt(bt.call(t.grouping,Number),t.thousands+""),r=t.currency===void 0?"":t.currency[0]+"",n=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?ht:te(bt.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",s=t.minus===void 0?"−":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function l(u){u=H(u);var f=u.fill,p=u.align,d=u.sign,h=u.symbol,b=u.zero,D=u.width,v=u.comma,y=u.precision,w=u.trim,M=u.type;M==="n"?(v=!0,M="g"):pt[M]||(y===void 0&&(y=12),w=!0,M="g"),(b||f==="0"&&p==="=")&&(b=!0,f="0",p="=");var F=h==="$"?r:h==="#"&&/[boxX]/.test(M)?"0"+M.toLowerCase():"",P=h==="$"?n:/[%p]/.test(M)?o:"",j=pt[M],Y=/[defgprs%]/.test(M);y=y===void 0?6:/[gprs]/.test(M)?Math.max(1,Math.min(21,y)):Math.max(0,Math.min(20,y));function V(g){var S=F,x=P,A,Z,G;if(M==="c")x=j(g)+x,g="";else{g=+g;var k=g<0||1/g<0;if(g=isNaN(g)?c:j(Math.abs(g),y),w&&(g=ne(g)),k&&+g==0&&d!=="+"&&(k=!1),S=(k?d==="("?d:s:d==="-"||d==="("?"":d)+S,x=(M==="s"?yt[8+Dt/3]:"")+x+(k&&d==="("?")":""),Y){for(A=-1,Z=g.length;++A<Z;)if(G=g.charCodeAt(A),48>G||G>57){x=(G===46?i+g.slice(A+1):g.slice(A))+x,g=g.slice(0,A);break}}}v&&!b&&(g=e(g,1/0));var E=S.length+g.length+x.length,$=E<D?new Array(D-E+1).join(f):"";switch(v&&b&&(g=e($+g,$.length?D-x.length:1/0),$=""),p){case"<":g=S+g+x+$;break;case"=":g=S+$+g+x;break;case"^":g=$.slice(0,E=$.length>>1)+S+g+x+$.slice(E);break;default:g=$+S+g+x;break}return a(g)}return V.toString=function(){return u+""},V}function m(u,f){var p=l((u=H(u),u.type="f",u)),d=Math.max(-8,Math.min(8,Math.floor(L(f)/3)))*3,h=Math.pow(10,-d),b=yt[8+d/3];return function(D){return p(h*D)+b}}return{format:l,formatPrefix:m}}var q,vt,wt;ie({thousands:",",grouping:[3],currency:["$",""]});function ie(t){return q=ae(t),vt=q.format,wt=q.formatPrefix,q}function oe(t){return Math.max(0,-L(Math.abs(t)))}function se(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(L(e)/3)))*3-L(Math.abs(t)))}function le(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,L(e)-L(t))+1}function ce(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function ue(t){return function(){return t}}function fe(t){return+t}var Mt=[0,1];function T(t){return t}function nt(t,e){return(e-=t=+t)?function(r){return(r-t)/e}:ue(isNaN(e)?NaN:.5)}function me(t,e){var r;return t>e&&(r=t,t=e,e=r),function(n){return Math.max(t,Math.min(e,n))}}function de(t,e,r){var n=t[0],i=t[1],a=e[0],o=e[1];return i<n?(n=nt(i,n),a=r(o,a)):(n=nt(n,i),a=r(a,o)),function(s){return a(n(s))}}function ge(t,e,r){var n=Math.min(t.length,e.length)-1,i=new Array(n),a=new Array(n),o=-1;for(t[n]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<n;)i[o]=nt(t[o],t[o+1]),a[o]=r(e[o],e[o+1]);return function(s){var c=zt(t,s,1,n)-1;return a[c](i[c](s))}}function pe(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function he(){var t=Mt,e=Mt,r=ot,n,i,a,o=T,s,c,l;function m(){var f=Math.min(t.length,e.length);return o!==T&&(o=me(t[0],t[f-1])),s=f>2?ge:de,c=l=null,u}function u(f){return f==null||isNaN(f=+f)?a:(c||(c=s(t.map(n),e,r)))(n(o(f)))}return u.invert=function(f){return o(i((l||(l=s(e,t.map(n),tt)))(f)))},u.domain=function(f){return arguments.length?(t=Array.from(f,fe),m()):t.slice()},u.range=function(f){return arguments.length?(e=Array.from(f),m()):e.slice()},u.rangeRound=function(f){return e=Array.from(f),r=Zt,m()},u.clamp=function(f){return arguments.length?(o=f?!0:T,m()):o!==T},u.interpolate=function(f){return arguments.length?(r=f,m()):r},u.unknown=function(f){return arguments.length?(a=f,u):a},function(f,p){return n=f,i=p,m()}}function be(){return he()(T,T)}function ye(t,e,r,n){var i=qt(t,e,r),a;switch(n=H(n??",f"),n.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return n.precision==null&&!isNaN(a=se(i,o))&&(n.precision=a),wt(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(a=le(i,Math.max(Math.abs(t),Math.abs(e))))&&(n.precision=a-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(a=oe(i))&&(n.precision=a-(n.type==="%")*2);break}}return vt(n)}function Me(t){var e=t.domain;return t.ticks=function(r){var n=e();return Ut(n[0],n[n.length-1],r??10)},t.tickFormat=function(r,n){var i=e();return ye(i[0],i[i.length-1],r??10,n)},t.nice=function(r){r==null&&(r=10);var n=e(),i=0,a=n.length-1,o=n[i],s=n[a],c,l,m=10;for(s<o&&(l=o,o=s,s=l,l=i,i=a,a=l);m-- >0;){if(l=et(o,s,r),l===c)return n[i]=o,n[a]=s,e(n);if(l>0)o=Math.floor(o/l)*l,s=Math.ceil(s/l)*l;else if(l<0)o=Math.ceil(o*l)/l,s=Math.floor(s*l)/l;else break;c=l}return t},t}function St(){var t=be();return t.copy=function(){return pe(t,St())},ce.apply(t,arguments),Me(t)}const J=({maxValue:t=1,minValue:e=0,axisWidth:r,scaleDomain:n=N.scaleDomain,scaleRange:i=N.scaleRange})=>{const a=n[0]??N.scaleDomain[0],o=n[1]??N.scaleDomain[1],s=i[0]??N.scaleRange[0],c=i[1]??N.scaleRange[1],l=a==="auto"?e:a,m=o==="auto"?t:o,u=t-(t-l)/(1-s),f=m/c;return St().domain([u,f]).range([0,r])};function xe(t,e){if(!t.length)return[];try{const r=t.reduce((o,s)=>s.length>o?s.length:o,0),i=t.map((o,s)=>{if(o.length===r)return o;const c=Object.assign([],o);for(let l=c.length;l<r;l++)c[l]=null;return c}).map((o,s)=>o.map((c,l)=>c==null?{id:"",label:"",data:{},value:null}:typeof c=="number"?{id:"",label:"",data:{},value:c}:{id:c.id??"",label:c.label??"",data:c.data??{},value:c.value}));return Gt(e.seriesDirection,i)}catch{return[]}}const we=t=>{const{data:e=[],dataFormatter:r,chartParams:n}=t;if(!e.length)return[];let i;try{const a=xe(e,r.grid),o=Ft({transposedDataGrid:a,dataFormatterGrid:r.grid,chartType:"grid"}),s=Pt({transposedDataGrid:a,dataFormatterGrid:r.grid,chartType:"grid"});let c=0;i=a.map((l,m)=>l.map((u,f)=>{const p=kt("grid",0,m,f),d=s[f],h={id:u.id?u.id:p,index:c,label:u.label?u.label:p,description:u.description??"",data:u.data,value:u.value,gridIndex:0,seriesIndex:m,seriesLabel:o[m],groupIndex:f,groupLabel:d,color:Ct(m,n),visible:!0};return h.visible=r.visibleFilter(h,t),c++,h}))}catch(a){throw Error(a)}return i},Se=({computedData$:t,fullDataFormatter$:e,layout$:r})=>{function n(a,o,s){const c=o.grid.groupAxis.position==="top"||o.grid.groupAxis.position==="bottom"?s.width:s.height,l=a[0]?a[0].length-1:0;return J({maxValue:l,minValue:0,axisWidth:c,scaleDomain:[0,l],scaleRange:[0,1]})}function i(a,o,s){const c=o.grid.valueAxis.position==="left"||o.grid.valueAxis.position==="right"?s.height:s.width,l=a.flat(),[m,u]=Tt(l);return J({maxValue:u,minValue:m,axisWidth:c,scaleDomain:[m,u],scaleRange:[0,1]})}return O({computedData:t,fullDataFormatter:e,layout:r}).pipe(R(async a=>a),C(a=>{const o=n(a.computedData,a.fullDataFormatter,a.layout),s=i(a.computedData,a.fullDataFormatter,a.layout),c=s(0);return a.computedData.map((l,m)=>l.map((u,f)=>{const p=o(f),d=s(u.value??0);return{...u,axisX:p,axisY:d,axisYFromZero:d-c}}))}))},Ae=({fullDataFormatter$:t,layout$:e})=>{const r=new rt;function n({xAxis:i,yAxis:a,width:o,height:s}){if(!i||!a)return{translate:[0,0],scale:[1,1],rotate:0,rotateX:0,rotateY:0,value:""};let c=0,l=0,m=0,u=0,f=0;return i.position==="bottom"?a.position==="left"?(u=180,l=s):a.position==="right"?(u=180,f=180,c=o,l=s):(u=180,l=s):i.position==="top"?a.position==="left"||(a.position==="right"?(f=180,c=o):(u=180,l=s)):i.position==="left"?a.position==="bottom"?(m=-90,l=s):a.position==="top"?(m=-90,f=180):(u=180,l=s):i.position==="right"&&(a.position==="bottom"?(m=-90,u=180,l=s,c=o):a.position==="top"?(m=-90,u=180,f=180,c=o):(u=180,l=s)),{translate:[c,l],scale:[1,1],rotate:m,rotateX:u,rotateY:f,value:`translate(${c}px, ${l}px) rotate(${m}deg) rotateX(${u}deg) rotateY(${f}deg)`}}return new at(i=>(O({fullDataFormatter:t,layout:e}).pipe(it(r),R(async a=>a)).subscribe(a=>{const o=n({xAxis:a.fullDataFormatter.grid.groupAxis,yAxis:a.fullDataFormatter.grid.valueAxis,width:a.layout.width,height:a.layout.height});i.next(o)}),function(){r.next(void 0)}))},$e=({gridAxesTransform$:t})=>t.pipe(C(e=>{const r=[0,0],n=[1/e.scale[0],1/e.scale[1]],i=e.rotate*-1,a=e.rotateX*-1,o=e.rotateY*-1;return{translate:r,scale:n,rotate:i,rotateX:a,rotateY:o,value:`translate(${r[0]}px, ${r[1]}px) rotate(${i}deg) rotateX(${a}deg) rotateY(${o}deg)`}})),Fe=({computedData$:t,fullDataFormatter$:e,layout$:r})=>{const n=new rt;function i({data:a,groupAxis:o,valueAxis:s,width:c,height:l}){let m=0,u=0,f=0,p=0;const d=o.position==="top"||o.position==="bottom"?c:l,h=0,b=a[0]?a[0].length-1:0,D=o.scaleDomain[0]==="auto"?h-o.scalePadding:o.scaleDomain[0]-o.scalePadding,v=o.scaleDomain[1]==="auto"?b+o.scalePadding:o.scaleDomain[1]+o.scalePadding,y=J({maxValue:b,minValue:h,axisWidth:d,scaleDomain:[D,v],scaleRange:[0,1]}),w=y(h),M=y(b);h==b?(m=0,f=1):(m=w,f=(M-w)/d);const F=a.map((A,Z)=>A.filter((G,k)=>k>=D&&k<=v&&G.visible==!0)),P=ut(F),j=s.position==="left"||s.position==="right"?l:c,Y=J({maxValue:P[1],minValue:P[0],axisWidth:j,scaleDomain:s.scaleDomain,scaleRange:s.scaleRange}),V=ut(a),g=Y(V[0]),S=Y(V[1]);return u=g,p=(S-g)/j,{translate:[m,u],scale:[f,p],rotate:0,rotateX:0,rotateY:0,value:`translate(${m}px, ${u}px) scale(${f}, ${p})`}}return new at(a=>(O({computedData:t,fullDataFormatter:e,layout:r}).pipe(it(n),R(async o=>o)).subscribe(o=>{const s=i({data:o.computedData,groupAxis:o.fullDataFormatter.grid.groupAxis,valueAxis:o.fullDataFormatter.grid.valueAxis,width:o.layout.width,height:o.layout.height});a.next(s)}),function(){n.next(void 0)}))},Pe=({gridContainerPosition$:t,gridAxesTransform$:e,gridGraphicTransform$:r})=>O({gridContainerPosition:t,gridAxesTransform:e,gridGraphicTransform:r}).pipe(R(async n=>n),C(n=>n.gridAxesTransform.rotate==0||n.gridAxesTransform.rotate==180?n.gridContainerPosition.map((i,a)=>[1/n.gridGraphicTransform.scale[0]/n.gridContainerPosition[a].scale[0],1/n.gridGraphicTransform.scale[1]/n.gridContainerPosition[a].scale[1]]):n.gridContainerPosition.map((i,a)=>[1/n.gridGraphicTransform.scale[0]/n.gridContainerPosition[a].scale[1],1/n.gridGraphicTransform.scale[1]/n.gridContainerPosition[a].scale[0]]))),ke=({fullDataFormatter$:t,layout$:e})=>{const r=new rt;function n({xAxisPosition:i,yAxisPosition:a,width:o,height:s}){if((i==="bottom"||i==="top")&&(a==="left"||a==="right"))return{width:o,height:s};if((i==="left"||i==="right")&&(a==="bottom"||a==="top"))return{width:s,height:o}}return new at(i=>{O({fullDataFormatter:t,layout:e}).pipe(it(r),R(async a=>a)).subscribe(a=>{const o=n({xAxisPosition:a.fullDataFormatter.grid.groupAxis.position,yAxisPosition:a.fullDataFormatter.grid.valueAxis.position,width:a.layout.width,height:a.layout.height});return i.next(o),function(){r.next(void 0)}})})},Ce=({computedData$:t})=>t.pipe(C(e=>e.filter(r=>r.length).map(r=>r[0].seriesLabel)),Nt((e,r)=>JSON.stringify(e).length===JSON.stringify(r).length)),Ge=({computedData$:t})=>t.pipe(C(e=>e.map(n=>n.filter(i=>i.visible==!0)).filter(n=>n.length))),Ne=({computedLayoutData$:t})=>t.pipe(C(e=>e.map(n=>n.filter(i=>i.visible==!0)).filter(n=>n.length))),Te=({computedData$:t,fullDataFormatter$:e,layout$:r})=>O({computedData:t,fullDataFormatter:e,layout:r}).pipe(R(async i=>i),C(i=>{if(i.fullDataFormatter.grid.separateSeries)return ft(i.layout,i.fullDataFormatter.container,i.computedData.length);{const a=ft(i.layout,i.fullDataFormatter.container,1);return i.computedData.map((o,s)=>a[0])}})),Le=({selection:t,pluginName:e,clipPathID:r,seriesLabels$:n,gridContainerPosition$:i,gridAxesTransform$:a,gridGraphicTransform$:o})=>{const s=Q(e,"series"),c=Q(e,"axes"),l=Q(e,"graphic"),m=n.pipe(W((d,h)=>t.selectAll(`g.${s}`).data(d,b=>b).join(b=>b.append("g").classed(s,!0).each((D,v,y)=>{K(y[v]).selectAll(`g.${c}`).data([v]).join(w=>w.append("g").classed(c,!0).attr("clip-path",`url(#${r})`).each((M,F,P)=>{K(P[F]).selectAll("defs").data([F]).join("defs"),K(P[F]).selectAll("g").data([F]).join("g").classed(l,!0)}),w=>w,w=>w.remove())}),b=>b,b=>b.remove())),U(1));X({seriesSelection:m,gridContainerPosition:i}).pipe(z(async d=>d)).subscribe(d=>{d.seriesSelection.transition().attr("transform",(h,b)=>{const D=d.gridContainerPosition[b]??d.gridContainerPosition[0],v=D.translate,y=D.scale;return`translate(${v[0]}, ${v[1]}) scale(${y[0]}, ${y[1]})`})});const u=X({seriesSelection:m,gridAxesTransform:a}).pipe(z(async d=>d),W(d=>d.seriesSelection.select(`g.${c}`).style("transform",d.gridAxesTransform.value)),U(1)),f=u.pipe(W(d=>d.select("defs")),U(1)),p=X({axesSelection:u,gridGraphicTransform:o}).pipe(z(async d=>d),W(d=>{const h=d.axesSelection.select(`g.${l}`);return h.transition().duration(50).style("transform",d.gridGraphicTransform.value),h}),U(1));return{seriesSelection$:m,axesSelection$:u,defsSelection$:f,graphicGSelection$:p}},Oe=({fullDataFormatter$:t,gridAxesSize$:e,computedData$:r,fullChartParams$:n})=>{const i=new Lt,a=new mt(o=>{X({dataFormatter:t,computedData:r}).pipe(dt(i),z(async s=>s)).subscribe(s=>{const l=s.computedData[0]?s.computedData[0].length-1:0,m=s.dataFormatter.grid.groupAxis.scaleDomain[0]==="auto"?0-s.dataFormatter.grid.groupAxis.scalePadding:s.dataFormatter.grid.groupAxis.scaleDomain[0]-s.dataFormatter.grid.groupAxis.scalePadding,u=s.dataFormatter.grid.groupAxis.scaleDomain[1]==="auto"?l+s.dataFormatter.grid.groupAxis.scalePadding:s.dataFormatter.grid.groupAxis.scaleDomain[1]+s.dataFormatter.grid.groupAxis.scalePadding,p=(s.dataFormatter.grid.seriesDirection==="row"?(s.computedData[0]??[]).map(d=>d.groupLabel):s.computedData.map(d=>d[0].groupLabel)).filter((d,h)=>h>=m&&h<=u);o.next(p)})});return new mt(o=>{X({dataFormatter:t,axisSize:e,fullChartParams:n,scaleRangeGroupLabels:a}).pipe(dt(i),z(async s=>s)).subscribe(s=>{const c=s.dataFormatter.grid.valueAxis.position==="right"||s.dataFormatter.grid.valueAxis.position==="bottom",l=Ot({axisLabels:s.scaleRangeGroupLabels,axisWidth:s.axisSize.width,reverse:c}),m=f=>s.dataFormatter.grid.groupAxis.position==="bottom"||s.dataFormatter.grid.groupAxis.position==="top"?f.offsetX-s.fullChartParams.padding.left:f.offsetY-s.fullChartParams.padding.top,u=f=>{const p=m(f),d=l(p);return{groupIndex:d,groupLabel:s.scaleRangeGroupLabels[d]??""}};return o.next(u),function(){i.next(void 0)}})})};export{Ae as a,$e as b,xe as c,Fe as d,Pe as e,ke as f,Oe as g,Ge as h,Se as i,Ne as j,Le as k,Te as l,we as m,Ce as s};
