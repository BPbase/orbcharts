import{Z as b,bI as R,s as v,h as y,b as S,e as x,A as $,bJ as D,O as M,bK as P,n as p,f as m,p as _}from"./DXLUV_DG.js";function I(n,t){const e=new Map;let r=Object.assign([],n),a=[];return r.forEach((u,l)=>{Array.isArray(u)?u.forEach((s,o)=>{a.push({rowIndex:l,columnIndex:o,index:-1,datum:s})}):a.push({rowIndex:l,columnIndex:0,index:-1,datum:u})}),a.sort((u,l)=>t(u.datum,l.datum)),a=a.map((u,l)=>({...u,index:l})),a.forEach(u=>{e.set(String([u.rowIndex,u.columnIndex]),u.index)}),e}const F=n=>{const{data:t=[],dataFormatter:e,chartParams:r}=n;if(!t.length)return[];const a=[];try{const u=(s=>{if(s){const o=I(t,e.sort);return(c,i,d)=>o.get(String([i,d]))}else return(o,c,i)=>o.length})(e.sort!=null),l=(s,o,c,i,d)=>{const f=b(e.type,o,c),h=e.seriesLabels[o]||R("series",o),E=v(o,r),g=e.visibleFilter(s,o,c,n);return typeof s=="number"?{id:f,index:i,sortedIndex:d,label:f,description:"",data:{},value:s,seriesIndex:o,seriesLabel:h,color:E,visible:g}:{id:s.id?s.id:f,index:i,sortedIndex:d,label:s.label?s.label:f,description:s.description,data:s.data??{},value:s.value,seriesIndex:o,seriesLabel:h,color:E,visible:g}};t.forEach((s,o)=>{if(Array.isArray(s))s.forEach((c,i)=>{const d=u(a,o,i),f=l(c,o,i,a.length,d);a.push(f)});else{const c=u(a,o,0),i=l(s,o,0,a.length,c);a.push(i)}})}catch(u){throw Error(u)}return a},L=({subject:n,observer:t})=>{const e=y({datumList$:t.computedData$,fullChartParams$:t.fullChartParams$,event$:n.event$}).pipe(S(1)),r=x({datumList$:t.computedData$}).pipe(S(1));return{fullParams$:t.fullParams$,fullChartParams$:t.fullChartParams$,fullDataFormatter$:t.fullDataFormatter$,computedData$:t.computedData$,layout$:t.layout$,seriesHighlight$:e,SeriesDataMap$:r}};class B extends ${constructor(t,e){super({defaultDataFormatter:D,computedDataFn:F,contextObserverFn:L},t,e)}}var T=new M(function(n){return n.complete()}),A=P(function(n){return function(){n(this),this.name="EmptyError",this.message="no elements in sequence"}});function C(n){return p(function(t,e){var r=!1;t.subscribe(m(e,function(a){r=!0,e.next(a)},function(){r||e.next(n),e.complete()}))})}function O(n){return n<=0?function(){return T}:p(function(t,e){var r=0;t.subscribe(m(e,function(a){++r<=n&&(e.next(a),n<=r&&e.complete())}))})}function U(n){return n===void 0&&(n=V),p(function(t,e){var r=!1;t.subscribe(m(e,function(a){r=!0,e.next(a)},function(){return r?e.complete():e.error(n())}))})}function V(){return new A}function H(n,t){var e=arguments.length>=2;return function(r){return r.pipe(_,O(1),e?C(t):U(function(){return new A}))}}const j={force:{strength:.03,velocityDecay:.2,collisionSpacing:2},bubbleText:{fillRate:.6,lineHeight:12,lineLengthMin:4},highlightRIncrease:0,bubbleScaleType:"area"},w={outerRadius:.95,innerRadius:0,outerMouseoverRadius:1,enterDuration:800,startAngle:0,endAngle:Math.PI*2,padAngle:.02,cornerRadius:0},q={eventFn:(n,t,e)=>t==="mouseover"||t==="mousemove"?[String(n.datum.value)]:[String(Math.round(n.data.reduce((r,a)=>r+(a.value??0),0)*e))],textAttrs:[{transform:"translate(0, 0)"}],textStyles:[{"font-weight":"bold","text-anchor":"middle","pointer-events":"none","dominant-baseline":"middle","font-size":64,fill:"#000"}]},z={outerRadius:.95,outerMouseoverRadius:1,startAngle:0,endAngle:Math.PI*2,labelCentroid:2.3,labelColorType:"series",labelFn:n=>String(n.value)},G={position:"right",justify:"end",padding:28,backgroundFill:"none",backgroundStroke:"none",gap:10,listRectWidth:14,listRectHeight:14,listRectRadius:0};export{q as D,T as E,B as S,z as a,j as b,w as c,G as d,H as f};
