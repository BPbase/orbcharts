import{k as f,S as w,t as y,s as h,m,d as x,i as S,j as D}from"./DCTRfcdh.js";import{D as T}from"./B5HR0ePV.js";import{g as E}from"./DuZmw3Fq.js";import{s as C}from"./Dh0S6Bm5.js";const p="PieEventTexts",k=E(p,"text");function b(d,a){const t=d.selectAll(`text.${k}`).data(a),o=t.enter().append("text").classed(k,!0),r=t.merge(o);return r.each((e,s,n)=>{const i=h(n[s]).text(e.text);Object.keys(e.attr).forEach(l=>{i.attr(l,e.attr[l])}),Object.keys(e.style).forEach(l=>{i.style(l,e.style[l])})}),t.exit().remove(),r}function c({eventData:d,eventName:a,t,eventFn:o,textAttrs:r,textStyles:e}){return o(d,a,t).map((n,i)=>({text:n,attr:r[i],style:e[i]}))}function A(d,a){const t=new w;let o;const r=a.fullChartParams$.pipe(y(t),m(e=>e.highlightTarget),x());return S({computedData:a.computedData$,fullParams:a.fullParams$,fullChartParams:a.fullChartParams$,highlightTarget:r}).pipe(y(t),D(async e=>e)).subscribe(e=>{a.containerSelection.transition("move").duration(e.fullChartParams.transitionDuration).tween("move",(s,n)=>i=>{const l=c({eventData:{type:"series",pluginName:d,eventName:"transitionMove",event:s,highlightTarget:e.highlightTarget,data:e.computedData,series:[],seriesIndex:-1,seriesLabel:"",datum:null},eventName:"transitionMove",t:i,eventFn:e.fullParams.eventFn,textAttrs:e.fullParams.textAttrs,textStyles:e.fullParams.textStyles});b(a.containerSelection,l)}).on("end",(s,n)=>{const i=c({eventData:{type:"series",pluginName:d,eventName:"transitionEnd",event:s,highlightTarget:e.highlightTarget,data:e.computedData,series:[],seriesIndex:-1,seriesLabel:"",datum:null},eventName:"transitionMove",t:1,eventFn:e.fullParams.eventFn,textAttrs:e.fullParams.textAttrs,textStyles:e.fullParams.textStyles});b(a.containerSelection,i),o&&o.unsubscribe(),o=a.event$.subscribe(l=>{const v=c({eventData:l,eventName:l.eventName,t:1,eventFn:e.fullParams.eventFn,textAttrs:e.fullParams.textAttrs,textStyles:e.fullParams.textStyles});b(a.containerSelection,v)})})}),()=>{t.next(void 0)}}const j=f(p,T)(({selection:d,name:a,observer:t,subject:o})=>{const r=new w,{seriesCenterSelection$:e}=C({selection:d,pluginName:p,separateSeries$:t.separateSeries$,seriesLabels$:t.seriesLabels$,seriesContainerPosition$:t.seriesContainerPosition$}),s=[];return e.pipe(y(r)).subscribe(n=>{s.forEach(i=>i()),n.each((i,l,v)=>{const g=h(v[l]),P=t.computedLayoutData$.pipe(y(r),m(u=>u[l]??u[0])),$=t.seriesContainerPosition$.pipe(y(r),m(u=>u[l]??u[0]));s[l]=A(p,{containerSelection:g,computedData$:t.computedData$,containerComputedLayoutData$:P,SeriesDataMap$:t.SeriesDataMap$,fullParams$:t.fullParams$,fullChartParams$:t.fullChartParams$,seriesHighlight$:t.seriesHighlight$,seriesContainerPosition$:$,event$:o.event$})})}),()=>{r.next(void 0),s.forEach(n=>n())}}),I=[[{id:"疫情",label:"疫情",value:1828,type:"keyword"},{id:"簡單",label:"簡單",value:1202,type:"keyword"},{id:"垃圾",label:"垃圾",value:1112,type:"keyword"},{id:"防疫",label:"防疫",value:1062,type:"keyword"},{id:"武漢肺炎",label:"武漢肺炎",value:956,type:"keyword"},{id:"學生",label:"學生",value:811,type:"keyword"},{id:"五樓",label:"五樓",value:754,type:"keyword"},{id:"一個人",label:"一個人",value:724,type:"keyword"},{id:"崩潰",label:"崩潰",value:717,type:"keyword"},{id:"紓困",label:"紓困",value:690,type:"keyword"},{id:"蟑螂",label:"蟑螂",value:689,type:"keyword"},{id:"申請",label:"申請",value:663,type:"keyword"},{id:"同學",label:"同學",value:651,type:"keyword"},{id:"不意外",label:"不意外",value:627,type:"keyword"},{id:"在一起",label:"在一起",value:620,type:"keyword"},{id:"病毒",label:"病毒",value:617,type:"keyword"},{id:"邏輯",label:"邏輯",value:612,type:"keyword"},{id:"支那",label:"支那",value:610,type:"keyword"},{id:"智障",label:"智障",value:594,type:"keyword"},{id:"開心",label:"開心",value:589,type:"keyword"},{id:"男生",label:"男生",value:541,type:"keyword"},{id:"可憐哪",label:"可憐哪",value:534,type:"keyword"},{id:"肥宅",label:"肥宅",value:532,type:"keyword"},{id:"短網址",label:"短網址",value:524,type:"keyword"},{id:"畢業",label:"畢業",value:522,type:"keyword"},{id:"真相",label:"真相",value:519,type:"keyword"},{id:"台灣價值",label:"台灣價值",value:513,type:"keyword"},{id:"直播",label:"直播",value:493,type:"keyword"},{id:"攻擊",label:"攻擊",value:465,type:"keyword"},{id:"劇情",label:"劇情",value:449,type:"keyword"},{id:"口罩",label:"口罩",value:449,type:"keyword"},{id:"醫生",label:"醫生",value:438,type:"keyword"},{id:"戴口罩",label:"戴口罩",value:437,type:"keyword"},{id:"開車",label:"開車",value:436,type:"keyword"},{id:"投票",label:"投票",value:425,type:"keyword"},{id:"失敗",label:"失敗",value:424,type:"keyword"},{id:"傷害",label:"傷害",value:422,type:"keyword"},{id:"幸福",label:"幸福",value:414,type:"keyword"},{id:"資格",label:"資格",value:411,type:"keyword"},{id:"乖乖",label:"乖乖",value:410,type:"keyword"},{id:"感恩",label:"感恩",value:407,type:"keyword"},{id:"投資",label:"投資",value:405,type:"keyword"},{id:"堅持",label:"堅持",value:402,type:"keyword"},{id:"APP",label:"APP",value:144,type:"keyword"}],[{id:"民進黨",label:"民進黨",value:1161,type:"group"},{id:"國民黨",label:"國民黨",value:903,type:"group"},{id:"KMT",label:"KMT",value:448,type:"group"}],[{id:"美國",label:"美國",value:1112,type:"location"},{id:"日本",label:"日本",value:1016,type:"location"},{id:"高雄",label:"高雄",value:905,type:"location"},{id:"台中",label:"台中",value:558,type:"location"},{id:"韓國",label:"韓國",value:416,type:"location"}],[{id:"韓國瑜",label:"韓國瑜",value:680,type:"people"},{id:"蔡英文",label:"蔡英文",value:593,type:"people"},{id:"柯文哲",label:"柯文哲",value:484,type:"people"},{id:"李來希",label:"李來希",value:451,type:"people"}],[{id:"蘋果",label:"蘋果",value:581,type:"brand"},{id:"臉書",label:"臉書",value:439,type:"brand"},{id:"IG",label:"IG",value:269,type:"brand"},{id:"LINE",label:"LINE",value:165,type:"brand"}]];export{j as P,I as s};
