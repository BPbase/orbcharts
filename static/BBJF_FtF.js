import{b2 as Ct,ay as St,aw as Lt,b3 as Mt,ai as R,ak as W,al as K,ap as ft,ag as Ft,aX as Xt,ao as Vt,b9 as ot,as as rt,az as Yt,aj as Y,ah as vt,b4 as Pt,A as kt,ba as Rt,aD as at,bb as Bt,bc as wt,bd as Ot,be as It,bf as _t,bg as Et,bh as Nt,q as E,S as N,t as T,m as D,U as jt,aB as zt,W as Gt,af as Wt,c as I,k as L,l as S,b as w,s as V,bi as st,a1 as Ut,v as Ht,bj as qt,aT as Zt,aG as Jt,aM as Kt,a9 as Qt,aS as te,aa as ee,j as ae,aE as Q,aV as tt,ab as ie,aU as ne}from"./CJz0rwbW.js";import{c as q,d as ht}from"./DmmhaqEO.js";import{c as le}from"./2ZDPLa8x.js";import{c as oe}from"./B0XiZ-1Y.js";import{g as X,a as re,b as ct,h as Z,i as ut,j as v,n as se,o as ce,z as mt}from"./D7qTWgnP.js";import{b as ue}from"./DdT0iQQs.js";import{i as me}from"./DpkY98e9.js";import{f as pt}from"./n653kr_e.js";const pe=o=>({status:"success",columnName:"",expectToBe:""}),xe=o=>{const{data:n,dataFormatter:t,chartParams:a}=o;if(!n.length)return[];const e=Mt();let s=[];try{const c=n.map((l,r)=>Array.isArray(l)?{id:"",label:"",description:"",data:{},categoryLabel:e,value:l}:Ct(l)?{id:l.id??"",label:l.label??"",description:l.description??"",data:l.data??{},categoryLabel:l.categoryLabel??e,value:l.value}:{id:"",label:"",description:"",data:{},categoryLabel:e,value:[]}),p=(()=>{const l=new Set(t.categoryLabels);for(let r of c){const h=r.categoryLabel??e;l.add(h)}return Array.from(l)})(),x=new Map(p.map((l,r)=>[l,r]));let y=0;c.forEach((l,r)=>{const h=y;y++;const m=St(t.type,r),f=x.get(l.categoryLabel)??0,d=Lt(f,a),i={id:l.id?l.id:m,index:h,label:l.label?l.label:m,description:l.description??"",data:l.data,datumIndex:r,value:l.value,categoryIndex:f,categoryLabel:l.categoryLabel,visible:!0,color:d};i.visible=t.visibleFilter(i,o),s[f]||(s[f]=[]),s[f].push(i)})}catch(c){throw Error(c)}return s},ye=o=>({status:"success",columnName:"",expectToBe:""}),fe=({computedData$:o})=>o.pipe(R(n=>{const t=n.flat(),[a,e]=ot(t.map(p=>p.value[0])),[s,c]=ot(t.map(p=>p.value[1]));return{minX:a,maxX:e,minY:s,maxY:c}})),he=({computedData$:o,minMaxXY$:n,fullDataFormatter$:t,layout$:a})=>{function e(c,p){return q({maxValue:c.maxX,minValue:c.minX,axisWidth:p.width,scaleDomain:["auto","auto"],scaleRange:[0,1]})}function s(c,p){return q({maxValue:c.maxY,minValue:c.minY,axisWidth:p.height,scaleDomain:["auto","auto"],scaleRange:[0,1],reverse:!0})}return W({computedData:o,minMaxXY:n,fullDataFormatter:t,layout:a}).pipe(K(async c=>c),R(c=>{const p=e(c.minMaxXY,c.layout),x=s(c.minMaxXY,c.layout);return c.computedData.map((y,l)=>y.map((r,h)=>({...r,axisX:p(r.value[0]??0),axisY:x(r.value[1]??0)})))}))},ge=({computedData$:o,fullDataFormatter$:n})=>o.pipe(R(t=>t.map(a=>a[0]?a[0].categoryLabel:"")),ft((t,a)=>JSON.stringify(t).length===JSON.stringify(a).length)),de=({computedData$:o})=>o.pipe(R(n=>n.map(t=>t.filter(a=>a.visible==!0)).filter(t=>t.length>0))),$e=({computedLayoutData$:o})=>o.pipe(R(n=>n.map(t=>t.filter(a=>a.visible==!0)).filter(t=>t.length>0))),De=({computedData$:o,fullDataFormatter$:n,layout$:t})=>W({computedData:o,fullDataFormatter:n,layout:t}).pipe(K(async e=>e),R(e=>{if(e.fullDataFormatter.separateCategory)return rt(e.layout,e.fullDataFormatter.container,e.computedData.length);{const s=rt(e.layout,e.fullDataFormatter.container,1);return e.computedData.map((c,p)=>s[0])}})),Ae=({visibleComputedLayoutData$:o,minMaxXY$:n,fullDataFormatter$:t})=>W({visibleComputedLayoutData:o,minMaxXY:n,fullDataFormatter:t}).pipe(R(a=>{const{minX:e,maxX:s,minY:c,maxY:p}=(()=>{let{minX:m,maxX:f,minY:d,maxY:i}=a.minMaxXY;return a.fullDataFormatter.xAxis.scaleDomain[0]==="auto"&&m>0?m=0:typeof a.fullDataFormatter.xAxis.scaleDomain[0]=="number"&&(m=a.fullDataFormatter.xAxis.scaleDomain[0]),a.fullDataFormatter.xAxis.scaleDomain[1]==="auto"&&f<0?f=0:typeof a.fullDataFormatter.xAxis.scaleDomain[1]=="number"&&(f=a.fullDataFormatter.xAxis.scaleDomain[1]),a.fullDataFormatter.yAxis.scaleDomain[0]==="auto"&&d>0?d=0:typeof a.fullDataFormatter.yAxis.scaleDomain[0]=="number"&&(d=a.fullDataFormatter.yAxis.scaleDomain[0]),a.fullDataFormatter.yAxis.scaleDomain[1]==="auto"&&i<0?i=0:typeof a.fullDataFormatter.yAxis.scaleDomain[1]=="number"&&(i=a.fullDataFormatter.yAxis.scaleDomain[1]),{minX:m,maxX:f,minY:d,maxY:i}})();let x=[],y=null,l=null,r=null,h=null;for(let m of a.visibleComputedLayoutData)for(let f of m)f.value[0]>=e&&f.value[0]<=s&&f.value[1]>=c&&f.value[1]<=p&&(x.push(f),(y==null||f.value[0]<y.value[0])&&(y=f),(l==null||f.value[0]>l.value[0])&&(l=f),(r==null||f.value[1]<r.value[1])&&(r=f),(h==null||f.value[1]>h.value[1])&&(h=f));return{datumList:x,minXDatum:y,maxXDatum:l,minYDatum:r,maxYDatum:h}})),Te=({minMaxXY$:o,filteredMinMaxXYData$:n,fullDataFormatter$:t,layout$:a})=>{const e=new Ft;function s({minMaxXY:c,filteredMinMaxXYData:p,xAxis:x,yAxis:y,width:l,height:r}){let h=0,m=0,f=0,d=0,{minX:i,maxX:g,minY:$,maxY:C}=c,F=p.minXDatum.value[0]??0,M=p.maxXDatum.value[0]??0,P=p.minYDatum.value[1]??0,u=p.maxYDatum.value[1]??0;i===g&&(g+=1,i-=1),$===C&&(C+=1,$-=1);const b=q({maxValue:M,minValue:F,axisWidth:l,scaleDomain:x.scaleDomain,scaleRange:x.scaleRange}),A=b(i>0?0:i),k=b(g<0?0:g);h=A,f=(k-A)/l;const H=q({maxValue:u,minValue:P,axisWidth:r,scaleDomain:y.scaleDomain,scaleRange:y.scaleRange,reverse:!0}),j=H($>0?0:$),_=H(C<0?0:C);return m=_,d=(j-_)/r,{translate:[h,m],scale:[f,d],rotate:0,rotateX:0,rotateY:0,value:`translate(${h}px, ${m}px) scale(${f}, ${d})`}}return new Xt(c=>(W({minMaxXY:o,filteredMinMaxXYData:n,fullDataFormatter:t,layout:a}).pipe(Vt(e),K(async p=>p)).subscribe(p=>{const x=s({minMaxXY:p.minMaxXY,filteredMinMaxXYData:p.filteredMinMaxXYData,xAxis:p.fullDataFormatter.xAxis,yAxis:p.fullDataFormatter.yAxis,width:p.layout.width,height:p.layout.height});c.next(x)}),function(){e.next(void 0)}))},be=({multiValueContainerPosition$:o,multiValueGraphicTransform$:n})=>W({multiValueContainerPosition:o,multiValueGraphicTransform:n}).pipe(K(async t=>t),R(t=>t.multiValueContainerPosition.map((a,e)=>[1/t.multiValueGraphicTransform.scale[0]/t.multiValueContainerPosition[e].scale[0],1/t.multiValueGraphicTransform.scale[1]/t.multiValueContainerPosition[e].scale[1]]))),Ce=({subject:o,observer:n})=>{const t=Yt(n.fullChartParams$).pipe(Y(1)),a=n.fullDataFormatter$.pipe(R(i=>i.separateCategory),ft(),Y(1)),e=De({computedData$:n.computedData$,fullDataFormatter$:n.fullDataFormatter$,layout$:n.layout$}),s=n.computedData$.pipe(R(i=>i.flat().flat())).pipe(Y(1)),c=vt({datumList$:s,fullChartParams$:n.fullChartParams$,event$:o.event$}).pipe(Y(1)),p=ge({computedData$:n.computedData$,fullDataFormatter$:n.fullDataFormatter$}),x=Pt({datumList$:s}).pipe(Y(1)),y=fe({computedData$:n.computedData$}).pipe(Y(1)),l=he({computedData$:n.computedData$,minMaxXY$:y,fullDataFormatter$:n.fullDataFormatter$,layout$:n.layout$}).pipe(Y(1)),r=de({computedData$:n.computedData$}).pipe(Y(1)),h=$e({computedLayoutData$:l}).pipe(Y(1)),m=Ae({visibleComputedLayoutData$:h,minMaxXY$:y,fullDataFormatter$:n.fullDataFormatter$}).pipe(Y(1)),f=Te({minMaxXY$:y,filteredMinMaxXYData$:m,fullDataFormatter$:n.fullDataFormatter$,layout$:n.layout$}).pipe(Y(1)),d=be({multiValueContainerPosition$:e,multiValueGraphicTransform$:f});return{fullParams$:n.fullParams$,fullChartParams$:n.fullChartParams$,fullDataFormatter$:n.fullDataFormatter$,computedData$:n.computedData$,layout$:n.layout$,textSizePx$:t,isCategorySeprate$:a,multiValueContainerPosition$:e,multiValueHighlight$:c,categoryLabels$:p,CategoryDataMap$:x,minMaxXY$:y,computedLayoutData$:l,visibleComputedData$:r,visibleComputedLayoutData$:h,filteredMinMaxXYData$:m,multiValueGraphicTransform$:f,multiValueGraphicReverseScale$:d}};class ya extends kt{constructor(n,t){super({defaultDataFormatter:Rt,dataFormatterValidator:pe,computedDataFn:xe,dataValidator:ye,contextObserverCallback:Ce},n,t)}}var Se=function(o){at(n,o);function n(t,a){return o.call(this)||this}return n.prototype.schedule=function(t,a){return this},n}(Bt),xt={setInterval:function(o,n){for(var t=[],a=2;a<arguments.length;a++)t[a-2]=arguments[a];return setInterval.apply(void 0,wt([o,n],Ot(t)))},clearInterval:function(o){return clearInterval(o)},delegate:void 0},Le=function(o){at(n,o);function n(t,a){var e=o.call(this,t,a)||this;return e.scheduler=t,e.work=a,e.pending=!1,e}return n.prototype.schedule=function(t,a){var e;if(a===void 0&&(a=0),this.closed)return this;this.state=t;var s=this.id,c=this.scheduler;return s!=null&&(this.id=this.recycleAsyncId(c,s,a)),this.pending=!0,this.delay=a,this.id=(e=this.id)!==null&&e!==void 0?e:this.requestAsyncId(c,this.id,a),this},n.prototype.requestAsyncId=function(t,a,e){return e===void 0&&(e=0),xt.setInterval(t.flush.bind(t,this),e)},n.prototype.recycleAsyncId=function(t,a,e){if(e===void 0&&(e=0),e!=null&&this.delay===e&&this.pending===!1)return a;a!=null&&xt.clearInterval(a)},n.prototype.execute=function(t,a){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var e=this._execute(t,a);if(e)return e;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},n.prototype._execute=function(t,a){var e=!1,s;try{this.work(t)}catch(c){e=!0,s=c||new Error("Scheduled action threw falsy error")}if(e)return this.unsubscribe(),s},n.prototype.unsubscribe=function(){if(!this.closed){var t=this,a=t.id,e=t.scheduler,s=e.actions;this.work=this.state=this.scheduler=null,this.pending=!1,It(s,this),a!=null&&(this.id=this.recycleAsyncId(e,a,null)),this.delay=null,o.prototype.unsubscribe.call(this)}},n}(Se),yt=function(){function o(n,t){t===void 0&&(t=o.now),this.schedulerActionCtor=n,this.now=t}return o.prototype.schedule=function(n,t,a){return t===void 0&&(t=0),new this.schedulerActionCtor(this,n).schedule(a,t)},o.now=_t.now,o}(),Me=function(o){at(n,o);function n(t,a){a===void 0&&(a=yt.now);var e=o.call(this,t,a)||this;return e.actions=[],e._active=!1,e}return n.prototype.flush=function(t){var a=this.actions;if(this._active){a.push(t);return}var e;this._active=!0;do if(e=t.execute(t.state,t.delay))break;while(t=a.shift());if(this._active=!1,e){for(;t=a.shift();)t.unsubscribe();throw e}},n}(yt),Fe=new Me(Le);function Xe(o,n){return n===void 0&&(n=Fe),Et(function(t,a){var e=null,s=null,c=null,p=function(){if(e){e.unsubscribe(),e=null;var y=s;s=null,a.next(y)}};function x(){var y=c+o,l=n.now();if(l<y){e=this.schedule(void 0,y-l),a.add(e);return}p()}t.subscribe(Nt(a,function(y){s=y,c=n.now(),e||(e=n.schedule(x,o),a.add(e))},function(){p(),a.complete()},void 0,function(){s=e=null}))})}const gt="MultiValueLegend",Ve={name:gt,defaultParams:jt,layerIndex:zt,validator:(o,{validateColumns:n})=>n(o,{placement:{toBe:'"top" | "top-start" | "top-end" | "bottom" | "bottom-start" | "bottom-end" | "left" | "left-start" | "left-end" | "right" | "right-start" | "right-end"',test:a=>["top","top-start","top-end","bottom","bottom-start","bottom-end","left","left-start","left-end","right","right-start","right-end"].includes(a)},padding:{toBeTypes:["number"]},backgroundFill:{toBeOption:"ColorType"},backgroundStroke:{toBeOption:"ColorType"},gap:{toBeTypes:["number"]},listRectWidth:{toBeTypes:["number"]},listRectHeight:{toBeTypes:["number"]},listRectRadius:{toBeTypes:["number"]},textColorType:{toBeOption:"ColorType"}})},fa=E(Ve)(({selection:o,rootSelection:n,observer:t,subject:a})=>{const e=new N,s=t.CategoryDataMap$.pipe(T(e),D(x=>Array.from(x.keys()))),c=t.fullParams$.pipe(T(e),D(x=>{const y=[{listRectWidth:x.listRectWidth,listRectHeight:x.listRectHeight,listRectRadius:x.listRectRadius}];return{...x,labelList:y}})),p=le(gt,{rootSelection:n,legendLabels$:s,fullParams$:c,layout$:t.layout$,fullChartParams$:t.fullChartParams$,textSizePx$:t.textSizePx$});return()=>{e.next(void 0),p()}}),dt="MultiValueTooltip",Ye={name:dt,defaultParams:Gt,layerIndex:Wt,validator:(o,{validateColumns:n})=>n(o,{backgroundColorType:{toBeOption:"ColorType"},backgroundOpacity:{toBeTypes:["number"]},strokeColorType:{toBeOption:"ColorType"},offset:{toBe:"[number, number]",test:a=>Array.isArray(a)&&a.length===2&&typeof a[0]=="number"&&typeof a[1]=="number"},padding:{toBeTypes:["number"]},textColorType:{toBeOption:"ColorType"},renderFn:{toBeTypes:["Function"]}})},ha=E(Ye)(({selection:o,rootSelection:n,name:t,subject:a,observer:e})=>{const s=new N,c=oe(dt,{rootSelection:n,fullParams$:e.fullParams$,fullChartParams$:e.fullChartParams$,layout$:e.layout$,event$:a.event$});return()=>{s.next(void 0),c()}}),$t=({selection:o,pluginName:n,clipPathID:t,categoryLabels$:a,multiValueContainerPosition$:e,multiValueGraphicTransform$:s})=>{const c=X(n,"category"),p=X(n,"axes"),x=X(n,"graphic"),y=a.pipe(D((m,f)=>o.selectAll(`g.${c}`).data(m,d=>d).join(d=>d.append("g").classed(c,!0).each((i,g,$)=>{V($[g]).selectAll(`g.${p}`).data([g]).join(C=>C.append("g").classed(p,!0).attr("clip-path",`url(#${t})`).each((F,M,P)=>{V(P[M]).selectAll("defs").data([M]).join("defs"),V(P[M]).selectAll("g").data([M]).join("g").classed(x,!0)}),C=>C,C=>C.remove())}),d=>d,d=>d.remove())),I(1));L({categorySelection:y,multiValueContainerPosition:e}).pipe(S(async m=>m)).subscribe(m=>{m.categorySelection.transition().attr("transform",(f,d)=>{const i=m.multiValueContainerPosition[d]??m.multiValueContainerPosition[0],g=i.translate,$=i.scale;return`translate(${g[0]}, ${g[1]}) scale(${$[0]}, ${$[1]})`})});const l=y.pipe(D(m=>m.select(`g.${p}`)),I(1)),r=l.pipe(D(m=>m.select("defs")),I(1)),h=L({axesSelection:l,multiValueGraphicTransform:s}).pipe(S(async m=>m),D(m=>{const f=m.axesSelection.select(`g.${x}`);return f.transition().duration(50).style("transform",m.multiValueGraphicTransform.value),f}),I(1));return{categorySelection$:y,axesSelection$:l,defsSelection$:r,graphicGSelection$:h}},ve=({rootSelection:o,fullDataFormatter$:n,filteredMinMaxXYData$:t,multiValueContainerPosition$:a,layout$:e})=>{const s=ht(o,"mousemove").pipe(Xe(2)),c=a.pipe(D(l=>l.reduce((h,m)=>m.columnIndex>h?m.columnIndex:h,0)+1),w(),I(1)),p=a.pipe(D(l=>l.reduce((h,m)=>m.rowIndex>h?m.rowIndex:h,0)+1),w(),I(1)),x=L({layout:e,filteredMinMaxXYData:t,fullDataFormatter:n,columnAmount:c,rowAmount:p}).pipe(S(async l=>l),D(l=>{const r=st({maxValue:l.filteredMinMaxXYData.maxXDatum.value[0],minValue:l.filteredMinMaxXYData.minXDatum.value[0],axisWidth:l.layout.width,scaleDomain:l.fullDataFormatter.xAxis.scaleDomain,scaleRange:l.fullDataFormatter.xAxis.scaleRange}),h=st({maxValue:l.filteredMinMaxXYData.maxYDatum.value[1],minValue:l.filteredMinMaxXYData.minYDatum.value[1],axisWidth:l.layout.height,scaleDomain:l.fullDataFormatter.yAxis.scaleDomain,scaleRange:l.fullDataFormatter.yAxis.scaleRange,reverse:!0});return{xScale:r,yScale:h}})),y=L({fullDataFormatter:n,rootMousemove:s,columnAmount:c,rowAmount:p,layout:e,multiValueContainerPosition:a}).pipe(S(async l=>l),D(l=>({x:(l.rootMousemove.offsetX-l.layout.left)/l.multiValueContainerPosition[0].scale[0]%(l.layout.rootWidth/l.columnAmount/l.multiValueContainerPosition[0].scale[0]),y:(l.rootMousemove.offsetY-l.layout.top)/l.multiValueContainerPosition[0].scale[1]%(l.layout.rootHeight/l.rowAmount/l.multiValueContainerPosition[0].scale[1])})));return L({xyScale:x,axisValue:y}).pipe(S(async l=>l),D(l=>({x:l.axisValue.x,y:l.axisValue.y,xValue:l.xyScale.xScale(l.axisValue.x),yValue:l.xyScale.yScale(l.axisValue.y)})))},B="ScatterBubbles",Pe=.9,ke={name:B,defaultParams:Ut,layerIndex:Ht,validator:(o,{validateColumns:n})=>n(o,{fillColorType:{toBeOption:"ColorType"},strokeColorType:{toBeOption:"ColorType"},strokeWidth:{toBeTypes:["number"]},valueLinearOpacity:{toBeTypes:["number[]"]},arcScaleType:{toBe:"ArcScaleType",test:a=>a==="area"||a==="radius"},sizeAdjust:{toBeTypes:["number"]}})};function Re({graphicGSelection:o,circleGClassName:n,circleClassName:t,bubbleData:a,fullParams:e,fullChartParams:s,graphicReverseScale:c}){const p=l=>{const r=l.size();return s.transitionDuration/r};let x=0;return o.each((l,r,h)=>{V(h[r]).selectAll("g").data(a[r],m=>m.id).join(m=>(x=p(m),m.append("g").classed(n,!0)),m=>m,m=>m.remove()).attr("transform",m=>`translate(${m.axisX}, ${m.axisY})`).each((m,f,d)=>{V(d[f]).selectAll("circle").data([m]).join(i=>i.append("circle").style("cursor","pointer").style("vector-effect","non-scaling-stroke").classed(t,!0).attr("opacity",0).transition().delay((g,$)=>f*x).attr("opacity",.8),i=>i.transition().duration(50).attr("opacity",.8),i=>i.remove()).attr("r",i=>i.r).attr("fill",(i,g)=>ct({datum:i,colorType:e.fillColorType,fullChartParams:s})).attr("stroke",(i,g)=>ct({datum:i,colorType:e.strokeColorType,fullChartParams:s})).attr("stroke-width",e.strokeWidth).attr("transform",`scale(${c[r][0]??1}, ${c[r][1]??1})`)})}),o.selectAll(`circle.${t}`)}function Be({selection:o,ids:n,fullChartParams:t}){if(o.interrupt("highlight"),!n.length){o.transition("highlight").duration(200).style("opacity",a=>a.opacity);return}o.each((a,e,s)=>{n.includes(a.id)?V(s[e]).style("opacity",p=>p.opacity).transition("highlight").duration(200):V(s[e]).style("opacity",t.styles.unhighlightedOpacity).transition("highlight").duration(200)})}function we({defsSelection:o,clipPathData:n}){o.selectAll("clipPath").data(n).join(t=>t.append("clipPath"),t=>t,t=>t.remove()).attr("id",t=>t.id).each((t,a,e)=>{V(e[a]).selectAll("rect").data([t]).join("rect").attr("x",0).attr("y",0).attr("width",s=>s.width).attr("height",s=>s.height)})}const ga=E(ke)(({selection:o,name:n,subject:t,observer:a})=>{const e=new N,s=re(B,"clipPath-box"),c=X(B,"circleG"),p=X(B,"circle"),{categorySelection$:x,axesSelection$:y,defsSelection$:l,graphicGSelection$:r}=$t({selection:o,pluginName:B,clipPathID:s,categoryLabels$:a.categoryLabels$,multiValueContainerPosition$:a.multiValueContainerPosition$,multiValueGraphicTransform$:a.multiValueGraphicTransform$}),h=L({computedData:a.computedData$,multiValueGraphicReverseScale:a.multiValueGraphicReverseScale$}).pipe(T(e),S(async u=>u),D(u=>u.computedData.map((b,A)=>u.multiValueGraphicReverseScale[A])));L({defsSelection:l,layout:a.layout$}).pipe(T(e),S(async u=>u)).subscribe(u=>{const b=[{id:s,width:u.layout.width,height:u.layout.height}];we({defsSelection:u.defsSelection,clipPathData:b})});const m=a.filteredMinMaxXYData$.pipe(T(e),D(u=>u.datumList.flat().map(b=>b.value[2]??0)),I(1)),f=a.filteredMinMaxXYData$.pipe(T(e),D(u=>qt(u.datumList.flat().map(b=>b.value[2]??0)))),d=L({filteredMinMaxValue:f,fullParams:a.fullParams$}).pipe(T(e),S(async u=>u),D(u=>Zt().domain(u.filteredMinMaxValue).range(u.fullParams.valueLinearOpacity))),i=L({layout:a.layout$,fullParams:a.fullParams$}).pipe(T(e),D(u=>Math.min(u.layout.width,u.layout.height)/2*u.fullParams.sizeAdjust)),g=m.pipe(T(e),D(u=>u.reduce((b,A)=>b+A,0))),$=L({totalR:i,totalValue:g,fullParams:a.fullParams$}).pipe(T(e),S(async u=>u),D(u=>Jt().domain([0,u.totalValue]).range([0,u.totalR]).exponent(u.fullParams.arcScaleType==="area"?.5:1))),C=L({radiusScale:$,fullParams:a.fullParams$,totalR:i,filteredValueList:m}).pipe(T(e),S(async u=>u),D(u=>u.fullParams.arcScaleType==="area"?1:(()=>{const b=u.totalR*u.totalR*Math.PI;return Math.sqrt(b/Kt(u.filteredValueList,A=>Math.PI*Math.pow(u.radiusScale(A),2)))})())),F=L({computedLayoutData:a.computedLayoutData$,opacityScale:d,radiusScale:$,scaleFactor:C,fullParams:a.fullParams$}).pipe(T(e),S(async u=>u),D(u=>u.computedLayoutData.map(b=>b.map(A=>{const k=A;return k.r=u.radiusScale(k.value[2])*u.scaleFactor*Pe,k.opacity=u.opacityScale(k.value[2]),k})))),M=L({graphicGSelection:r,bubbleData:F,graphicReverseScale:h,fullChartParams:a.fullChartParams$,fullParams:a.fullParams$}).pipe(T(e),S(async u=>u),D(u=>Re({graphicGSelection:u.graphicGSelection,circleGClassName:c,circleClassName:p,bubbleData:u.bubbleData,fullParams:u.fullParams,fullChartParams:u.fullChartParams,graphicReverseScale:u.graphicReverseScale}))),P=a.fullChartParams$.pipe(T(e),D(u=>u.highlightTarget),w());return L({graphicSelection:M,computedData:a.computedData$,CategoryDataMap:a.CategoryDataMap$,highlightTarget:P}).pipe(T(e),S(async u=>u)).subscribe(u=>{u.graphicSelection.on("mouseover",(b,A)=>{t.event$.next({type:"multiValue",eventName:"mouseover",pluginName:B,highlightTarget:u.highlightTarget,datum:A,category:u.CategoryDataMap.get(A.categoryLabel),categoryIndex:A.categoryIndex,categoryLabel:A.categoryLabel,data:u.computedData,event:b})}).on("mousemove",(b,A)=>{t.event$.next({type:"multiValue",eventName:"mousemove",pluginName:B,highlightTarget:u.highlightTarget,datum:A,category:u.CategoryDataMap.get(A.categoryLabel),categoryIndex:A.categoryIndex,categoryLabel:A.categoryLabel,data:u.computedData,event:b})}).on("mouseout",(b,A)=>{t.event$.next({type:"multiValue",eventName:"mouseout",pluginName:B,highlightTarget:u.highlightTarget,datum:A,category:u.CategoryDataMap.get(A.categoryLabel),categoryIndex:A.categoryIndex,categoryLabel:A.categoryLabel,data:u.computedData,event:b})}).on("click",(b,A)=>{t.event$.next({type:"multiValue",eventName:"click",pluginName:B,highlightTarget:u.highlightTarget,datum:A,category:u.CategoryDataMap.get(A.categoryLabel),categoryIndex:A.categoryIndex,categoryLabel:A.categoryLabel,data:u.computedData,event:b})})}),L({graphicSelection:M,highlight:a.multiValueHighlight$.pipe(D(u=>u.map(b=>b.id))),fullChartParams:a.fullChartParams$}).pipe(T(e),S(async u=>u)).subscribe(u=>{Be({selection:u.graphicSelection,ids:u.highlight,fullChartParams:u.fullChartParams})}),()=>{e.next(void 0)}}),J="XYAux",et=X(J,"label-box"),Oe={name:J,defaultParams:Qt,layerIndex:te,validator:(o,{validateColumns:n})=>{const t=n(o,{xAxis:{toBeTypes:["object"]},yAxis:{toBeTypes:["object"]}});if(o.xAxis){const a=n(o.xAxis,{showLine:{toBeTypes:["boolean"]},showLabel:{toBeTypes:["boolean"]},lineDashArray:{toBeTypes:["string"]},lineColorType:{toBeOption:"ColorType"},labelColorType:{toBeOption:"ColorType"},labelTextColorType:{toBeOption:"ColorType"},labelTextFormat:{toBeTypes:["string","Function"]},labelPadding:{toBeTypes:["number"]}});if(a.status==="error")return a}if(o.yAxis){const a=n(o.yAxis,{showLine:{toBeTypes:["boolean"]},showLabel:{toBeTypes:["boolean"]},lineDashArray:{toBeTypes:["string"]},lineColorType:{toBeOption:"ColorType"},labelColorType:{toBeOption:"ColorType"},labelTextColorType:{toBeOption:"ColorType"},labelTextFormat:{toBeTypes:["string","Function"]},labelPadding:{toBeTypes:["number"]}});if(a.status==="error")return a}return t}};function Ie({axisX:o,axisY:n,layout:t,fullParams:a}){return o>=0&&o<=t.width&&n>=0&&n<=t.height?[{id:"line-x",x1:o,x2:o,y1:0,y2:t.height,dashArray:a.xAxis.lineDashArray??"none",colorType:a.xAxis.lineColorType},{id:"line-0",x1:0,x2:t.width,y1:n,y2:n,dashArray:a.yAxis.lineDashArray??"none",colorType:a.yAxis.lineColorType}]:[]}function _e({axisX:o,axisY:n,xValue:t,yValue:a,fullParams:e,textSizePx:s,layout:c,columnAmount:p,rowAmount:x}){if(!(o>=0&&o<=c.width&&n>=0&&n<=c.height))return[];const y=6,l=3,r=o,h=c.height+e.xAxis.labelPadding*x,m=Z(t,e.xAxis.labelTextFormat),f=m.split(`
`),d=f.reduce((z,G)=>G.length>z.length?G:z,""),i=ut(d,s),g=s*f.length,$=i+y*2,C=g+l*2,F=-$/2,M=-l,P=F+y,u=M+l,b=-(e.yAxis.labelPadding*p),A=n,k=Z(a,e.yAxis.labelTextFormat),U=k.split(`
`),H=U.reduce((z,G)=>G.length>z.length?G:z,""),j=ut(H,s),_=s*U.length,it=j+y*2,At=_+l*2,nt=-j-y,lt=-l-_/2,Tt=nt+y,bt=lt+l;return[{id:"label-x",x:r,y:h,text:m,textArr:f,textWidth:i,textHeight:g,colorType:e.xAxis.labelColorType,textColorType:e.xAxis.labelTextColorType,rectWidth:$,rectHeight:C,rectX:F,rectY:M,textX:P,textY:u},{id:"label-y",x:b,y:A,text:k,textArr:U,textWidth:j,textHeight:_,colorType:e.yAxis.labelColorType,textColorType:e.xAxis.labelTextColorType,rectWidth:it,rectHeight:At,rectX:nt,rectY:lt,textX:Tt,textY:bt}]}function Ee({selection:o,pluginName:n,lineData:t,fullParams:a,fullChartParams:e}){const s=X(n,"auxline");return o.selectAll(`line.${s}`).data(t).join(p=>p.append("line").classed(s,!0).style("stroke-width",1).style("pointer-events","none").style("vector-effect","non-scaling-stroke").attr("x1",x=>x.x1).attr("y1",x=>x.y1).attr("x2",x=>x.x2).attr("y2",x=>x.y2),p=>p.transition().duration(50).attr("x1",y=>y.x1).attr("y1",y=>y.y1).attr("x2",y=>y.x2).attr("y2",y=>y.y2),p=>p.remove()).style("stroke",p=>v(p.colorType,e)).style("stroke-dasharray",p=>p.dashArray)}function Ne(o){o.selectAll("line").data([]).exit().remove()}function je({selection:o,labelData:n,fullParams:t,fullDataFormatter:a,fullChartParams:e,textReverseTransform:s,textSizePx:c}){return o.selectAll(`g.${et}`).data(n).join(x=>x.append("g").classed(et,!0).style("cursor","pointer").attr("transform",(y,l)=>`translate(${y.x}, ${y.y})`),x=>x.transition().duration(50).attr("transform",(l,r)=>`translate(${l.x}, ${l.y})`),x=>x.remove()).each((x,y,l)=>{V(l[y]).selectAll("rect").data([x]).join(r=>r.append("rect").style("cursor","pointer").attr("rx",5).attr("ry",5),r=>r,r=>r.remove()).attr("width",r=>`${r.rectWidth}px`).attr("height",r=>`${r.rectHeight}px`).attr("fill",r=>v(r.colorType,e)).attr("x",r=>r.rectX).attr("y",r=>r.rectY).style("transform",s),V(l[y]).selectAll("text").data([x]).join(r=>r.append("text").style("dominant-baseline","hanging").style("cursor","pointer").style("pointer-events","none"),r=>r,r=>r.remove()).style("transform",s).attr("fill",r=>v(r.textColorType,e)).attr("font-size",e.styles.textSize).attr("x",r=>r.textX).attr("y",r=>r.textY).each((r,h,m)=>{ue(V(m[h]),{textArr:x.textArr,textSizePx:c,groupAxisPosition:h===0?"bottom":"left"})})})}function ze(o){o.selectAll(`g.${et}`).data([]).exit().remove()}const da=E(Oe)(({selection:o,rootSelection:n,name:t,subject:a,observer:e})=>{const s=new N,c=n.insert("rect","g").classed(X(J,"rect"),!0).attr("opacity",0),{categorySelection$:p,axesSelection$:x,defsSelection$:y,graphicGSelection$:l}=$t({selection:o,pluginName:J,clipPathID:"test",categoryLabels$:e.isCategorySeprate$.pipe(S(i=>me(()=>i,e.categoryLabels$,e.categoryLabels$.pipe(D(g=>[g[0]]))))),multiValueContainerPosition$:e.multiValueContainerPosition$,multiValueGraphicTransform$:e.multiValueGraphicTransform$});e.layout$.pipe(T(s)).subscribe(i=>{c.attr("width",i.rootWidth).attr("height",i.rootHeight)});const r=e.multiValueContainerPosition$.pipe(D(i=>i.reduce(($,C)=>C.columnIndex>$?C.columnIndex:$,0)+1),w()),h=e.multiValueContainerPosition$.pipe(D(i=>i.reduce(($,C)=>C.rowIndex>$?C.rowIndex:$,0)+1),w()),m=e.multiValueContainerPosition$.pipe(T(s),S(async i=>i),D(i=>`${`scale(${1/i[0].scale[0]}, ${1/i[0].scale[1]})`}`),w()),f=ve({rootSelection:n,fullDataFormatter$:e.fullDataFormatter$,filteredMinMaxXYData$:e.filteredMinMaxXYData$,multiValueContainerPosition$:e.multiValueContainerPosition$,layout$:e.layout$}).pipe(T(s));L({axesSelection:x,layout:e.layout$,xyPosition:f,fullParams:e.fullParams$,fullDataFormatter:e.fullDataFormatter$,fullChartParams:e.fullChartParams$,textReverseTransform:m,textSizePx:e.textSizePx$,columnAmount:r,rowAmount:h}).pipe(T(s),S(async i=>i)).subscribe(i=>{const{x:g,y:$,xValue:C,yValue:F}=i.xyPosition,M=Ie({axisX:g,axisY:$,layout:i.layout,fullParams:i.fullParams});Ee({selection:i.axesSelection,pluginName:t,lineData:M,fullParams:i.fullParams,fullChartParams:i.fullChartParams});const P=_e({axisX:g,axisY:$,xValue:C,yValue:F,fullParams:i.fullParams,textSizePx:i.textSizePx,layout:i.layout,columnAmount:i.columnAmount,rowAmount:i.rowAmount});je({selection:i.axesSelection,labelData:P,fullParams:i.fullParams,fullDataFormatter:i.fullDataFormatter,fullChartParams:i.fullChartParams,textReverseTransform:i.textReverseTransform,textSizePx:i.textSizePx})});const d=ht(c,"mouseout").pipe(T(s));return L({rootRectMouseout:d,axesSelection:x}).pipe(T(s),S(async i=>i)).subscribe(i=>{setTimeout(()=>{Ne(i.axesSelection),ze(i.axesSelection)})}),()=>{s.next(void 0),c.remove()}}),O="XYAxes",Dt=6,Ge="middle",We="hanging",Ue="start",He="hanging",qe="end",Ze="middle",Je="end",Ke="auto",Qe={name:O,defaultParams:ee,layerIndex:ae,validator:(o,{validateColumns:n})=>{const t=n(o,{xAxis:{toBeTypes:["object"]},yAxis:{toBeTypes:["object"]}});if(o.xAxis){const a=n(o.xAxis,{labelOffset:{toBe:"[number, number]",test:e=>Array.isArray(e)&&e.length===2&&typeof e[0]=="number"&&typeof e[1]=="number"},labelColorType:{toBeOption:"ColorType"},axisLineVisible:{toBeTypes:["boolean"]},axisLineColorType:{toBeOption:"ColorType"},ticks:{toBeTypes:["number","null"]},tickFormat:{toBeTypes:["string","Function"]},tickLineVisible:{toBeTypes:["boolean"]},tickPadding:{toBeTypes:["number"]},tickFullLine:{toBeTypes:["boolean"]},tickFullLineDasharray:{toBeTypes:["string"]},tickColorType:{toBeOption:"ColorType"},tickTextColorType:{toBeOption:"ColorType"}});if(a.status==="error")return a}if(o.yAxis){const a=n(o.yAxis,{labelOffset:{toBe:"[number, number]",test:e=>Array.isArray(e)&&e.length===2&&typeof e[0]=="number"&&typeof e[1]=="number"},labelColorType:{toBeOption:"ColorType"},axisLineVisible:{toBeTypes:["boolean"]},axisLineColorType:{toBeOption:"ColorType"},ticks:{toBeTypes:["number","null"]},tickFormat:{toBeTypes:["string","Function"]},tickLineVisible:{toBeTypes:["boolean"]},tickPadding:{toBeTypes:["number"]},tickFullLine:{toBeTypes:["boolean"]},tickFullLineDasharray:{toBeTypes:["string"]},tickColorType:{toBeOption:"ColorType"},tickTextColorType:{toBeOption:"ColorType"}});if(a.status==="error")return a}return t}};function ta({selection:o,xLabelClassName:n,fullParams:t,layout:a,fullDataFormatter:e,fullChartParams:s,textReverseTransform:c}){const p=t.xAxis.tickPadding+t.xAxis.labelOffset[0],x=t.xAxis.tickPadding+t.xAxis.labelOffset[1];let y=p,l=x;o.selectAll(`g.${n}`).data([t]).join("g").classed(n,!0).each((r,h,m)=>{V(m[h]).selectAll("text").data([r]).join(f=>f.append("text").style("font-weight","bold"),f=>f,f=>f.remove()).attr("text-anchor",Ue).attr("dominant-baseline",He).attr("font-size",s.styles.textSize).style("fill",v(t.xAxis.labelColorType,s)).style("transform",c).attr("x",y).attr("y",l).text(f=>e.xAxis.label)}).attr("transform",r=>`translate(${a.width}, ${a.height})`)}function ea({selection:o,yLabelClassName:n,fullParams:t,layout:a,fullDataFormatter:e,fullChartParams:s,textReverseTransform:c}){const p=t.yAxis.tickPadding-t.yAxis.labelOffset[0],x=t.yAxis.tickPadding+t.yAxis.labelOffset[1];let y=-p,l=-x;o.selectAll(`g.${n}`).data([t]).join("g").classed(n,!0).each((r,h,m)=>{V(m[h]).selectAll("text").data([r]).join(f=>f.append("text").style("font-weight","bold"),f=>f,f=>f.remove()).attr("text-anchor",Je).attr("dominant-baseline",Ke).attr("font-size",s.styles.textSize).style("fill",v(t.yAxis.labelColorType,s)).style("transform",c).attr("x",y).attr("y",l).text(f=>e.yAxis.label)})}function aa({selection:o,xAxisClassName:n,fullParams:t,layout:a,fullDataFormatter:e,fullChartParams:s,xScale:c,textReverseTransform:p,minMaxXY:x}){const y=o.selectAll(`g.${n}`).data([t]).join("g").classed(n,!0).attr("transform",`translate(0, ${a.height})`),l=x.maxY-x.minY;let r=t.xAxis.tickPadding;const h=se(c).scale(c).ticks(l>t.xAxis.ticks?t.xAxis.ticks:x.minY===0&&x.maxY===0?1:Math.ceil(l)).tickFormat(d=>Z(d,t.xAxis.tickFormat)).tickSize(t.xAxis.tickFullLine==!0?-a.height:Dt).tickSizeOuter(-a.height).tickPadding(r),m=y.transition().duration(100).call(h);return m.selectAll("line").style("fill","none").style("stroke",t.xAxis.tickLineVisible==!0?v(t.xAxis.tickColorType,s):"none").style("stroke-dasharray",t.xAxis.tickFullLineDasharray).attr("pointer-events","none"),m.selectAll("path").style("fill","none").style("stroke",t.xAxis.axisLineVisible==!0?v(t.xAxis.axisLineColorType,s):"none").style("shape-rendering","crispEdges"),y.selectAll("text").attr("font-size",s.styles.textSize).style("color",v(t.xAxis.tickTextColorType,s)).attr("text-anchor",Ge).attr("dominant-baseline",We).attr("dy",0).attr("y",r).style("transform",p),y}function ia({selection:o,yAxisClassName:n,fullParams:t,layout:a,fullDataFormatter:e,fullChartParams:s,yScale:c,textReverseTransform:p,minMaxXY:x}){const y=o.selectAll(`g.${n}`).data([t]).join("g").classed(n,!0),l=x.maxY-x.minY;let r=t.yAxis.tickPadding;const h=ce(c).scale(c).ticks(l>t.yAxis.ticks?t.yAxis.ticks:x.minY===0&&x.maxY===0?1:Math.ceil(l)).tickFormat(d=>Z(d,t.yAxis.tickFormat)).tickSize(t.yAxis.tickFullLine==!0?-a.width:Dt).tickPadding(r),m=y.transition().duration(100).call(h);return m.selectAll("line").style("fill","none").style("stroke",t.yAxis.tickLineVisible==!0?v(t.yAxis.tickColorType,s):"none").style("stroke-dasharray",t.yAxis.tickFullLineDasharray).attr("pointer-events","none"),m.selectAll("path").style("fill","none").style("stroke",t.yAxis.axisLineVisible==!0?v(t.yAxis.axisLineColorType,s):"none").style("shape-rendering","crispEdges"),y.selectAll("text").attr("font-size",s.styles.textSize).style("color",v(t.yAxis.tickTextColorType,s)).attr("text-anchor",qe).attr("dominant-baseline",Ze).attr("x",-r).attr("dy",0).style("transform",p),y}const $a=E(Qe)(({selection:o,name:n,observer:t,subject:a})=>{const e=new N,s=X(O,"container"),c=X(O,"xAxis"),p=X(O,"yAxisG"),x=X(O,"yAxis"),y=X(O,"xLabel"),l=X(O,"yLabel"),r=L({computedData:t.computedData$.pipe(w((i,g)=>i.length===g.length)),isCategorySeprate:t.isCategorySeprate$}).pipe(T(e),S(async i=>i),D(i=>i.isCategorySeprate?i.computedData:[i.computedData[0]]),D((i,g)=>o.selectAll(`g.${s}`).data(i,$=>$[0]?$[0].categoryIndex:g).join("g").classed(s,!0))),h=r.pipe(T(e),D((i,g)=>i.selectAll(`g.${p}`).data([p]).join("g").classed(p,!0)));L({containerSelection:r,gridContainerPosition:t.multiValueContainerPosition$}).pipe(T(e),S(async i=>i)).subscribe(i=>{i.containerSelection.attr("transform",(g,$)=>{const C=i.gridContainerPosition[$]??i.gridContainerPosition[0],F=C.translate,M=C.scale;return`translate(${F[0]}, ${F[1]}) scale(${M[0]}, ${M[1]})`})});const m=t.multiValueContainerPosition$.pipe(T(e),S(async i=>i),D(i=>`${`scale(${1/i[0].scale[0]}, ${1/i[0].scale[1]})`}`),w()),f=new Q(i=>{L({fullDataFormatter:t.fullDataFormatter$,layout:t.layout$,filteredMinMaxXYData:t.filteredMinMaxXYData$}).pipe(T(e),S(async g=>g)).subscribe(g=>{const $=tt({maxValue:g.filteredMinMaxXYData.maxYDatum.value[1],minValue:g.filteredMinMaxXYData.minYDatum.value[0],axisWidth:g.layout.width,scaleDomain:g.fullDataFormatter.xAxis.scaleDomain,scaleRange:g.fullDataFormatter.xAxis.scaleRange});i.next($)})}),d=new Q(i=>{L({fullDataFormatter:t.fullDataFormatter$,layout:t.layout$,filteredMinMaxXYData:t.filteredMinMaxXYData$}).pipe(T(e),S(async g=>g)).subscribe(g=>{const $=tt({maxValue:g.filteredMinMaxXYData.maxYDatum.value[1],minValue:g.filteredMinMaxXYData.minYDatum.value[0],axisWidth:g.layout.height,scaleDomain:g.fullDataFormatter.yAxis.scaleDomain,scaleRange:g.fullDataFormatter.yAxis.scaleRange,reverse:!0});i.next($)})});return L({axisSelection:h,fullParams:t.fullParams$,computedData:t.computedData$,layout:t.layout$,fullDataFormatter:t.fullDataFormatter$,fullChartParams:t.fullChartParams$,xScale:f,yScale:d,textReverseTransform:m,minMaxXY:t.minMaxXY$}).pipe(T(e),S(async i=>i)).subscribe(i=>{aa({selection:i.axisSelection,xAxisClassName:c,fullParams:i.fullParams,layout:i.layout,fullDataFormatter:i.fullDataFormatter,fullChartParams:i.fullChartParams,xScale:i.xScale,textReverseTransform:i.textReverseTransform,minMaxXY:i.minMaxXY}),ia({selection:i.axisSelection,yAxisClassName:x,fullParams:i.fullParams,layout:i.layout,fullDataFormatter:i.fullDataFormatter,fullChartParams:i.fullChartParams,yScale:i.yScale,textReverseTransform:i.textReverseTransform,minMaxXY:i.minMaxXY}),ta({selection:i.axisSelection,xLabelClassName:y,fullParams:i.fullParams,layout:i.layout,fullDataFormatter:i.fullDataFormatter,fullChartParams:i.fullChartParams,textReverseTransform:i.textReverseTransform}),ea({selection:i.axisSelection,yLabelClassName:l,fullParams:i.fullParams,layout:i.layout,fullDataFormatter:i.fullDataFormatter,fullChartParams:i.fullChartParams,textReverseTransform:i.textReverseTransform})}),()=>{e.next(void 0)}}),na="XYZoom",la={name:na,defaultParams:ie,layerIndex:ne,validator:(o,{validateColumns:n})=>({status:"success",columnName:"",expectToBe:""})},Da=E(la)(({selection:o,rootSelection:n,name:t,observer:a,subject:e})=>{const s=new N;let c={k:1,x:0,y:0};const p=a.fullDataFormatter$.pipe(D(r=>r.xAxis),pt()),x=a.fullDataFormatter$.pipe(D(r=>r.yAxis),pt()),y=new Q(r=>{L({initXAxis:p,layout:a.layout$,minMaxXY:a.minMaxXY$}).pipe(T(s),S(async h=>h)).subscribe(h=>{const m=tt({maxValue:h.minMaxXY.maxX,minValue:h.minMaxXY.minX,axisWidth:h.layout.width,scaleDomain:h.initXAxis.scaleDomain,scaleRange:h.initXAxis.scaleRange});r.next(m)})}),l=L({initXAxis:p,initYAxis:x,minMaxXY:a.minMaxXY$}).pipe(T(s),S(async r=>r),D(r=>{let h=r.minMaxXY.minX,m=r.minMaxXY.maxX,f=r.minMaxXY.minY,d=r.minMaxXY.maxY;return r.initXAxis.scaleDomain[0]==="auto"&&h>0&&(h=0),r.initXAxis.scaleDomain[1]==="auto"&&m<0&&(m=0),r.initYAxis.scaleDomain[0]==="auto"&&f>0&&(f=0),r.initYAxis.scaleDomain[1]==="auto"&&d<0&&(d=0),{minX:h,maxX:m,minY:f,maxY:d}}));return L({initXScale:y,fullDataFormatter:a.fullDataFormatter$,minMaxScaleDomain:l}).pipe(T(s),S(async r=>r)).subscribe(r=>{const h=r.initXScale.copy(),m=mt().on("zoom",function(d){const i=d.transform,g=F=>{const M=Math.round(F);return Math.min(r.minMaxScaleDomain.maxX,Math.max(r.minMaxScaleDomain.minX,M))},$=i.rescaleX(h).domain().map(g);$[0]<=r.minMaxScaleDomain.minX&&$[1]>=r.minMaxScaleDomain.maxX?i.k<c.k&&(i.k=c.k,i.x=c.x,i.y=c.y):$[1]-$[0]<=1&&i.k>c.k&&(i.k=c.k,i.x=c.x,i.y=c.y),c.k=i.k,c.x=i.x,c.y=i.y;const C={...r.fullDataFormatter,xAxis:{...r.fullDataFormatter.xAxis,scaleDomain:$}};e.dataFormatter$.next(C)});n.call(m)}),()=>{s.next(void 0),n.call(mt().on("zoom",null))}});export{fa as M,ga as S,da as X,ha as a,$a as b,Da as c,ya as d,$t as m};
