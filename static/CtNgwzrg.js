import{ap as x,S,t as m,s as C,m as d,a0 as F,aq as A,d as y,j as B,k as T,g as b}from"./CUAujy1K.js";import{s as v}from"./BJQc5YqC.js";const h="PieEventTexts",f=b(h,"text"),_={name:h,defaultParams:F,layerIndex:A,validator:(i,{validateColumns:s})=>s(i,{renderFn:{toBeTypes:["Function"]},textAttrs:{toBeTypes:["object[]"]},textStyles:{toBeTypes:["object[]"]}})};function g(i,s){const e=i.selectAll(`text.${f}`).data(s),o=e.enter().append("text").classed(f,!0),r=e.merge(o);return r.each((t,n,l)=>{const c=C(l[n]).text(t.text);Object.keys(t.attr).forEach(a=>{c.attr(a,t.attr[a])}),Object.keys(t.style).forEach(a=>{c.style(a,t.style[a])})}),e.exit().remove(),r}function P({eventData:i,renderFn:s,textAttrs:e,textStyles:o}){const r=s(i);return(Array.isArray(r)?r:[r]).map((n,l)=>({text:n,attr:e[l],style:o[l]}))}function L(i,s){const e=new S;let o;const r=s.fullChartParams$.pipe(m(e),d(t=>t.highlightTarget),y());return B({computedData:s.computedData$,fullParams:s.fullParams$,fullChartParams:s.fullChartParams$,highlightTarget:r}).pipe(m(e),T(async t=>t)).subscribe(t=>{s.containerSelection.transition("move").duration(t.fullChartParams.transitionDuration).tween("move",(n,l)=>c=>{const a=P({eventData:{type:"series",pluginName:i,eventName:"transitionMove",event:n,tween:c,highlightTarget:t.highlightTarget,data:t.computedData,series:[],seriesIndex:-1,seriesLabel:"",datum:null},renderFn:t.fullParams.renderFn,textAttrs:t.fullParams.textAttrs,textStyles:t.fullParams.textStyles});g(s.containerSelection,a)}).on("end",(n,l)=>{const c=P({eventData:{type:"series",pluginName:i,eventName:"transitionEnd",event:n,tween:1,highlightTarget:t.highlightTarget,data:t.computedData,series:[],seriesIndex:-1,seriesLabel:"",datum:null},renderFn:t.fullParams.renderFn,textAttrs:t.fullParams.textAttrs,textStyles:t.fullParams.textStyles});g(s.containerSelection,c),o&&o.unsubscribe(),o=s.event$.subscribe(a=>{const p=P({eventData:a,renderFn:t.fullParams.renderFn,textAttrs:t.fullParams.textAttrs,textStyles:t.fullParams.textStyles});g(s.containerSelection,p)})})}),()=>{e.next(void 0)}}const w=x(_)(({selection:i,name:s,observer:e,subject:o})=>{const r=new S,{seriesCenterSelection$:t}=v({selection:i,pluginName:h,visibleComputedSortedData$:e.visibleComputedSortedData$,seriesContainerPosition$:e.seriesContainerPosition$}),n=[];return t.pipe(m(r)).subscribe(l=>{n.forEach(c=>c()),l.each((c,a,p)=>{const $=C(p[a]),E=e.computedSortedData$.pipe(m(r),d(u=>u[a]??u[0])),D=e.seriesContainerPosition$.pipe(m(r),d(u=>u[a]??u[0]));n[a]=L(h,{containerSelection:$,computedData$:e.computedData$,containerComputedSortedData$:E,SeriesDataMap$:e.SeriesDataMap$,fullParams$:e.fullParams$,fullChartParams$:e.fullChartParams$,seriesHighlight$:e.seriesHighlight$,seriesContainerPosition$:D,event$:o.event$})})}),()=>{r.next(void 0),n.forEach(l=>l())}}),R={name:"PRESET_BUBBLES_BASIC",description:"Basic bubble chart",descriptionZh:"基本泡泡圖",chartParams:{colors:{light:{label:["#0088FF","#FF3232","#38BEA8","#6F3BD5","#314285","#42C724","#D52580","#F4721B","#D117EA","#7E7D7D"]},dark:{label:["#4BABFF","#FF6C6C","#7DD3C4","#8E6BC9","#5366AC","#86DC72","#FF72BB","#F9B052","#EF76FF","#C4C4C4"]}}},pluginParams:{SeriesLegend:{listRectRadius:7}}};export{w as P,R as a};
