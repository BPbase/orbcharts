import{n as lt,u as ut,q as ot,o as pt,c as _t}from"./CN2XhPue.js";import{D as Et,a as St,S as D}from"./BStzV3rr.js";import{D as ct,a as mt,G as n,b as l}from"./C7jPiQzS.js";import{M as Rt,a as Tt,b as ht,m as gt}from"./BESy59oE.js";import{u as J,S as O,t as I,m as Q,s as k,a as tt,d as dt,c as j,b as at}from"./qbpNAjKn.js";import{L as P}from"./BX-82aFe.js";import{P as Pt,a as It,b as At,c as Dt,d as ft,e as Lt,B as g,f as v,g as F,h as V,i as $t,j as xt,k as Bt,l as Nt,m as y,n as G,o as C,p as Ot,q as yt,r as Gt,s as Ct,t as bt,u as Ut}from"./CKHDM1QU.js";import{i as Ht,B as f}from"./BwOfAQ11.js";import{B as L}from"./BeTHTybq.js";import{c as Mt,M as wt,O as kt,a as vt}from"./DbqYFEz2.js";import{G as u,V as S,S as o,g as b,a as Ft}from"./BHBDoc8D.js";import{c as Vt}from"./DEdn1kP6.js";import{T as r}from"./YPjqIB9Z.js";import{B as W}from"./BUT3QbVY.js";import{m as Xt,S as $,P as U}from"./Bspmid25.js";import{g as Zt,a as et,m as Y,b as jt}from"./B2YBZYj8.js";import{f as st}from"./CRc4z2un.js";import"./1ujJLabB.js";import"./CNN2D5vW.js";import"./DKExitx-.js";import"./C8y5ZR3_.js";import"./CvTiJEiv.js";const q="Dots",N=J(q,ct)(({selection:E,name:_,subject:s,observer:e})=>{const i=new O,p=Mt(q,{selection:E,computedData$:e.computedData$,visibleComputedData$:e.visibleComputedData$,existedSeriesLabels$:e.existedSeriesLabels$,SeriesDataMap$:e.SeriesDataMap$,GroupDataMap$:e.GroupDataMap$,fullParams$:e.fullParams$,fullChartParams$:e.fullChartParams$,gridAxesTransform$:e.gridAxesTransform$,gridGraphicTransform$:e.gridGraphicTransform$,gridGraphicReverseScale$:e.gridGraphicReverseScale$,gridAxesSize$:e.gridAxesSize$,gridHighlight$:e.gridHighlight$,gridContainer$:e.gridContainer$,event$:s.event$});return()=>{i.next(void 0),p()}}),z="ValueStackAxis",x=J(z,mt)(({selection:E,name:_,observer:s,subject:e})=>{const i=new O,p=s.computedData$.pipe(I(i),Q(t=>{const a=new Array(t[0]?t[0].length:0).fill(null).map((A,T)=>t.reduce((h,d)=>{if(d&&d[T]){const nt=d[T].value==null||d[T].visible==!1?0:d[T].value;return h+nt}return h},0));return t.map((A,T)=>A.map((h,d)=>({...h,value:a[d]})))})),m=Vt(z,{selection:E,computedData$:s.isSeriesPositionSeprate$.pipe(k(t=>Ht(()=>t,s.computedData$,p))),fullParams$:s.fullParams$,fullDataFormatter$:s.fullDataFormatter$,fullChartParams$:s.fullChartParams$,gridAxesTransform$:s.gridAxesTransform$,gridAxesReverseTransform$:s.gridAxesReverseTransform$,gridAxesSize$:s.gridAxesSize$,gridContainer$:s.gridContainer$,isSeriesPositionSeprate$:s.isSeriesPositionSeprate$});return()=>{i.next(void 0),m()}}),rt="PieEventTexts",K=et(rt,"text");function X(E,_){const s=E.selectAll(`text.${K}`).data(_),e=s.enter().append("text").classed(K,!0),i=s.merge(e);return i.each((p,m,t)=>{const a=at(t[m]).text(p.text);Object.keys(p.attr).forEach(R=>{a.attr(R,p.attr[R])}),Object.keys(p.style).forEach(R=>{a.style(R,p.style[R])})}),s.exit().remove(),i}function Z({eventData:E,eventName:_,t:s,eventFn:e,textAttrs:i,textStyles:p}){return e(E,_,s).map((t,a)=>({text:t,attr:i[a],style:p[a]}))}const Wt=tt(rt,Et)(({selection:E,name:_,observer:s,subject:e})=>{const i=new O,p=E.append("g");let m;s.layout$.pipe(st()).subscribe(a=>{E.attr("transform",`translate(${a.width/2}, ${a.height/2})`),s.layout$.pipe(I(i)).subscribe(R=>{E.transition().attr("transform",`translate(${R.width/2}, ${R.height/2})`)})});const t=s.fullChartParams$.pipe(I(i),Q(a=>a.highlightTarget),dt());return j({computedData:s.computedData$,fullParams:s.fullParams$,fullChartParams:s.fullChartParams$,highlightTarget:t}).pipe(I(i),k(async a=>a)).subscribe(a=>{p.transition().duration(a.fullChartParams.transitionDuration).ease(Zt(a.fullChartParams.transitionEase)).tween("move",(R,A)=>T=>{const h=Z({eventData:{type:"series",pluginName:_,eventName:"transitionMove",event:R,highlightTarget:a.highlightTarget,data:a.computedData,series:[],seriesIndex:-1,seriesLabel:"",datum:null},eventName:"transitionMove",t:T,eventFn:a.fullParams.eventFn,textAttrs:a.fullParams.textAttrs,textStyles:a.fullParams.textStyles});X(p,h)}).on("end",(R,A)=>{const T=Z({eventData:{type:"series",pluginName:_,eventName:"transitionEnd",event:R,highlightTarget:a.highlightTarget,data:a.computedData,series:[],seriesIndex:-1,seriesLabel:"",datum:null},eventName:"transitionMove",t:1,eventFn:a.fullParams.eventFn,textAttrs:a.fullParams.textAttrs,textStyles:a.fullParams.textStyles});X(p,T),m&&m.unsubscribe(),m=e.event$.subscribe(h=>{const d=Z({eventData:h,eventName:h.eventName,t:1,eventFn:a.fullParams.eventFn,textAttrs:a.fullParams.textAttrs,textStyles:a.fullParams.textStyles});X(p,d)})})}),()=>{i.next(void 0)}}),it="PieLabels",Yt=et(it,"text");function qt(E,_,s,e){return E.map((i,p)=>{const[m,t]=_.centroid(i),[a,R]=s.centroid(i);return{pieDatum:i,arcIndex:p,arcLabel:i.data.label,x:m*e,y:t*e,mouseoverX:a*e,mouseoverY:R*e}}).filter(i=>i.pieDatum.data.visible)}function zt(E,_,s,e){let i=E.selectAll("text").data(_,a=>a.pieDatum.id),p=i.enter().append("text").classed(Yt,!0),m=i.exit();p.append("text");const t=i.merge(p);return t.attr("font-weight","bold").attr("text-anchor","middle").style("dominant-baseline","middle").style("cursor",a=>e.highlightTarget&&e.highlightTarget!="none"?"pointer":"none").text(a=>s.labelFn(a.pieDatum.data)).attr("font-size",e.styles.textSize).attr("fill",(a,R)=>jt({datum:a.pieDatum.data,colorType:s.labelColorType,fullChartParams:e})).transition().attr("transform",a=>"translate("+a.x+","+a.y+")"),m.remove(),t}function Kt({labelSelection:E,ids:_,fullChartParams:s}){if(E.interrupt("highlight"),!_.length){E.transition().duration(200).attr("transform",e=>"translate("+e.x+","+e.y+")").style("opacity",1);return}E.each((e,i,p)=>{const m=at(p[i]);_.includes(e.pieDatum.id)?m.style("opacity",1).transition().duration(200).attr("transform",t=>"translate("+t.mouseoverX+","+t.mouseoverY+")"):m.style("opacity",s.styles.unhighlightedOpacity).transition().duration(200).attr("transform",t=>"translate("+t.x+","+t.y+")")})}const H=tt(it,St)(({selection:E,observer:_,subject:s})=>{const e=new O,i=E.append("g");let p=new O,m=[];return _.layout$.pipe(st()).subscribe(t=>{E.attr("transform",`translate(${t.width/2}, ${t.height/2})`),_.layout$.pipe(I(e)).subscribe(a=>{E.transition().attr("transform",`translate(${a.width/2}, ${a.height/2})`)})}),j({layout:_.layout$,computedData:_.computedData$,fullParams:_.fullParams$,fullChartParams:_.fullChartParams$}).pipe(I(e),k(async t=>t)).subscribe(t=>{const a=t.layout.width<t.layout.height?t.layout.width:t.layout.height,R=Y({axisWidth:a,innerRadius:0,outerRadius:t.fullParams.outerRadius,padAngle:0,cornerRadius:0}),A=Y({axisWidth:a,innerRadius:0,outerRadius:t.fullParams.outerMouseoverRadius,padAngle:0,cornerRadius:0}),T=Xt({computedDataSeries:t.computedData,startAngle:t.fullParams.startAngle,endAngle:t.fullParams.endAngle});m=qt(T,R,A,t.fullParams.labelCentroid);const h=zt(i,m,t.fullParams,t.fullChartParams);p.next(h)}),j({labelSelection:p,highlight:_.seriesHighlight$,fullChartParams:_.fullChartParams$}).pipe(I(e),k(async t=>t)).subscribe(t=>{Kt({labelSelection:t.labelSelection,ids:t.highlight,fullChartParams:t.fullChartParams})}),()=>{e.next(void 0)}}),B=[15,38,25,17,26,72,64,29],c=[[55,80,50,11,150],[35,40,15,65,120]],M=[[55,80,50,11,150],[35,40,15,65,120],[75,90,600,50,120]],w={series:{Bubbles:{PRESET_BUBBLES_BASIC:{chart:D,plugins:[W,$,r],preset:Pt,data:B},PRESET_BUBBLES_SCALING_BY_RADIUS:{chart:D,plugins:[W,$,r],preset:It,data:B}},Pie:{PRESET_PIE_BASIC:{chart:D,plugins:[U,H,$,r],preset:At,data:B},PRESET_PIE_WITH_INNER_LABELS:{chart:D,plugins:[U,H,$,r],preset:Dt,data:B},PRESET_PIE_DONUT:{chart:D,plugins:[U,H,Wt,$,r],preset:ft,data:B},PRESET_PIE_HALF_DONUT:{chart:D,plugins:[U,H,$,r],preset:Lt,data:B}}},grid:{Bars:{PRESET_GRID_BASIC:{chart:n,plugins:[u,S,g,o,l,r],preset:v,data:c},PRESET_GRID_ROTATE_AXIS_LABEL:{chart:n,plugins:[u,S,g,o,l,r],preset:F,data:c},PRESET_GRID_HORIZONTAL:{chart:n,plugins:[u,S,g,o,l,r],preset:V,data:c},PRESET_BARS_ROUND:{chart:n,plugins:[u,S,g,o,l,r],preset:$t,data:c},PRESET_BARS_HORIZONTAL_AND_ROUND:{chart:n,plugins:[u,S,g,o,l,r],preset:xt,data:c},PRESET_BARS_THIN:{chart:n,plugins:[u,S,g,o,l,r],preset:Bt,data:c},PRESET_BARS_HORIZONTAL_AND_THIN:{chart:n,plugins:[u,S,g,o,l,r],preset:Nt,data:c},PRESET_GRID_2_SERIES_SLOT:{chart:n,plugins:[u,S,g,o,l,r],preset:y,data:c},PRESET_GRID_3_SERIES_SLOT:{chart:n,plugins:[u,S,g,o,l,r],preset:G,data:M},PRESET_GRID_4_SERIES_SLOT:{chart:n,plugins:[u,S,g,o,l,r],preset:C,data:b}},BarStack:{PRESET_GRID_BASIC:{chart:n,plugins:[u,x,f,o,l,r],preset:v,data:c},PRESET_GRID_ROTATE_AXIS_LABEL:{chart:n,plugins:[u,x,f,o,l,r],preset:F,data:c},PRESET_GRID_HORIZONTAL:{chart:n,plugins:[u,x,f,o,l,r],preset:V,data:c},PRESET_GRID_2_SERIES_SLOT:{chart:n,plugins:[u,x,f,o,l,r],preset:y,data:c},PRESET_GRID_3_SERIES_SLOT:{chart:n,plugins:[u,x,f,o,l,r],preset:G,data:M},PRESET_GRID_4_SERIES_SLOT:{chart:n,plugins:[u,x,f,o,l,r],preset:C,data:b}},BarsTriangle:{PRESET_GRID_BASIC:{chart:n,plugins:[u,S,L,o,l,r],preset:v,data:c},PRESET_GRID_ROTATE_AXIS_LABEL:{chart:n,plugins:[u,S,L,o,l,r],preset:F,data:c},PRESET_GRID_HORIZONTAL:{chart:n,plugins:[u,S,L,o,l,r],preset:V,data:c},PRESET_GRID_2_SERIES_SLOT:{chart:n,plugins:[u,S,L,o,l,r],preset:y,data:c},PRESET_GRID_3_SERIES_SLOT:{chart:n,plugins:[u,S,L,o,l,r],preset:G,data:M},PRESET_GRID_4_SERIES_SLOT:{chart:n,plugins:[u,S,L,o,l,r],preset:C,data:b}},Lines:{PRESET_LINES_BASIC:{chart:n,plugins:[u,S,P,N,o,l,r],preset:Ot,data:c},PRESET_LINES_ROTATE_AXIS_LABEL:{chart:n,plugins:[u,S,P,N,o,l,r],preset:yt,data:c},PRESET_LINES_HORIZONTAL:{chart:n,plugins:[u,S,P,N,o,l,r],preset:Gt,data:c},PRESET_LINES_CURVE:{chart:n,plugins:[u,S,P,N,o,l,r],preset:Ct,data:c},PRESET_LINES_HIGHLIGHT_GROUP_DOTS:{chart:n,plugins:[u,S,P,N,Ft,o,l,r],preset:bt,data:c},PRESET_GRID_2_SERIES_SLOT:{chart:n,plugins:[u,S,P,o,l,r],preset:y,data:c},PRESET_GRID_3_SERIES_SLOT:{chart:n,plugins:[u,S,P,o,l,r],preset:G,data:M},PRESET_GRID_4_SERIES_SLOT:{chart:n,plugins:[u,S,P,o,l,r],preset:C,data:b}}},multiGrid:{MultiBars:{PRESET_MULTI_GRID_BASIC:{chart:Rt,plugins:[wt,kt,Tt,vt,ht,r],preset:Ut,data:gt}}}},Jt={id:"chart",style:{width:"100%",height:"100vh"}},Pa=lt({__name:"[presetName]",setup(E){const s=ut().params,e=w[s.chartType]&&w[s.chartType][s.pluginName]&&w[s.chartType][s.pluginName][s.presetName]?w[s.chartType][s.pluginName][s.presetName]:null;return ot(()=>{if(!e)return;const i=document.querySelector("#chart"),p=e.plugins.map(t=>new t),m=new e.chart(i,{preset:e.preset});m.plugins$.next(p),m.data$.next(e.data)}),(i,p)=>(pt(),_t("div",Jt))}});export{Pa as default};
