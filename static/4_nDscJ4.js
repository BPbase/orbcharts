import{ab as $t,ac as tt,ad as lt,ae as ct,af as Ft,ag as G,M as kt,ah as Nt,B as Ct,E as Gt,ai as Tt,aj as Pt,P as rt,ak as at,Q as L,V as it,R as X,T as R,al as yt,am as ut,W as ft,S as Lt,O as mt,e as z,t as dt,s as I,an as Rt,m as Y,c as Q}from"./BpcKryD-.js";import{s as U,g as K}from"./fnY6dSo8.js";import{o as jt}from"./ydwatUDO.js";function B(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Ot(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Dt(t){let e,r,n;t.length!==2?(e=B,r=(s,u)=>B(t(s),u),n=(s,u)=>t(s)-u):(e=t===B||t===Ot?t:Vt,r=t,n=t);function o(s,u,l=0,m=s.length){if(l<m){if(e(u,u)!==0)return m;do{const c=l+m>>>1;r(s[c],u)<0?l=c+1:m=c}while(l<m)}return l}function a(s,u,l=0,m=s.length){if(l<m){if(e(u,u)!==0)return m;do{const c=l+m>>>1;r(s[c],u)<=0?l=c+1:m=c}while(l<m)}return l}function i(s,u,l=0,m=s.length){const c=o(s,u,l,m-1);return c>l&&n(s[c-1],u)>-n(s[c],u)?c-1:c}return{left:o,center:i,right:a}}function Vt(){return 0}function Yt(t){return t===null?NaN:+t}const zt=Dt(B),It=zt.right;Dt(Yt).center;const Xt=Math.sqrt(50),Et=Math.sqrt(10),Wt=Math.sqrt(2);function _(t,e,r){const n=(e-t)/Math.max(0,r),o=Math.floor(Math.log10(n)),a=n/Math.pow(10,o),i=a>=Xt?10:a>=Et?5:a>=Wt?2:1;let s,u,l;return o<0?(l=Math.pow(10,-o)/i,s=Math.round(t*l),u=Math.round(e*l),s/l<t&&++s,u/l>e&&--u,l=-l):(l=Math.pow(10,o)*i,s=Math.round(t/l),u=Math.round(e/l),s*l<t&&++s,u*l>e&&--u),u<s&&.5<=r&&r<2?_(t,e,r*2):[s,u,l]}function Ut(t,e,r){if(e=+e,t=+t,r=+r,!(r>0))return[];if(t===e)return[t];const n=e<t,[o,a,i]=n?_(e,t,r):_(t,e,r);if(!(a>=o))return[];const s=a-o+1,u=new Array(s);if(n)if(i<0)for(let l=0;l<s;++l)u[l]=(a-l)/-i;else for(let l=0;l<s;++l)u[l]=(a-l)*i;else if(i<0)for(let l=0;l<s;++l)u[l]=(o+l)/-i;else for(let l=0;l<s;++l)u[l]=(o+l)*i;return u}function et(t,e,r){return e=+e,t=+t,r=+r,_(t,e,r)[2]}function qt(t,e,r){e=+e,t=+t,r=+r;const n=e<t,o=n?et(e,t,r):et(t,e,r);return(n?-1:1)*(o<0?1/-o:o)}function Bt(t,e){e||(e=[]);var r=t?Math.min(e.length,t.length):0,n=e.slice(),o;return function(a){for(o=0;o<r;++o)n[o]=t[o]*(1-a)+e[o]*a;return n}}function _t(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Ht(t,e){var r=e?e.length:0,n=t?Math.min(r,t.length):0,o=new Array(n),a=new Array(r),i;for(i=0;i<n;++i)o[i]=ot(t[i],e[i]);for(;i<r;++i)a[i]=e[i];return function(s){for(i=0;i<n;++i)a[i]=o[i](s);return a}}function Jt(t,e){var r=new Date;return t=+t,e=+e,function(n){return r.setTime(t*(1-n)+e*n),r}}function Zt(t,e){var r={},n={},o;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(o in e)o in t?r[o]=ot(t[o],e[o]):n[o]=e[o];return function(a){for(o in r)n[o]=r[o](a);return n}}function ot(t,e){var r=typeof e,n;return e==null||r==="boolean"?$t(e):(r==="number"?tt:r==="string"?(n=lt(e))?(e=n,ct):Ft:e instanceof lt?ct:e instanceof Date?Jt:_t(e)?Bt:Array.isArray(e)?Ht:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Zt:tt)(t,e)}function Qt(t,e){return t=+t,e=+e,function(r){return Math.round(t*(1-r)+e*r)}}function Kt(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function H(t,e){if((r=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var r,n=t.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+t.slice(r+1)]}function P(t){return t=H(Math.abs(t)),t?t[1]:NaN}function te(t,e){return function(r,n){for(var o=r.length,a=[],i=0,s=t[0],u=0;o>0&&s>0&&(u+s+1>n&&(s=Math.max(1,n-u)),a.push(r.substring(o-=s,o+s)),!((u+=s+1)>n));)s=t[i=(i+1)%t.length];return a.reverse().join(e)}}function ee(t){return function(e){return e.replace(/[0-9]/g,function(r){return t[+r]})}}var ne=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function J(t){if(!(e=ne.exec(t)))throw new Error("invalid format: "+t);var e;return new st({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}J.prototype=st.prototype;function st(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}st.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function re(t){t:for(var e=t.length,r=1,n=-1,o;r<e;++r)switch(t[r]){case".":n=o=r;break;case"0":n===0&&(n=r),o=r;break;default:if(!+t[r])break t;n>0&&(n=0);break}return n>0?t.slice(0,n)+t.slice(o+1):t}var vt;function ae(t,e){var r=H(t,e);if(!r)return t+"";var n=r[0],o=r[1],a=o-(vt=Math.max(-8,Math.min(8,Math.floor(o/3)))*3)+1,i=n.length;return a===i?n:a>i?n+new Array(a-i+1).join("0"):a>0?n.slice(0,a)+"."+n.slice(a):"0."+new Array(1-a).join("0")+H(t,Math.max(0,e+a-1))[0]}function gt(t,e){var r=H(t,e);if(!r)return t+"";var n=r[0],o=r[1];return o<0?"0."+new Array(-o).join("0")+n:n.length>o+1?n.slice(0,o+1)+"."+n.slice(o+1):n+new Array(o-n.length+2).join("0")}const ht={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Kt,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>gt(t*100,e),r:gt,s:ae,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function pt(t){return t}var bt=Array.prototype.map,Mt=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function ie(t){var e=t.grouping===void 0||t.thousands===void 0?pt:te(bt.call(t.grouping,Number),t.thousands+""),r=t.currency===void 0?"":t.currency[0]+"",n=t.currency===void 0?"":t.currency[1]+"",o=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?pt:ee(bt.call(t.numerals,String)),i=t.percent===void 0?"%":t.percent+"",s=t.minus===void 0?"−":t.minus+"",u=t.nan===void 0?"NaN":t.nan+"";function l(c){c=J(c);var f=c.fill,h=c.align,d=c.sign,p=c.symbol,b=c.zero,y=c.width,D=c.comma,M=c.precision,v=c.trim,x=c.type;x==="n"?(D=!0,x="g"):ht[x]||(M===void 0&&(M=12),v=!0,x="g"),(b||f==="0"&&h==="=")&&(b=!0,f="0",h="=");var A=p==="$"?r:p==="#"&&/[boxX]/.test(x)?"0"+x.toLowerCase():"",N=p==="$"?n:/[%p]/.test(x)?i:"",j=ht[x],E=/[defgprs%]/.test(x);M=M===void 0?6:/[gprs]/.test(x)?Math.max(1,Math.min(21,M)):Math.max(0,Math.min(20,M));function O(g){var w=A,S=N,F,W,V;if(x==="c")S=j(g)+S,g="";else{g=+g;var C=g<0||1/g<0;if(g=isNaN(g)?u:j(Math.abs(g),M),v&&(g=re(g)),C&&+g==0&&d!=="+"&&(C=!1),w=(C?d==="("?d:s:d==="-"||d==="("?"":d)+w,S=(x==="s"?Mt[8+vt/3]:"")+S+(C&&d==="("?")":""),E){for(F=-1,W=g.length;++F<W;)if(V=g.charCodeAt(F),48>V||V>57){S=(V===46?o+g.slice(F+1):g.slice(F))+S,g=g.slice(0,F);break}}}D&&!b&&(g=e(g,1/0));var k=w.length+g.length+S.length,$=k<y?new Array(y-k+1).join(f):"";switch(D&&b&&(g=e($+g,$.length?y-S.length:1/0),$=""),h){case"<":g=w+g+S+$;break;case"=":g=w+$+g+S;break;case"^":g=$.slice(0,k=$.length>>1)+w+g+S+$.slice(k);break;default:g=$+w+g+S;break}return a(g)}return O.toString=function(){return c+""},O}function m(c,f){var h=l((c=J(c),c.type="f",c)),d=Math.max(-8,Math.min(8,Math.floor(P(f)/3)))*3,p=Math.pow(10,-d),b=Mt[8+d/3];return function(y){return h(p*y)+b}}return{format:l,formatPrefix:m}}var q,St,wt;oe({thousands:",",grouping:[3],currency:["$",""]});function oe(t){return q=ie(t),St=q.format,wt=q.formatPrefix,q}function se(t){return Math.max(0,-P(Math.abs(t)))}function le(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(P(e)/3)))*3-P(Math.abs(t)))}function ce(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,P(e)-P(t))+1}function ue(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function fe(t){return function(){return t}}function me(t){return+t}var xt=[0,1];function T(t){return t}function nt(t,e){return(e-=t=+t)?function(r){return(r-t)/e}:fe(isNaN(e)?NaN:.5)}function de(t,e){var r;return t>e&&(r=t,t=e,e=r),function(n){return Math.max(t,Math.min(e,n))}}function ge(t,e,r){var n=t[0],o=t[1],a=e[0],i=e[1];return o<n?(n=nt(o,n),a=r(i,a)):(n=nt(n,o),a=r(a,i)),function(s){return a(n(s))}}function he(t,e,r){var n=Math.min(t.length,e.length)-1,o=new Array(n),a=new Array(n),i=-1;for(t[n]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++i<n;)o[i]=nt(t[i],t[i+1]),a[i]=r(e[i],e[i+1]);return function(s){var u=It(t,s,1,n)-1;return a[u](o[u](s))}}function pe(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function be(){var t=xt,e=xt,r=ot,n,o,a,i=T,s,u,l;function m(){var f=Math.min(t.length,e.length);return i!==T&&(i=de(t[0],t[f-1])),s=f>2?he:ge,u=l=null,c}function c(f){return f==null||isNaN(f=+f)?a:(u||(u=s(t.map(n),e,r)))(n(i(f)))}return c.invert=function(f){return i(o((l||(l=s(e,t.map(n),tt)))(f)))},c.domain=function(f){return arguments.length?(t=Array.from(f,me),m()):t.slice()},c.range=function(f){return arguments.length?(e=Array.from(f),m()):e.slice()},c.rangeRound=function(f){return e=Array.from(f),r=Qt,m()},c.clamp=function(f){return arguments.length?(i=f?!0:T,m()):i!==T},c.interpolate=function(f){return arguments.length?(r=f,m()):r},c.unknown=function(f){return arguments.length?(a=f,c):a},function(f,h){return n=f,o=h,m()}}function Me(){return be()(T,T)}function xe(t,e,r,n){var o=qt(t,e,r),a;switch(n=J(n??",f"),n.type){case"s":{var i=Math.max(Math.abs(t),Math.abs(e));return n.precision==null&&!isNaN(a=le(o,i))&&(n.precision=a),wt(n,i)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(a=ce(o,Math.max(Math.abs(t),Math.abs(e))))&&(n.precision=a-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(a=se(o))&&(n.precision=a-(n.type==="%")*2);break}}return St(n)}function ye(t){var e=t.domain;return t.ticks=function(r){var n=e();return Ut(n[0],n[n.length-1],r??10)},t.tickFormat=function(r,n){var o=e();return xe(o[0],o[o.length-1],r??10,n)},t.nice=function(r){r==null&&(r=10);var n=e(),o=0,a=n.length-1,i=n[o],s=n[a],u,l,m=10;for(s<i&&(l=i,i=s,s=l,l=o,o=a,a=l);m-- >0;){if(l=et(i,s,r),l===u)return n[o]=i,n[a]=s,e(n);if(l>0)i=Math.floor(i/l)*l,s=Math.ceil(s/l)*l;else if(l<0)i=Math.ceil(i*l)/l,s=Math.floor(s*l)/l;else break;u=l}return t},t}function At(){var t=Me();return t.copy=function(){return pe(t,At())},ue.apply(t,arguments),ye(t)}const Z=({maxValue:t=1,minValue:e=0,axisWidth:r,scaleDomain:n=G.scaleDomain,scaleRange:o=G.scaleRange})=>{const a=n[0]??G.scaleDomain[0],i=n[1]??G.scaleDomain[1],s=o[0]??G.scaleRange[0],u=o[1]??G.scaleRange[1],l=a==="auto"?e:a,m=i==="auto"?t:i,c=t-(t-l)/(1-s),f=m/u;return At().domain([c,f]).range([0,r])};function De(t){const{data:e=[],dataFormatter:r,chartParams:n,layout:o}=t;if(!e.length)return[];try{const a=e.reduce((l,m)=>m.length>l?m.length:l,0),s=e.map((l,m)=>{if(l.length===a)return l;const c=Object.assign([],l);for(let f=c.length;f<a;f++)c[f]=null;return c}).map((l,m)=>l.map((c,f)=>{const h=r.grid.visibleFilter(c,m,f,t);return c==null?{id:"",label:"",data:{},value:null,_visible:h}:typeof c=="number"?{id:"",label:"",data:{},value:c,_visible:h}:{id:c.id??"",label:c.label??"",data:c.data??{},value:c.value,_visible:h}}));return Tt(r.grid.gridData.seriesDirection,s)}catch{return[]}}function ve(t,e,r){const n=e.grid.groupAxis.position==="top"||e.grid.groupAxis.position==="bottom"?r.width:r.height,o=t[0]?t[0].length-1:0;return Z({maxValue:o,minValue:0,axisWidth:n,scaleDomain:[0,o],scaleRange:[0,1]})}function Se(t,e,r){const n=e.grid.valueAxis.position==="left"||e.grid.valueAxis.position==="right"?r.height:r.width,o=t.flat().filter(s=>s._visible!=!1),[a,i]=Pt(o);return t.map((s,u)=>Z({maxValue:i,minValue:a,axisWidth:n,scaleDomain:[a,i],scaleRange:[0,1]}))}const Fe=t=>{const{data:e=[],dataFormatter:r,chartParams:n,layout:o}=t;if(!e.length)return[];let a;try{const i=De(t),s=ve(i,r,o),u=kt({transposedDataGrid:i,dataFormatter:r,chartType:"grid"}),l=Nt({transposedDataGrid:i,dataFormatter:r,chartType:"grid"}),m=Se(i,r,o),c=i.map((h,d)=>m[d](0));let f=0;a=i.map((h,d)=>h.map((p,b)=>{const y=Ct("grid",0,d,b),D=l[b],M=m[d],v=M(p.value??0),x=c[d],A={id:p.id?p.id:y,index:f,label:p.label?p.label:y,description:p.description??"",data:p.data,value:p.value,gridIndex:0,seriesIndex:d,seriesLabel:u[d],groupIndex:b,groupLabel:D,color:Gt(d,n),axisX:s(b),axisY:v,axisYFromZero:v-x,visible:p._visible};return f++,A}))}catch(i){throw Error(i)}return a},ke=({fullDataFormatter$:t,layout$:e})=>{const r=new rt;function n({xAxis:o,yAxis:a,width:i,height:s}){if(!o||!a)return{translate:[0,0],scale:[1,1],rotate:0,rotateX:0,rotateY:0,value:""};let u=0,l=0,m=0,c=0,f=0;return o.position==="bottom"?a.position==="left"?(c=180,l=s):a.position==="right"?(c=180,f=180,u=i,l=s):(c=180,l=s):o.position==="top"?a.position==="left"||(a.position==="right"?(f=180,u=i):(c=180,l=s)):o.position==="left"?a.position==="bottom"?(m=-90,l=s):a.position==="top"?(m=-90,f=180):(c=180,l=s):o.position==="right"&&(a.position==="bottom"?(m=-90,c=180,l=s,u=i):a.position==="top"?(m=-90,c=180,f=180,u=i):(c=180,l=s)),{translate:[u,l],scale:[1,1],rotate:m,rotateX:c,rotateY:f,value:`translate(${u}px, ${l}px) rotate(${m}deg) rotateX(${c}deg) rotateY(${f}deg)`}}return new at(o=>(L({fullDataFormatter:t,layout:e}).pipe(it(r),X(async a=>a)).subscribe(a=>{const i=n({xAxis:a.fullDataFormatter.grid.groupAxis,yAxis:a.fullDataFormatter.grid.valueAxis,width:a.layout.width,height:a.layout.height});o.next(i)}),function(){r.next(void 0)}))},Ne=({gridAxesTransform$:t})=>t.pipe(R(e=>{const r=[0,0],n=[1/e.scale[0],1/e.scale[1]],o=e.rotate*-1,a=e.rotateX*-1,i=e.rotateY*-1;return{translate:r,scale:n,rotate:o,rotateX:a,rotateY:i,value:`translate(${r[0]}px, ${r[1]}px) rotate(${o}deg) rotateX(${a}deg) rotateY(${i}deg)`}})),Ce=({computedData$:t,fullDataFormatter$:e,layout$:r})=>{const n=new rt;function o({data:a,groupAxis:i,valueAxis:s,width:u,height:l}){let m=0,c=0,f=0,h=0;const d=i.position==="top"||i.position==="bottom"?u:l,p=0,b=a[0]?a[0].length-1:0,y=i.scaleDomain[0]==="auto"?p-i.scalePadding:i.scaleDomain[0]-i.scalePadding,D=i.scaleDomain[1]==="auto"?b+i.scalePadding:i.scaleDomain[1]+i.scalePadding,M=Z({maxValue:b,minValue:p,axisWidth:d,scaleDomain:[y,D],scaleRange:[0,1]}),v=M(p),x=M(b);m=v,f=(x-v)/d;const N=a.map((W,V)=>W.filter((C,k)=>k>=y&&k<=D&&C.visible==!0)),j=ut(N),E=s.position==="left"||s.position==="right"?l:u,O=Z({maxValue:j[1],minValue:j[0],axisWidth:E,scaleDomain:s.scaleDomain,scaleRange:s.scaleRange}),g=ut(a),w=O(g[0]),S=O(g[1]);return c=w,h=(S-w)/E,{translate:[m,c],scale:[f,h],rotate:0,rotateX:0,rotateY:0,value:`translate(${m}px, ${c}px) scale(${f}, ${h})`}}return new at(a=>(L({computedData:t,fullDataFormatter:e,layout:r}).pipe(it(n),X(async i=>i)).subscribe(i=>{const s=o({data:i.computedData,groupAxis:i.fullDataFormatter.grid.groupAxis,valueAxis:i.fullDataFormatter.grid.valueAxis,width:i.layout.width,height:i.layout.height});a.next(s)}),function(){n.next(void 0)}))},Ge=({gridContainer$:t,gridAxesTransform$:e,gridGraphicTransform$:r})=>L({gridContainer:t,gridAxesTransform:e,gridGraphicTransform:r}).pipe(X(async n=>n),R(n=>n.gridAxesTransform.rotate==0||n.gridAxesTransform.rotate==180?n.gridContainer.map((o,a)=>[1/n.gridGraphicTransform.scale[0]/n.gridContainer[a].scale[0],1/n.gridGraphicTransform.scale[1]/n.gridContainer[a].scale[1]]):n.gridContainer.map((o,a)=>[1/n.gridGraphicTransform.scale[0]/n.gridContainer[a].scale[1],1/n.gridGraphicTransform.scale[1]/n.gridContainer[a].scale[0]]))),Te=({fullDataFormatter$:t,layout$:e})=>{const r=new rt;function n({xAxisPosition:o,yAxisPosition:a,width:i,height:s}){if((o==="bottom"||o==="top")&&(a==="left"||a==="right"))return{width:i,height:s};if((o==="left"||o==="right")&&(a==="bottom"||a==="top"))return{width:s,height:i}}return new at(o=>{L({fullDataFormatter:t,layout:e}).pipe(it(r),X(async a=>a)).subscribe(a=>{const i=n({xAxisPosition:a.fullDataFormatter.grid.groupAxis.position,yAxisPosition:a.fullDataFormatter.grid.valueAxis.position,width:a.layout.width,height:a.layout.height});return o.next(i),function(){r.next(void 0)}})})},Pe=({computedData$:t})=>t.pipe(R(e=>e.filter(r=>r.length).map(r=>r[0].seriesLabel)),yt((e,r)=>JSON.stringify(e).length===JSON.stringify(r).length)),Le=({computedData$:t})=>t.pipe(R(e=>e.map(n=>n.filter(o=>o.visible==!0)).filter(n=>n.length))),Re=({computedData$:t,fullDataFormatter$:e})=>L({computedData:t,fullDataFormatter:e}).pipe(R(r=>!!(r.fullDataFormatter.grid.seriesSlotIndexes&&r.fullDataFormatter.grid.seriesSlotIndexes.length===r.computedData.length)),yt()),je=({computedData$:t,fullDataFormatter$:e,fullChartParams$:r,layout$:n})=>L({computedData:t,fullDataFormatter:e,fullChartParams:r,layout:n}).pipe(X(async a=>a),R(a=>{const i=a.fullDataFormatter.grid;if(!!(i.seriesSlotIndexes&&i.seriesSlotIndexes.length===a.computedData.length))return a.computedData.map((u,l)=>{const m=i.seriesSlotIndexes[l]%a.fullDataFormatter.container.columnAmount,c=Math.floor(i.seriesSlotIndexes[l]/a.fullDataFormatter.container.columnAmount),{translate:f,scale:h}=ft(a.layout,a.fullDataFormatter.container,c,m);return{slotIndex:i.seriesSlotIndexes[l],rowIndex:c,columnIndex:m,translate:f,scale:h}});{const u=i.slotIndex%a.fullDataFormatter.container.columnAmount,l=Math.floor(i.slotIndex/a.fullDataFormatter.container.columnAmount);return a.computedData.map((m,c)=>{const{translate:f,scale:h}=ft(a.layout,a.fullDataFormatter.container,l,u);return{slotIndex:i.slotIndex,rowIndex:l,columnIndex:u,translate:f,scale:h}})}})),Oe=({selection:t,pluginName:e,clipPathID:r,existSeriesLabels$:n,gridContainer$:o,gridAxesTransform$:a,gridGraphicTransform$:i})=>{const s=K(e,"series"),u=K(e,"axes"),l=K(e,"graphic"),m=n.pipe(Y((d,p)=>t.selectAll(`g.${s}`).data(d,b=>b).join(b=>b.append("g").classed(s,!0).each((y,D,M)=>{Q(M[D]).selectAll(`g.${u}`).data([D]).join(v=>v.append("g").classed(u,!0).attr("clip-path",`url(#${r})`).each((x,A,N)=>{Q(N[A]).selectAll("defs").data([A]).join("defs"),Q(N[A]).selectAll("g").data([A]).join("g").classed(l,!0)}),v=>v,v=>v.remove())}),b=>b,b=>b.remove())),I(d=>z({seriesSelection:jt(d),gridContainer:o})),Y(d=>(d.seriesSelection.transition().attr("transform",(p,b)=>{const y=d.gridContainer[b]??d.gridContainer[0],D=y.translate,M=y.scale;return`translate(${D[0]}, ${D[1]}) scale(${M[0]}, ${M[1]})`}),d.seriesSelection)),U(1)),c=z({seriesSelection:m,gridAxesTransform:a}).pipe(I(async d=>d),Y(d=>d.seriesSelection.select(`g.${u}`).style("transform",d.gridAxesTransform.value)),U(1)),f=c.pipe(Y(d=>d.select("defs")),U(1)),h=z({axesSelection:c,gridGraphicTransform:i}).pipe(I(async d=>d),Y(d=>{const p=d.axesSelection.select(`g.${l}`);return p.transition().duration(50).style("transform",d.gridGraphicTransform.value),p}),U(1));return{seriesSelection$:m,axesSelection$:c,defsSelection$:f,graphicGSelection$:h}},Ve=({fullDataFormatter$:t,gridAxesSize$:e,computedData$:r,fullChartParams$:n})=>{const o=new Lt,a=new mt(i=>{z({dataFormatter:t,computedData:r}).pipe(dt(o),I(async s=>s)).subscribe(s=>{const l=s.computedData[0]?s.computedData[0].length-1:0,m=s.dataFormatter.grid.groupAxis.scaleDomain[0]==="auto"?0-s.dataFormatter.grid.groupAxis.scalePadding:s.dataFormatter.grid.groupAxis.scaleDomain[0]-s.dataFormatter.grid.groupAxis.scalePadding,c=s.dataFormatter.grid.groupAxis.scaleDomain[1]==="auto"?l+s.dataFormatter.grid.groupAxis.scalePadding:s.dataFormatter.grid.groupAxis.scaleDomain[1]+s.dataFormatter.grid.groupAxis.scalePadding,h=(s.dataFormatter.grid.gridData.seriesDirection==="row"?(s.computedData[0]??[]).map(d=>d.groupLabel):s.computedData.map(d=>d[0].groupLabel)).filter((d,p)=>p>=m&&p<=c);i.next(h)})});return new mt(i=>{z({dataFormatter:t,axisSize:e,fullChartParams:n,scaleRangeGroupLabels:a}).pipe(dt(o),I(async s=>s)).subscribe(s=>{const u=s.dataFormatter.grid.valueAxis.position==="right"||s.dataFormatter.grid.valueAxis.position==="bottom",l=Rt({axisLabels:s.scaleRangeGroupLabels,axisWidth:s.axisSize.width,reverse:u}),m=f=>s.dataFormatter.grid.groupAxis.position==="bottom"||s.dataFormatter.grid.groupAxis.position==="top"?f.offsetX-s.fullChartParams.padding.left:f.offsetY-s.fullChartParams.padding.top,c=f=>{const h=m(f),d=l(h);return{groupIndex:d,groupLabel:s.scaleRangeGroupLabels[d]??""}};return i.next(c),function(){o.next(void 0)}})})};export{Oe as a,ve as b,De as c,Se as d,je as e,ke as f,Ve as g,Ne as h,Re as i,Ce as j,Ge as k,Te as l,Pe as m,Le as n,Fe as o};
