import{O as W,S as Y,g as _,l as C,t as m,m as y,d as R,k as B,b as O,X as dt,bc as ht,be as E,s as F,bf as lt,bg as yt,bd as ot,o as rt,Y as bt,j as $t,bp as ft,bq as st,bh as St,aW as Dt,b9 as Tt,Z as At,L as Lt,al as Pt,bk as Ct}from"./ZOIXw5Nq.js";import{m as kt}from"./PF0ULQt1.js";import{d as Rt}from"./B67HsDFx.js";import{m as Bt,o as It,d as ct,e as Ot,r as Ft,f as zt}from"./GYQj1fsP.js";import{c as vt}from"./DPNcz-vG.js";import{c as wt}from"./CxzmRZGJ.js";const M="OrdinalAux",K=_(M,"label-box"),Q=6,J=3,Mt={name:M,defaultParams:dt,layerIndex:ht,validator:(i,{validateColumns:s})=>s(i,{showLine:{toBeTypes:["boolean"]},showLabel:{toBeTypes:["boolean"]},lineDashArray:{toBeTypes:["string"]},lineColorType:{toBeOption:"ColorType"},labelColorType:{toBeOption:"ColorType"},labelTextColorType:{toBeOption:"ColorType"},labelTextFormat:{toBeTypes:["Function"]},labelPadding:{toBeTypes:["number"]}})};function _t(i,s){return i.map((t,r)=>{const a=ot(t,s),l=typeof a=="string"?a.split(`
`):[a];return{text:a,textArr:l}})}function Vt({axisX:i,layout:s,fullParams:t}){return i>=0&&i<=s.width?[{id:"line-x",x1:i,x2:i,y1:0,y2:s.height,dashArray:t.lineDashArray??"none",colorType:t.lineColorType}]:[]}function Et({valueLabelData:i,axisX:s,xValue:t,fullParams:r,textSizePx:a,layout:l,rowAmount:g}){if(!(s>=0&&s<=l.width))return[];const p=s,u=-r.labelPadding*g,x=i[t]?i[t].text:"",S=i[t]?i[t].textArr:[],T=S.reduce((P,I)=>I.length>P.length?I:P,""),D=kt(T,a),A=a*S.length,n=D+Q*2,L=A+J*2,c=-n/2,$=-J,b=c+Q,o=$+J;return[{id:"label-x",x:p,y:u-L/2,text:x,textArr:S,textWidth:D,textHeight:A,colorType:r.labelColorType,textColorType:r.labelTextColorType,rectWidth:n,rectHeight:L,rectX:c,rectY:$,textX:b,textY:o}]}function Nt({selection:i,pluginName:s,lineData:t,fullParams:r,fullChartParams:a}){const l=_(s,"auxline");return i.selectAll(`line.${l}`).data(t).join(p=>p.append("line").classed(l,!0).style("stroke-width",1).style("pointer-events","none").style("vector-effect","non-scaling-stroke").attr("x1",u=>u.x1).attr("y1",u=>u.y1).attr("x2",u=>u.x2).attr("y2",u=>u.y2),p=>p.transition().duration(50).attr("x1",x=>x.x1).attr("y1",x=>x.y1).attr("x2",x=>x.x2).attr("y2",x=>x.y2),p=>p.remove()).style("stroke",p=>E(p.colorType,a)).style("stroke-dasharray",p=>p.dashArray)}function jt(i){i.selectAll("line").data([]).exit().remove()}function Xt({selection:i,labelData:s,fullParams:t,fullDataFormatter:r,fullChartParams:a,textReverseTransform:l,textSizePx:g}){return i.selectAll(`g.${K}`).data(s).join(u=>u.append("g").classed(K,!0).style("cursor","pointer").attr("transform",(x,S)=>`translate(${x.x}, ${x.y})`),u=>u.transition().duration(50).attr("transform",(S,T)=>`translate(${S.x}, ${S.y})`),u=>u.remove()).each((u,x,S)=>{const T=F(S[x]),D=T.selectAll("rect").data([u]).join(c=>c.append("rect").style("cursor","pointer").attr("rx",5).attr("ry",5),c=>c,c=>c.remove()).attr("width",c=>`${c.rectWidth}px`).attr("height",c=>`${c.rectHeight}px`).attr("fill",c=>E(c.colorType,a)).attr("x",c=>c.rectX).attr("y",c=>c.rectY).style("transform",l),A=T.selectAll("text").data([u]).join(c=>c.append("text").style("dominant-baseline","hanging").style("cursor","pointer").style("pointer-events","none"),c=>c,c=>c.remove()).style("transform",l).attr("fill",c=>E(c.textColorType,a)).attr("font-size",a.styles.textSize).attr("x",c=>c.textX).attr("y",c=>c.textY).each((c,$,b)=>{lt(F(b[$]),{textArr:u.textArr,textSizePx:g,groupAxisPosition:$===0?"bottom":"left",isContainerRotated:!1})});let n=[];A.selectAll("tspan").each((c,$,b)=>{const P=F(b[$]).node();P&&P.getBBox()&&n.push(P.getBBox().width)});const L=Math.max(...n);D.attr("width",L+Q*2)})}function Yt(i){i.selectAll(`g.${K}`).data([]).exit().remove()}const pe=W(Mt)(({selection:i,rootSelection:s,name:t,subject:r,observer:a})=>{const l=new Y;let g=!1;const p=s.insert("rect","g").classed(_(M,"rect"),!0).attr("opacity",0),{categorySelection$:u,axesSelection$:x,defsSelection$:S,graphicGSelection$:T}=Bt({selection:i,pluginName:M,clipPathID:"test",categoryLabels$:a.isCategorySeprate$.pipe(C(o=>yt(()=>o,a.categoryLabels$,a.categoryLabels$.pipe(y(P=>[P[0]]))))),containerPosition$:a.containerPosition$,graphicTransform$:a.graphicTransform$});a.layout$.pipe(m(l)).subscribe(o=>{p.attr("width",o.rootWidth).attr("height",o.rootHeight)});const D=a.fullChartParams$.pipe(m(l),y(o=>o.highlightTarget),R()),A=a.containerPosition$.pipe(y(o=>o.reduce((I,z)=>z.columnIndex>I?z.columnIndex:I,0)+1),R()),n=a.containerPosition$.pipe(y(o=>o.reduce((I,z)=>z.rowIndex>I?z.rowIndex:I,0)+1),R()),L=a.containerPosition$.pipe(m(l),C(async o=>o),y(o=>`${`scale(${1/o[0].scale[0]}, ${1/o[0].scale[1]})`}`),R()),c=It({rootSelection:s,ordinalScaleDomain$:a.ordinalScaleDomain$,ordinalScale$:a.ordinalScale$,ordinalPadding$:a.ordinalPadding$,containerSize$:a.containerSize$,containerPosition$:a.containerPosition$,layout$:a.layout$}),$=B({valueLabels:a.valueLabels$,fullParams:a.fullParams$}).pipe(m(l),C(async o=>o),y(o=>_t(o.valueLabels,o.fullParams.labelTextFormat)),O(1));B({axesSelection:x,layout:a.layout$,ordinalPosition:c,computedData:a.computedData$,fullParams:a.fullParams$,fullDataFormatter:a.fullDataFormatter$,fullChartParams:a.fullChartParams$,highlightTarget:D,textReverseTransform:L,textSizePx:a.textSizePx$,columnAmount:A,rowAmount:n,valueLabelData:$}).pipe(m(l),C(async o=>o)).subscribe(o=>{const{x:P,xValue:I}=o.ordinalPosition,z=Vt({axisX:P,layout:o.layout,fullParams:o.fullParams});Nt({selection:o.axesSelection,pluginName:t,lineData:z,fullParams:o.fullParams,fullChartParams:o.fullChartParams});const w=Et({valueLabelData:o.valueLabelData,axisX:P,xValue:I,fullParams:o.fullParams,textSizePx:o.textSizePx,layout:o.layout,rowAmount:o.rowAmount});Xt({selection:o.axesSelection,labelData:w,fullParams:o.fullParams,fullDataFormatter:o.fullDataFormatter,fullChartParams:o.fullChartParams,textReverseTransform:o.textReverseTransform,textSizePx:o.textSizePx}).on("mouseover",(k,V)=>{k.stopPropagation(),g=!0,r.event$.next({type:"multiValue",eventName:"mouseover",pluginName:M,highlightTarget:o.highlightTarget,valueDetail:[],datum:null,category:[],categoryIndex:-1,categoryLabel:"",data:o.computedData,event:k})}).on("mousemove",(k,V)=>{k.stopPropagation(),r.event$.next({type:"multiValue",eventName:"mousemove",pluginName:M,highlightTarget:o.highlightTarget,valueDetail:[],datum:null,category:[],categoryIndex:-1,categoryLabel:"",data:o.computedData,event:k})}).on("mouseout",(k,V)=>{k.stopPropagation(),g=!1,r.event$.next({type:"multiValue",eventName:"mouseout",pluginName:M,highlightTarget:o.highlightTarget,valueDetail:[],datum:null,category:[],categoryIndex:-1,categoryLabel:"",data:o.computedData,event:k})}).on("click",(k,V)=>{k.stopPropagation(),r.event$.next({type:"multiValue",eventName:"click",pluginName:M,highlightTarget:o.highlightTarget,valueDetail:[],datum:null,category:[],categoryIndex:-1,categoryLabel:"",data:o.computedData,event:k})})});const b=Rt(p,"mouseout").pipe(m(l));return B({rootRectMouseout:b,axesSelection:x}).pipe(m(l),C(async o=>o)).subscribe(o=>{setTimeout(()=>{g!=!0&&(jt(o.axesSelection),Yt(o.axesSelection))})}),()=>{l.next(void 0),p.remove()}}),N="OrdinalAxis",it=6,Gt="start",Ht="auto",Ut={name:N,defaultParams:bt,layerIndex:$t,validator:(i,{validateColumns:s})=>{const t=s(i,{labelOffset:{toBe:"[number, number]",test:r=>Array.isArray(r)&&r.length===2&&typeof r[0]=="number"&&typeof r[1]=="number"},labelColorType:{toBeOption:"ColorType"},axisLineVisible:{toBeTypes:["boolean"]},axisLineColorType:{toBeOption:"ColorType"},ticks:{toBeTypes:["number","null"]},tickFormat:{toBeTypes:["string","Function"]},tickLineVisible:{toBeTypes:["boolean"]},tickPadding:{toBeTypes:["number"]},tickFullLine:{toBeTypes:["boolean"]},tickFullLineDasharray:{toBeTypes:["string"]},tickColorType:{toBeOption:"ColorType"},tickTextRotate:{toBeTypes:["number"]},tickTextColorType:{toBeOption:"ColorType"}});return t.status==="error",t}};function Wt(i,s){return i.map((t,r)=>{const a=ot(t,s),l=typeof a=="string"?a.split(`
`):[a];return{text:a,textArr:l}})}function Zt({selection:i,axisLabelClassName:s,fullParams:t,containerSize:r,fullDataFormatter:a,fullChartParams:l}){let p=t.tickPadding+t.labelOffset[0],u,x;u=0,x=-t.tickPadding-t.labelOffset[1];let S=x;i.selectAll(`g.${s}`).data([t]).join("g").classed(s,!0).each((T,D,A)=>{F(A[D]).selectAll("text").data([T]).join(n=>n.append("text").style("font-weight","bold"),n=>n,n=>n.remove()).attr("text-anchor",Gt).attr("dominant-baseline",Ht).attr("font-size",l.styles.textSize).style("fill",E(t.labelColorType,l)).attr("x",p).attr("y",S).text(n=>a.xAxis.label)}).attr("transform",T=>`translate(${r.width}, ${u})`)}function qt({selection:i,ordinalXAxisClassName:s,fullParams:t,containerSize:r,fullDataFormatter:a,fullChartParams:l,ordinalScale:g,ordinalScaleDomain:p,valueLabelData:u,textRotateTransform:x,textSizePx:S,ordinalPadding:T}){const D=t.tickTextRotate?"start":"middle",A="auto",n=i.selectAll(`g.${s}`).data([t]).join("g").classed(s,!0).attr("transform",`translate(${T}, 0)`),L=Math.floor(p[1])-Math.ceil(p[0])+1;let c=0,$=0;t.tickFullLine==!0?c=t.tickPadding:c=t.tickPadding-it,$=-0;const b=ft(g).scale(g).ticks(t.ticks==="all"?L:t.ticks>L?L-1:t.ticks).tickSize(t.tickFullLine==!0?-r.height:it).tickSizeOuter(0).tickFormat((I,z)=>{var w;return((w=u[I])==null?void 0:w.text)??""}).tickPadding(c),o=n.transition().duration(100).ease(st).call(b).on("end",(I,z)=>{n.selectAll(".tick text").each((w,j,k)=>{var G;const V=((G=u[w])==null?void 0:G.textArr)??[];lt(F(k[j]),{textArr:V,textSizePx:S,groupAxisPosition:"top",isContainerRotated:!0})})});return o.selectAll("line").style("fill","none").style("stroke",t.tickLineVisible==!0?E(t.tickColorType,l):"none").style("stroke-dasharray",t.tickFullLineDasharray).style("vector-effect","non-scaling-stroke").attr("pointer-events","none"),o.selectAll("path").style("fill","none").style("stroke",t.axisLineVisible==!0?E(t.axisLineColorType,l):"none").style("shape-rendering","crispEdges"),n.selectAll("text").attr("font-size",l.styles.textSize).attr("fill",E(t.tickTextColorType,l)).attr("text-anchor",D).attr("dominant-baseline",A).attr("x",$).style("transform",x).attr("dy",0),n}function Jt({defsSelection:i,clipPathData:s}){i.selectAll("clipPath").data(s).join(t=>t.append("clipPath"),t=>t,t=>t.remove()).attr("id",t=>t.id).each((t,r,a)=>{F(a[r]).selectAll("rect").data([t]).join(l=>l.append("rect"),l=>l,l=>l.remove()).attr("x",l=>-l.width).attr("y",0).attr("width",l=>l.width*2).attr("height",l=>l.height)})}const ge=W(Ut)(({selection:i,name:s,observer:t,subject:r})=>{const a=new Y,l=_(N,"xAxisG"),g=_(N,"axis"),p=_(N,"axis-label"),u=rt(N,"clipPath-box"),x=ct({selection:i,pluginName:N,clipPathID:null,computedData$:t.computedData$,containerPosition$:t.containerPosition$,isCategorySeprate$:t.isCategorySeprate$}).pipe(m(a));t.containerSize$.subscribe(n=>{const L=i.selectAll("defs").data([u]).join("defs"),c=[{id:u,width:n.width,height:n.height}];Jt({defsSelection:L,clipPathData:c})});const S=x.pipe(m(a),y((n,L)=>n.selectAll(`g.${l}`).data([l]).join("g").classed(l,!0))),T=B({valueLabels:t.valueLabels$,fullParams:t.fullParams$}).pipe(m(a),C(async n=>n),y(n=>Wt(n.valueLabels,n.fullParams.tickFormat)),O(1)),D=B({valueLabelData:T,fullDataFormatter:t.fullDataFormatter$}).pipe(m(a),C(async n=>n),y(n=>{const c=n.valueLabelData.length-1,$=n.fullDataFormatter.xAxis.scaleDomain[0]==="min"||n.fullDataFormatter.xAxis.scaleDomain[0]==="auto"?0:n.fullDataFormatter.xAxis.scaleDomain[0],b=n.fullDataFormatter.xAxis.scaleDomain[1]==="max"||n.fullDataFormatter.xAxis.scaleDomain[1]==="auto"?c:n.fullDataFormatter.xAxis.scaleDomain[1];return[$,b]}),O(1)),A=t.fullParams$.pipe(m(a),y(n=>n.tickTextRotate?`rotate(${n.tickTextRotate})`:""));return B({axisSelection:S,fullParams:t.fullParams$,containerSize:t.containerSize$,fullDataFormatter:t.fullDataFormatter$,fullChartParams:t.fullChartParams$,ordinalScale:t.ordinalScale$,ordinalScaleDomain:D,valueLabelData:T,textRotateTransform:A,textSizePx:t.textSizePx$,ordinalPadding:t.ordinalPadding$}).pipe(m(a),C(async n=>n)).subscribe(n=>{qt({selection:n.axisSelection,ordinalXAxisClassName:g,fullParams:n.fullParams,containerSize:n.containerSize,fullDataFormatter:n.fullDataFormatter,fullChartParams:n.fullChartParams,ordinalScale:n.ordinalScale,ordinalScaleDomain:n.ordinalScaleDomain,valueLabelData:n.valueLabelData,textRotateTransform:n.textRotateTransform,textSizePx:n.textSizePx,ordinalPadding:n.ordinalPadding}),Zt({selection:n.axisSelection,axisLabelClassName:p,fullParams:n.fullParams,containerSize:n.containerSize,fullDataFormatter:n.fullDataFormatter,fullChartParams:n.fullChartParams})}),()=>{a.next(void 0)}});function Kt({containerSelection:i,paddingGClassName:s,itemGClassName:t,bubbleData:r,transitionDuration:a,transitionEase:l,ordinalPadding:g}){return i.each((u,x,S)=>{F(S[x]).selectAll(`g.${s}`).data([0]).join(D=>D.append("g").attr("class",s),D=>D,D=>D.remove()).attr("transform",`translate(${g}, 0)`).each((D,A,n)=>{F(n[A]).selectAll(`g.${t}`).data(r[x]??[],c=>c.id).join(c=>c.append("g").attr("class",t).attr("cursor","pointer").attr("transform",$=>`translate(0, ${$.graphicValue[0]?$.graphicValue[0].y:0})`),c=>c.transition().duration(a).ease(Tt(l)).attr("transform",$=>`translate(0, ${$.graphicValue[0]?$.graphicValue[0].y:0})`),c=>c.remove())})}),i.selectAll(`g.${t}`)}function Qt({graphicGSelection:i,transitionDuration:s}){return i.each((r,a,l)=>{F(l[a]).selectAll("circle").data(r.graphicValue).join("circle").attr("fill",p=>r.color).style("opacity",p=>p.opacity).transition().duration(100).ease(st).attr("cx",p=>p.x).attr("r",p=>p.r)}),i.selectAll("circle")}function te({defsSelection:i,clipPathData:s}){i.selectAll("clipPath").data(s).join(t=>t.append("clipPath"),t=>t,t=>t.remove()).attr("id",t=>t.id).each((t,r,a)=>{F(a[r]).selectAll("rect").data([t]).join(l=>l.append("rect"),l=>l,l=>l.remove()).attr("x",0).attr("y",0).attr("width",l=>l.width).attr("height",l=>l.height)})}function ee({selection:i,ids:s,fullChartParams:t}){if(i.interrupt("highlight"),!s.length){i.transition("highlight").duration(200).style("opacity",(r,a)=>r.opacity);return}i.each((r,a,l)=>{const g=r._refDatum;s.includes(g.id)?F(l[a]).style("opacity",p=>p.opacity):F(l[a]).style("opacity",t.styles.unhighlightedOpacity)})}const ae=(i,{selection:s,computedData$:t,visibleComputedRankingData$:r,CategoryDataMap$:a,valueLabels$:l,fullParams$:g,fullDataFormatter$:p,fullChartParams$:u,highlight$:x,rankingItemHeight$:S,rankingScaleList$:T,containerPosition$:D,containerSize$:A,ordinalScale$:n,ordinalPadding$:L,isCategorySeprate$:c,event$:$})=>{const b=new Y,o=rt(i,"clipPath-box"),P=_(i,"padding-g"),I=_(i,"item-g"),z=ct({selection:s,pluginName:i,clipPathID:o,computedData$:t,containerPosition$:D,isCategorySeprate$:c}).pipe(m(b));A.subscribe(e=>{const f=s.selectAll("defs").data([o]).join("defs"),d=[{id:o,width:e.width,height:e.height}];te({defsSelection:f,clipPathData:d})});const w=B({sizeAdjust:g.pipe(y(e=>e.bubble.sizeAdjust),R()),rankingItemHeight:S}).pipe(m(b),C(async e=>e),y(e=>e.rankingItemHeight*e.sizeAdjust/2),R(),O(1)),j=B({visibleComputedRankingData:r,scaleDomain:p.pipe(y(e=>e.xAxis.scaleDomain))}).pipe(m(b),C(async e=>e),y(e=>{const f=e.visibleComputedRankingData[0]&&e.visibleComputedRankingData[0][0]?e.visibleComputedRankingData[0][0].value:[];let d=e.scaleDomain[0]==="auto"||e.scaleDomain[0]==="min"?0:e.scaleDomain[0],h=e.scaleDomain[1]==="auto"||e.scaleDomain[1]==="max"?f.length-1:e.scaleDomain[1];return[d,h]}),R((e,f)=>e[0]===f[0]&&e[1]===f[1]),O(1)),k=B({visibleComputedRankingData:r,scaleDomain:j}).pipe(m(b),C(async e=>e),y(e=>{let f=0,d=0;return e.visibleComputedRankingData.forEach(h=>{h.forEach(Z=>{for(let H=e.scaleDomain[0];H<=e.scaleDomain[1];H++){const v=Z.value[H];v!=null&&(v>d?d=v:v<f&&(f=v))}})}),[f,d]}),R(),O(1)),V=B({minMaxValue:k,fullParams:g}).pipe(m(b),y(e=>St().domain(e.minMaxValue).range(e.fullParams.bubble.valueLinearOpacity)),R(),O(1)),G=B({maxRadius:w,minMaxValue:k,arcScaleType:g.pipe(y(e=>e.bubble.arcScaleType),R())}).pipe(m(b),C(async e=>e),y(e=>Dt().domain([0,e.minMaxValue[1]]).range([2,e.maxRadius]).exponent(e.arcScaleType==="area"?.5:1)),R(),O(1)),tt=B({visibleComputedRankingData:r,radiusScale:G,rankingScaleList:T,ordinalScale:n,opacityScale:V,scaleDomain:j,containerSize:A}).pipe(m(b),C(async e=>e),y(e=>e.visibleComputedRankingData.map((f,d)=>{const h=e.rankingScaleList[d];return f.map((Z,H)=>{const v=Z,xt=v.value.map((nt,U)=>{let q=e.ordinalScale(U);return e.scaleDomain[0]===e.scaleDomain[1]&&(U>e.scaleDomain[0]?q+=e.containerSize.width*1.5:U<e.scaleDomain[0]&&(q-=e.containerSize.width*1.5)),{valueIndex:U,x:q,y:h(v.label),r:e.radiusScale(nt),opacity:e.opacityScale(nt),_refDatum:v}});return v.graphicValue=xt,v})}))),et=u.pipe(m(b),y(e=>e.transitionDuration),R()),pt=u.pipe(m(b),y(e=>e.transitionEase),R()),gt=B({containerSelection:z,bubbleData:tt,rankingScaleList:T,transitionDuration:et,transitionEase:pt,ordinalPadding:L}).pipe(m(b),C(async e=>e),y(e=>Kt({containerSelection:e.containerSelection,paddingGClassName:P,itemGClassName:I,bubbleData:e.bubbleData,transitionDuration:e.transitionDuration,transitionEase:e.transitionEase,ordinalPadding:e.ordinalPadding}))),at=B({graphicGSelection:gt,ordinalScale:n,bubbleData:tt,transitionDuration:et,fullParams:g}).pipe(m(b),C(async e=>e),y(e=>Qt({graphicGSelection:e.graphicGSelection,transitionDuration:e.transitionDuration})),O(1)),mt=u.pipe(m(b),y(e=>e.highlightTarget),R());return B({graphicSelection:at,computedData:t,CategoryDataMap:a,valueLabels:l,highlightTarget:mt,fullDataFormatter:p}).pipe(m(b),C(async e=>e)).subscribe(e=>{e.graphicSelection.on("mouseover",(f,d)=>{const h=d._refDatum;$.next({type:"multiValue",eventName:"mouseover",pluginName:i,highlightTarget:e.highlightTarget,valueDetail:[{value:h.value[d.valueIndex],valueIndex:d.valueIndex,valueLabel:e.valueLabels[d.valueIndex]}],datum:h,category:e.CategoryDataMap.get(h.categoryLabel),categoryIndex:h.categoryIndex,categoryLabel:h.categoryLabel,data:e.computedData,event:f})}).on("mousemove",(f,d)=>{const h=d._refDatum;$.next({type:"multiValue",eventName:"mousemove",pluginName:i,highlightTarget:e.highlightTarget,valueDetail:[{value:h.value[d.valueIndex],valueIndex:d.valueIndex,valueLabel:e.valueLabels[d.valueIndex]}],datum:h,category:e.CategoryDataMap.get(h.categoryLabel),categoryIndex:h.categoryIndex,categoryLabel:h.categoryLabel,data:e.computedData,event:f})}).on("mouseout",(f,d)=>{const h=d._refDatum;$.next({type:"multiValue",eventName:"mouseout",pluginName:i,highlightTarget:e.highlightTarget,valueDetail:[{value:h.value[d.valueIndex],valueIndex:d.valueIndex,valueLabel:e.valueLabels[d.valueIndex]}],datum:h,category:e.CategoryDataMap.get(h.categoryLabel),categoryIndex:h.categoryIndex,categoryLabel:h.categoryLabel,data:e.computedData,event:f})}).on("click",(f,d)=>{const h=d._refDatum;$.next({type:"multiValue",eventName:"click",pluginName:i,highlightTarget:e.highlightTarget,valueDetail:[{value:h.value[d.valueIndex],valueIndex:d.valueIndex,valueLabel:e.valueLabels[d.valueIndex]}],datum:h,category:e.CategoryDataMap.get(h.categoryLabel),categoryIndex:h.categoryIndex,categoryLabel:h.categoryLabel,data:e.computedData,event:f})})}),B({graphicSelection:at,highlight:x.pipe(y(e=>e.map(f=>f.id))),fullChartParams:u}).pipe(m(b),C(async e=>e)).subscribe(e=>{ee({selection:e.graphicSelection,ids:e.highlight,fullChartParams:e.fullChartParams})}),()=>{b.next(void 0)}},X="OrdinalBubbles",ne={name:X,defaultParams:At,layerIndex:Lt,validator:(i,{validateColumns:s})=>{const t=s(i,{bubble:{toBeTypes:["object"]},itemLabel:{toBeTypes:["object"]},axisLabel:{toBeTypes:["object"]},rankingAmount:{toBe:'number | "auto"',test:r=>typeof r=="number"||r==="auto"}});if(i.bubble){const r=s(i.bubble,{sizeAdjust:{toBeTypes:["number"]},arcScaleType:{toBe:'"area" | "radius"',test:a=>a==="area"||a==="radius"},valueLinearOpacity:{toBe:"[number, number]",test:a=>Array.isArray(a)&&a.length===2&&typeof a[0]=="number"&&typeof a[1]=="number"}});if(r.status==="error")return r}if(i.itemLabel){const r=s(i.itemLabel,{padding:{toBeTypes:["number"]},colorType:{toBeOption:"ColorType"}});if(r.status==="error")return r}if(i.axisLabel){const r=s(i.axisLabel,{offset:{toBe:"[number, number]",test:a=>Array.isArray(a)&&a.length===2&&typeof a[0]=="number"&&typeof a[1]=="number"},colorType:{toBeOption:"ColorType"}});if(r.status==="error")return r}return t}},me=W(ne)(({selection:i,name:s,observer:t,subject:r})=>{const a=i.append("g").attr("class",`${X}-bubbles`),l=i.append("g").attr("class",`${X}-labels`),g=new Y,p=t.fullParams$.pipe(m(g),y(n=>({barLabel:{...n.itemLabel,position:"outside"},axisLabel:{...n.axisLabel}}))),u=t.fullParams$.pipe(m(g),y(n=>n.rankingAmount),R()),x=Ot({containerSize$:t.containerSize$,visibleComputedData$:t.visibleComputedData$,textSizePx$:t.textSizePx$,rankingAmount$:u}).pipe(m(g),O(1)),S=Ft({containerSize$:t.containerSize$,textSizePx$:t.textSizePx$,computedRankingAmount$:x}).pipe(m(g),O(1)),T=zt({visibleComputedRankingData$:t.visibleComputedRankingBySumData$,rankingItemHeight$:S}).pipe(m(g),O(1)),D=vt(`${X}-labels`,{selection:l,computedData$:t.computedData$,visibleComputedRankingData$:t.visibleComputedRankingBySumData$,rankingScaleList$:T,xScale$:t.xScale$,fullParams$:p,fullDataFormatter$:t.fullDataFormatter$,fullChartParams$:t.fullChartParams$,transitionEase$:t.fullChartParams$.pipe(y(n=>n.transitionEase),R()),containerPosition$:t.containerPosition$,containerSize$:t.containerSize$,isCategorySeprate$:t.isCategorySeprate$}),A=ae(`${X}-bubbles`,{selection:a,computedData$:t.computedData$,visibleComputedRankingData$:t.visibleComputedRankingBySumData$,CategoryDataMap$:t.CategoryDataMap$,valueLabels$:t.valueLabels$,fullParams$:t.fullParams$,fullDataFormatter$:t.fullDataFormatter$,fullChartParams$:t.fullChartParams$,highlight$:t.highlight$,rankingItemHeight$:S,rankingScaleList$:T,containerPosition$:t.containerPosition$,containerSize$:t.containerSize$,ordinalPadding$:t.ordinalPadding$,ordinalScale$:t.ordinalScale$,isCategorySeprate$:t.isCategorySeprate$,event$:r.event$});return()=>{g.next(void 0),D(),A()}}),ut="OrdinalZoom",ie={name:ut,defaultParams:Pt,layerIndex:Ct,validator:(i,{validateColumns:s})=>({status:"success",columnName:"",expectToBe:""})},xe=W(ie)(({selection:i,rootSelection:s,name:t,observer:r,subject:a})=>{const l=new Y,g=r.computedData$.pipe(m(l),y(u=>({minX:0,maxX:u[0]&&u[0][0]?u[0][0].value.length-1:0,minY:0,maxY:0}))),p=wt(ut,{rootSelection:s,fullDataFormatter$:r.fullDataFormatter$,xyMinMax$:g,layout$:r.layout$,dataFormatter$:a.dataFormatter$});return()=>{l.next(void 0),p()}});export{pe as O,ge as a,me as b,xe as c};
