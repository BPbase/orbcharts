import{a4 as $e,a5 as ee,a6 as le,a7 as ce,a8 as Fe,a9 as C,P as Ne,aa as ke,E as Ge,G as Ce,ab as Te,ac as Pe,R as re,ad as ae,T as L,W as ie,U as I,l as R,ae as ye,af as ue,X as fe,a0 as Le,a2 as Re,S as Ve,O as me,c as Y,t as ge,s as z,ag as Oe,m as X,a as Q}from"./B0ZHf31c.js";import{s as U,g as _}from"./DTR3OuCX.js";function B(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function je(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function ve(e){let t,r,n;e.length!==2?(t=B,r=(s,u)=>B(e(s),u),n=(s,u)=>e(s)-u):(t=e===B||e===je?e:Xe,r=e,n=e);function o(s,u,l=0,m=s.length){if(l<m){if(t(u,u)!==0)return m;do{const c=l+m>>>1;r(s[c],u)<0?l=c+1:m=c}while(l<m)}return l}function a(s,u,l=0,m=s.length){if(l<m){if(t(u,u)!==0)return m;do{const c=l+m>>>1;r(s[c],u)<=0?l=c+1:m=c}while(l<m)}return l}function i(s,u,l=0,m=s.length){const c=o(s,u,l,m-1);return c>l&&n(s[c-1],u)>-n(s[c],u)?c-1:c}return{left:o,center:i,right:a}}function Xe(){return 0}function Ye(e){return e===null?NaN:+e}const ze=ve(B),Ie=ze.right;ve(Ye).center;const Ee=Math.sqrt(50),We=Math.sqrt(10),Ue=Math.sqrt(2);function H(e,t,r){const n=(t-e)/Math.max(0,r),o=Math.floor(Math.log10(n)),a=n/Math.pow(10,o),i=a>=Ee?10:a>=We?5:a>=Ue?2:1;let s,u,l;return o<0?(l=Math.pow(10,-o)/i,s=Math.round(e*l),u=Math.round(t*l),s/l<e&&++s,u/l>t&&--u,l=-l):(l=Math.pow(10,o)*i,s=Math.round(e/l),u=Math.round(t/l),s*l<e&&++s,u*l>t&&--u),u<s&&.5<=r&&r<2?H(e,t,r*2):[s,u,l]}function qe(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[o,a,i]=n?H(t,e,r):H(e,t,r);if(!(a>=o))return[];const s=a-o+1,u=new Array(s);if(n)if(i<0)for(let l=0;l<s;++l)u[l]=(a-l)/-i;else for(let l=0;l<s;++l)u[l]=(a-l)*i;else if(i<0)for(let l=0;l<s;++l)u[l]=(o+l)/-i;else for(let l=0;l<s;++l)u[l]=(o+l)*i;return u}function te(e,t,r){return t=+t,e=+e,r=+r,H(e,t,r)[2]}function Be(e,t,r){t=+t,e=+e,r=+r;const n=t<e,o=n?te(t,e,r):te(e,t,r);return(n?-1:1)*(o<0?1/-o:o)}function He(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),o;return function(a){for(o=0;o<r;++o)n[o]=e[o]*(1-a)+t[o]*a;return n}}function Je(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Ze(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,o=new Array(n),a=new Array(r),i;for(i=0;i<n;++i)o[i]=oe(e[i],t[i]);for(;i<r;++i)a[i]=t[i];return function(s){for(i=0;i<n;++i)a[i]=o[i](s);return a}}function Ke(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function Qe(e,t){var r={},n={},o;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(o in t)o in e?r[o]=oe(e[o],t[o]):n[o]=t[o];return function(a){for(o in r)n[o]=r[o](a);return n}}function oe(e,t){var r=typeof t,n;return t==null||r==="boolean"?$e(t):(r==="number"?ee:r==="string"?(n=le(t))?(t=n,ce):Fe:t instanceof le?ce:t instanceof Date?Ke:Je(t)?He:Array.isArray(t)?Ze:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Qe:ee)(e,t)}function _e(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function et(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function J(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function P(e){return e=J(Math.abs(e)),e?e[1]:NaN}function tt(e,t){return function(r,n){for(var o=r.length,a=[],i=0,s=e[0],u=0;o>0&&s>0&&(u+s+1>n&&(s=Math.max(1,n-u)),a.push(r.substring(o-=s,o+s)),!((u+=s+1)>n));)s=e[i=(i+1)%e.length];return a.reverse().join(t)}}function nt(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var rt=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Z(e){if(!(t=rt.exec(e)))throw new Error("invalid format: "+e);var t;return new se({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Z.prototype=se.prototype;function se(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}se.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function at(e){e:for(var t=e.length,r=1,n=-1,o;r<t;++r)switch(e[r]){case".":n=o=r;break;case"0":n===0&&(n=r),o=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(o+1):e}var De;function it(e,t){var r=J(e,t);if(!r)return e+"";var n=r[0],o=r[1],a=o-(De=Math.max(-8,Math.min(8,Math.floor(o/3)))*3)+1,i=n.length;return a===i?n:a>i?n+new Array(a-i+1).join("0"):a>0?n.slice(0,a)+"."+n.slice(a):"0."+new Array(1-a).join("0")+J(e,Math.max(0,t+a-1))[0]}function de(e,t){var r=J(e,t);if(!r)return e+"";var n=r[0],o=r[1];return o<0?"0."+new Array(-o).join("0")+n:n.length>o+1?n.slice(0,o+1)+"."+n.slice(o+1):n+new Array(o-n.length+2).join("0")}const he={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:et,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>de(e*100,t),r:de,s:it,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function pe(e){return e}var be=Array.prototype.map,Me=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function ot(e){var t=e.grouping===void 0||e.thousands===void 0?pe:tt(be.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",o=e.decimal===void 0?".":e.decimal+"",a=e.numerals===void 0?pe:nt(be.call(e.numerals,String)),i=e.percent===void 0?"%":e.percent+"",s=e.minus===void 0?"−":e.minus+"",u=e.nan===void 0?"NaN":e.nan+"";function l(c){c=Z(c);var f=c.fill,h=c.align,g=c.sign,p=c.symbol,b=c.zero,y=c.width,v=c.comma,M=c.precision,D=c.trim,x=c.type;x==="n"?(v=!0,x="g"):he[x]||(M===void 0&&(M=12),D=!0,x="g"),(b||f==="0"&&h==="=")&&(b=!0,f="0",h="=");var A=p==="$"?r:p==="#"&&/[boxX]/.test(x)?"0"+x.toLowerCase():"",k=p==="$"?n:/[%p]/.test(x)?i:"",V=he[x],E=/[defgprs%]/.test(x);M=M===void 0?6:/[gprs]/.test(x)?Math.max(1,Math.min(21,M)):Math.max(0,Math.min(20,M));function O(d){var w=A,S=k,F,W,j;if(x==="c")S=V(d)+S,d="";else{d=+d;var G=d<0||1/d<0;if(d=isNaN(d)?u:V(Math.abs(d),M),D&&(d=at(d)),G&&+d==0&&g!=="+"&&(G=!1),w=(G?g==="("?g:s:g==="-"||g==="("?"":g)+w,S=(x==="s"?Me[8+De/3]:"")+S+(G&&g==="("?")":""),E){for(F=-1,W=d.length;++F<W;)if(j=d.charCodeAt(F),48>j||j>57){S=(j===46?o+d.slice(F+1):d.slice(F))+S,d=d.slice(0,F);break}}}v&&!b&&(d=t(d,1/0));var N=w.length+d.length+S.length,$=N<y?new Array(y-N+1).join(f):"";switch(v&&b&&(d=t($+d,$.length?y-S.length:1/0),$=""),h){case"<":d=w+d+S+$;break;case"=":d=w+$+d+S;break;case"^":d=$.slice(0,N=$.length>>1)+w+d+S+$.slice(N);break;default:d=$+w+d+S;break}return a(d)}return O.toString=function(){return c+""},O}function m(c,f){var h=l((c=Z(c),c.type="f",c)),g=Math.max(-8,Math.min(8,Math.floor(P(f)/3)))*3,p=Math.pow(10,-g),b=Me[8+g/3];return function(y){return h(p*y)+b}}return{format:l,formatPrefix:m}}var q,Se,we;st({thousands:",",grouping:[3],currency:["$",""]});function st(e){return q=ot(e),Se=q.format,we=q.formatPrefix,q}function lt(e){return Math.max(0,-P(Math.abs(e)))}function ct(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(P(t)/3)))*3-P(Math.abs(e)))}function ut(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,P(t)-P(e))+1}function ft(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function mt(e){return function(){return e}}function gt(e){return+e}var xe=[0,1];function T(e){return e}function ne(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:mt(isNaN(t)?NaN:.5)}function dt(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function ht(e,t,r){var n=e[0],o=e[1],a=t[0],i=t[1];return o<n?(n=ne(o,n),a=r(i,a)):(n=ne(n,o),a=r(a,i)),function(s){return a(n(s))}}function pt(e,t,r){var n=Math.min(e.length,t.length)-1,o=new Array(n),a=new Array(n),i=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++i<n;)o[i]=ne(e[i],e[i+1]),a[i]=r(t[i],t[i+1]);return function(s){var u=Ie(e,s,1,n)-1;return a[u](o[u](s))}}function bt(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Mt(){var e=xe,t=xe,r=oe,n,o,a,i=T,s,u,l;function m(){var f=Math.min(e.length,t.length);return i!==T&&(i=dt(e[0],e[f-1])),s=f>2?pt:ht,u=l=null,c}function c(f){return f==null||isNaN(f=+f)?a:(u||(u=s(e.map(n),t,r)))(n(i(f)))}return c.invert=function(f){return i(o((l||(l=s(t,e.map(n),ee)))(f)))},c.domain=function(f){return arguments.length?(e=Array.from(f,gt),m()):e.slice()},c.range=function(f){return arguments.length?(t=Array.from(f),m()):t.slice()},c.rangeRound=function(f){return t=Array.from(f),r=_e,m()},c.clamp=function(f){return arguments.length?(i=f?!0:T,m()):i!==T},c.interpolate=function(f){return arguments.length?(r=f,m()):r},c.unknown=function(f){return arguments.length?(a=f,c):a},function(f,h){return n=f,o=h,m()}}function xt(){return Mt()(T,T)}function yt(e,t,r,n){var o=Be(e,t,r),a;switch(n=Z(n??",f"),n.type){case"s":{var i=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(a=ct(o,i))&&(n.precision=a),we(n,i)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(a=ut(o,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=a-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(a=lt(o))&&(n.precision=a-(n.type==="%")*2);break}}return Se(n)}function vt(e){var t=e.domain;return e.ticks=function(r){var n=t();return qe(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var o=t();return yt(o[0],o[o.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),o=0,a=n.length-1,i=n[o],s=n[a],u,l,m=10;for(s<i&&(l=i,i=s,s=l,l=o,o=a,a=l);m-- >0;){if(l=te(i,s,r),l===u)return n[o]=i,n[a]=s,t(n);if(l>0)i=Math.floor(i/l)*l,s=Math.ceil(s/l)*l;else if(l<0)i=Math.ceil(i*l)/l,s=Math.floor(s*l)/l;else break;u=l}return e},e}function Ae(){var e=xt();return e.copy=function(){return bt(e,Ae())},ft.apply(e,arguments),vt(e)}const K=({maxValue:e=1,minValue:t=0,axisWidth:r,scaleDomain:n=C.scaleDomain,scaleRange:o=C.scaleRange})=>{const a=n[0]??C.scaleDomain[0],i=n[1]??C.scaleDomain[1],s=o[0]??C.scaleRange[0],u=o[1]??C.scaleRange[1],l=a==="auto"?t:a,m=i==="auto"?e:i;let c=r*s,f=r*u;return Ae().domain([l,m]).range([c,f])};function Dt(e){const{data:t=[],dataFormatter:r,chartParams:n,layout:o}=e;if(!t.length)return[];try{const a=t.reduce((l,m)=>m.length>l?m.length:l,0),s=t.map((l,m)=>{if(l.length===a)return l;const c=Object.assign([],l);for(let f=c.length;f<a;f++)c[f]=null;return c}).map((l,m)=>l.map((c,f)=>{const h=r.grid.visibleFilter(c,m,f,e);return c==null?{id:"",label:"",data:{},value:null,_visible:h}:typeof c=="number"?{id:"",label:"",data:{},value:c,_visible:h}:{id:c.id??"",label:c.label??"",data:c.data??{},value:c.value,_visible:h}}));return Te(r.grid.gridData.seriesDirection,s)}catch{return[]}}function St(e,t,r){const n=t.grid.groupAxis.position==="top"||t.grid.groupAxis.position==="bottom"?r.width:r.height,o=e[0]?e[0].length-1:0;return K({maxValue:o,minValue:0,axisWidth:n,scaleDomain:[0,o],scaleRange:[0,1]})}function wt(e,t,r){const n=t.grid.valueAxis.position==="left"||t.grid.valueAxis.position==="right"?r.height:r.width,o=e.flat().filter(s=>s._visible!=!1),[a,i]=Pe(o);return e.map((s,u)=>K({maxValue:i,minValue:a,axisWidth:n,scaleDomain:[a,i],scaleRange:[0,1]}))}const Nt=e=>{const{data:t=[],dataFormatter:r,chartParams:n,layout:o}=e;if(!t.length)return[];let a;try{const i=Dt(e),s=St(i,r,o),u=Ne({transposedDataGrid:i,dataFormatter:r,chartType:"grid"}),l=ke({transposedDataGrid:i,dataFormatter:r,chartType:"grid"}),m=wt(i,r,o),c=i.map((h,g)=>m[g](0));let f=0;a=i.map((h,g)=>h.map((p,b)=>{const y=Ge("grid",0,g,b),v=l[b],M=m[g],D=M(p.value??0),x=c[g],A={id:p.id?p.id:y,index:f,label:p.label?p.label:y,description:p.description??"",data:p.data,value:p.value,gridIndex:0,seriesIndex:g,seriesLabel:u[g],groupIndex:b,groupLabel:v,color:Ce(g,n),axisX:s(b),axisY:D,axisYFromZero:D-x,visible:p._visible};return f++,A}))}catch(i){throw Error(i)}return a},kt=({fullDataFormatter$:e,layout$:t})=>{const r=new re;function n({xAxis:o,yAxis:a,width:i,height:s}){if(!o||!a)return{translate:[0,0],scale:[1,1],rotate:0,rotateX:0,rotateY:0,value:""};let u=0,l=0,m=0,c=0,f=0;return o.position==="bottom"?a.position==="left"?(c=180,l=s):a.position==="right"?(c=180,f=180,u=i,l=s):(c=180,l=s):o.position==="top"?a.position==="left"||(a.position==="right"?(f=180,u=i):(c=180,l=s)):o.position==="left"?a.position==="bottom"?(m=-90,l=s):a.position==="top"?(m=-90,f=180):(c=180,l=s):o.position==="right"&&(a.position==="bottom"?(m=-90,c=180,l=s,u=i):a.position==="top"?(m=-90,c=180,f=180,u=i):(c=180,l=s)),{translate:[u,l],scale:[1,1],rotate:m,rotateX:c,rotateY:f,value:`translate(${u}px, ${l}px) rotate(${m}deg) rotateX(${c}deg) rotateY(${f}deg)`}}return new ae(o=>(L({fullDataFormatter:e,layout:t}).pipe(ie(r),I(async a=>a)).subscribe(a=>{const i=n({xAxis:a.fullDataFormatter.grid.groupAxis,yAxis:a.fullDataFormatter.grid.valueAxis,width:a.layout.width,height:a.layout.height});o.next(i)}),function(){r.next(void 0)}))},Gt=({gridAxesTransform$:e})=>e.pipe(R(t=>{const r=[0,0],n=[1/t.scale[0],1/t.scale[1]],o=t.rotate*-1,a=t.rotateX*-1,i=t.rotateY*-1;return{translate:r,scale:n,rotate:o,rotateX:a,rotateY:i,value:`translate(${r[0]}px, ${r[1]}px) rotate(${o}deg) rotateX(${a}deg) rotateY(${i}deg)`}})),Ct=({computedData$:e,fullDataFormatter$:t,layout$:r})=>{const n=new re;function o({data:a,groupAxis:i,valueAxis:s,width:u,height:l}){let m=0,c=0,f=0,h=0;const g=i.position==="top"||i.position==="bottom"?u:l,p=0,b=a[0]?a[0].length-1:0,y=i.scaleDomain[0]==="auto"?p-i.scalePadding:i.scaleDomain[0]-i.scalePadding,v=i.scaleDomain[1]==="auto"?b+i.scalePadding:i.scaleDomain[1]+i.scalePadding,M=K({maxValue:b,minValue:p,axisWidth:g,scaleDomain:[y,v],scaleRange:[0,1]}),D=M(p),x=M(b);m=D,f=(x-D)/g;const k=a.map((W,j)=>W.filter((G,N)=>N>=y&&N<=v&&G.visible==!0)),V=ue(k),E=s.position==="left"||s.position==="right"?l:u,O=K({maxValue:V[1],minValue:V[0],axisWidth:E,scaleDomain:s.scaleDomain,scaleRange:s.scaleRange}),d=ue(a),w=O(d[0]),S=O(d[1]);return c=w,h=(S-w)/E,{translate:[m,c],scale:[f,h],rotate:0,rotateX:0,rotateY:0,value:`translate(${m}px, ${c}px) scale(${f}, ${h})`}}return new ae(a=>(L({computedData:e,fullDataFormatter:t,layout:r}).pipe(ie(n),I(async i=>i)).subscribe(i=>{const s=o({data:i.computedData,groupAxis:i.fullDataFormatter.grid.groupAxis,valueAxis:i.fullDataFormatter.grid.valueAxis,width:i.layout.width,height:i.layout.height});a.next(s)}),function(){n.next(void 0)}))},Tt=({gridContainer$:e,gridAxesTransform$:t,gridGraphicTransform$:r})=>L({gridContainer:e,gridAxesTransform:t,gridGraphicTransform:r}).pipe(I(async n=>n),R(n=>n.gridAxesTransform.rotate==0||n.gridAxesTransform.rotate==180?n.gridContainer.map((o,a)=>[1/n.gridGraphicTransform.scale[0]/n.gridContainer[a].scale[0],1/n.gridGraphicTransform.scale[1]/n.gridContainer[a].scale[1]]):n.gridContainer.map((o,a)=>[1/n.gridGraphicTransform.scale[0]/n.gridContainer[a].scale[1],1/n.gridGraphicTransform.scale[1]/n.gridContainer[a].scale[0]]))),Pt=({fullDataFormatter$:e,layout$:t})=>{const r=new re;function n({xAxisPosition:o,yAxisPosition:a,width:i,height:s}){if((o==="bottom"||o==="top")&&(a==="left"||a==="right"))return{width:i,height:s};if((o==="left"||o==="right")&&(a==="bottom"||a==="top"))return{width:s,height:i}}return new ae(o=>{L({fullDataFormatter:e,layout:t}).pipe(ie(r),I(async a=>a)).subscribe(a=>{const i=n({xAxisPosition:a.fullDataFormatter.grid.groupAxis.position,yAxisPosition:a.fullDataFormatter.grid.valueAxis.position,width:a.layout.width,height:a.layout.height});return o.next(i),function(){r.next(void 0)}})})},Lt=({computedData$:e})=>e.pipe(R(t=>t.filter(r=>r.length).map(r=>r[0].seriesLabel)),ye((t,r)=>JSON.stringify(t).length===JSON.stringify(r).length)),Rt=({computedData$:e})=>e.pipe(R(t=>t.map(n=>n.filter(o=>o.visible==!0)).filter(n=>n.length))),Vt=({computedData$:e,fullDataFormatter$:t})=>L({computedData:e,fullDataFormatter:t}).pipe(R(r=>!!(r.fullDataFormatter.grid.seriesSlotIndexes&&r.fullDataFormatter.grid.seriesSlotIndexes.length===r.computedData.length)),ye()),Ot=({computedData$:e,fullDataFormatter$:t,fullChartParams$:r,layout$:n})=>L({computedData:e,fullDataFormatter:t,fullChartParams:r,layout:n}).pipe(I(async a=>a),R(a=>{const i=a.fullDataFormatter.grid;if(!!(i.seriesSlotIndexes&&i.seriesSlotIndexes.length===a.computedData.length))return a.computedData.map((u,l)=>{const m=i.seriesSlotIndexes[l]%a.fullDataFormatter.container.columnAmount,c=Math.floor(i.seriesSlotIndexes[l]/a.fullDataFormatter.container.columnAmount),{translate:f,scale:h}=fe(a.layout,a.fullDataFormatter.container,c,m);return{slotIndex:i.seriesSlotIndexes[l],rowIndex:c,columnIndex:m,translate:f,scale:h}});{const u=i.slotIndex%a.fullDataFormatter.container.columnAmount,l=Math.floor(i.slotIndex/a.fullDataFormatter.container.columnAmount);return a.computedData.map((m,c)=>{const{translate:f,scale:h}=fe(a.layout,a.fullDataFormatter.container,l,u);return{slotIndex:i.slotIndex,rowIndex:l,columnIndex:u,translate:f,scale:h}})}}));function At(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=Le(e);return Re(e,r)}const jt=({selection:e,pluginName:t,clipPathID:r,existedSeriesLabels$:n,gridContainer$:o,gridAxesTransform$:a,gridGraphicTransform$:i})=>{const s=_(t,"series"),u=_(t,"axes"),l=_(t,"graphic"),m=n.pipe(X((g,p)=>e.selectAll(`g.${s}`).data(g,b=>b).join(b=>b.append("g").classed(s,!0).each((y,v,M)=>{Q(M[v]).selectAll(`g.${u}`).data([v]).join(D=>D.append("g").classed(u,!0).attr("clip-path",`url(#${r})`).each((x,A,k)=>{Q(k[A]).selectAll("defs").data([A]).join("defs"),Q(k[A]).selectAll("g").data([A]).join("g").classed(l,!0)}),D=>D,D=>D.remove())}),b=>b,b=>b.remove())),z(g=>Y({seriesSelection:At(g),gridContainer:o})),X(g=>(g.seriesSelection.transition().attr("transform",(p,b)=>{const y=g.gridContainer[b]??g.gridContainer[0],v=y.translate,M=y.scale;return`translate(${v[0]}, ${v[1]}) scale(${M[0]}, ${M[1]})`}),g.seriesSelection)),U(1)),c=Y({seriesSelection:m,gridAxesTransform:a}).pipe(z(async g=>g),X(g=>g.seriesSelection.select(`g.${u}`).style("transform",g.gridAxesTransform.value)),U(1)),f=c.pipe(X(g=>g.select("defs")),U(1)),h=Y({axesSelection:c,gridGraphicTransform:i}).pipe(z(async g=>g),X(g=>{const p=g.axesSelection.select(`g.${l}`);return p.transition().duration(50).style("transform",g.gridGraphicTransform.value),p}),U(1));return{seriesSelection$:m,axesSelection$:c,defsSelection$:f,graphicGSelection$:h}},Xt=({fullDataFormatter$:e,gridAxesSize$:t,computedData$:r,fullChartParams$:n})=>{const o=new Ve,a=new me(i=>{Y({dataFormatter:e,computedData:r}).pipe(ge(o),z(async s=>s)).subscribe(s=>{const l=s.computedData[0]?s.computedData[0].length-1:0,m=s.dataFormatter.grid.groupAxis.scaleDomain[0]==="auto"?0-s.dataFormatter.grid.groupAxis.scalePadding:s.dataFormatter.grid.groupAxis.scaleDomain[0]-s.dataFormatter.grid.groupAxis.scalePadding,c=s.dataFormatter.grid.groupAxis.scaleDomain[1]==="auto"?l+s.dataFormatter.grid.groupAxis.scalePadding:s.dataFormatter.grid.groupAxis.scaleDomain[1]+s.dataFormatter.grid.groupAxis.scalePadding,h=(s.dataFormatter.grid.gridData.seriesDirection==="row"?(s.computedData[0]??[]).map(g=>g.groupLabel):s.computedData.map(g=>g[0].groupLabel)).filter((g,p)=>p>=m&&p<=c);i.next(h)})});return new me(i=>{Y({dataFormatter:e,axisSize:t,fullChartParams:n,scaleRangeGroupLabels:a}).pipe(ge(o),z(async s=>s)).subscribe(s=>{const u=s.dataFormatter.grid.valueAxis.position==="right"||s.dataFormatter.grid.valueAxis.position==="bottom",l=Oe({axisLabels:s.scaleRangeGroupLabels,axisWidth:s.axisSize.width,reverse:u}),m=f=>s.dataFormatter.grid.groupAxis.position==="bottom"||s.dataFormatter.grid.groupAxis.position==="top"?f.offsetX-s.fullChartParams.padding.left:f.offsetY-s.fullChartParams.padding.top,c=f=>{const h=m(f),g=l(h);return{groupIndex:g,groupLabel:s.scaleRangeGroupLabels[g]??""}};return i.next(c),function(){o.next(void 0)}})})};export{jt as a,Ot as b,kt as c,Gt as d,Ct as e,Tt as f,Xt as g,Pt as h,Vt as i,Lt as j,Rt as k,Nt as l,Dt as m,St as n,At as o,wt as p};
