import{S as G,k as y,b as Y,t as u,l as S,m as b,c as I,s as w,aT as U,aE as q,aV as F}from"./Dh2HIxf9.js";import{j as C,n as H,g as z,h as E,o as J}from"./2zdWaanV.js";import{b as K}from"./DdT0iQQs.js";const Q=6;function Z(v,k){return v.map((t,f)=>{const A=E(t,k),s=typeof A=="string"?A.split(`
`):[A];return{text:A,textArr:s}})}function _({selection:v,groupingLabelClassName:k,fullParams:t,axisLabelAlign:f,gridAxesSize:A,fullDataFormatter:s,chartParams:h,textReverseTransform:R}){const x=t.tickPadding+t.labelOffset[0],p=t.tickPadding+t.labelOffset[1];let a=0,l=0;s.grid.groupAxis.position==="bottom"?(l=p,s.grid.valueAxis.position==="left"?a=x:s.grid.valueAxis.position==="right"&&(a=-x)):s.grid.groupAxis.position==="top"?(l=-p,s.grid.valueAxis.position==="left"?a=x:s.grid.valueAxis.position==="right"&&(a=-x)):s.grid.groupAxis.position==="left"?(a=-x,s.grid.valueAxis.position==="bottom"?l=-p:s.grid.valueAxis.position==="top"&&(l=p)):s.grid.groupAxis.position==="right"&&(a=x,s.grid.valueAxis.position==="bottom"?l=-p:s.grid.valueAxis.position==="top"&&(l=p)),v.selectAll(`g.${k}`).data([t]).join("g").classed(k,!0).each((o,T,m)=>{w(m[T]).selectAll("text").data([o]).join(c=>c.append("text").style("font-weight","bold"),c=>c,c=>c.remove()).attr("text-anchor",f.textAnchor).attr("dominant-baseline",f.dominantBaseline).attr("font-size",h.styles.textSize).style("fill",C(t.labelColorType,h)).style("transform",R).attr("x",a).attr("y",l).text(c=>s.grid.groupAxis.label)}).attr("transform",o=>`translate(${A.width}, 0)`)}function N({selection:v,xAxisClassName:k,fullParams:t,tickTextAlign:f,gridAxesSize:A,fullDataFormatter:s,chartParams:h,groupScale:R,groupScaleDomain:x,groupLabelData:p,textReverseTransformWithRotate:a,textSizePx:l}){const o=v.selectAll(`g.${k}`).data([t]).join("g").classed(k,!0),T=Math.floor(x[1])-Math.ceil(x[0])+1;let m=0,c=0;s.grid.groupAxis.position==="left"?(m=0,c=-t.tickPadding):s.grid.groupAxis.position==="right"?(m=0,c=t.tickPadding):s.grid.groupAxis.position==="bottom"?(m=t.tickPadding,c=0):s.grid.groupAxis.position==="top"&&(m=-t.tickPadding,c=-0);const V=H(R).scale(R).ticks(t.ticks==="all"||t.ticks>T?T:t.ticks).tickSize(t.tickFullLine==!0?A.height:-Q).tickSizeOuter(0).tickFormat(L=>{var M;return((M=p[L])==null?void 0:M.text)??""}).tickPadding(m),$=o.transition().duration(100).call(V).on("end",(L,M)=>{o.selectAll(".tick text").each((D,B,X)=>{var n;const i=((n=p[D])==null?void 0:n.textArr)??[];K(w(X[B]),{textArr:i,textSizePx:l,groupAxisPosition:s.grid.groupAxis.position})})});return $.selectAll("line").style("fill","none").style("stroke",t.tickLineVisible==!0?C(t.tickColorType,h):"none").style("stroke-dasharray",t.tickFullLineDasharray).attr("pointer-events","none"),$.selectAll("path").style("fill","none").style("stroke",t.axisLineVisible==!0?C(t.axisLineColorType,h):"none").style("shape-rendering","crispEdges"),o.selectAll("text").attr("font-size",h.styles.textSize).attr("fill",C(t.tickTextColorType,h)).attr("text-anchor",f.textAnchor).attr("dominant-baseline",f.dominantBaseline).attr("x",c).style("transform",a).attr("dy",0),o}const re=(v,{selection:k,computedData$:t,fullParams$:f,fullDataFormatter$:A,fullChartParams$:s,gridAxesTransform$:h,gridAxesReverseTransform$:R,gridAxesSize$:x,gridContainerPosition$:p,isSeriesSeprate$:a,textSizePx$:l})=>{const o=new G,T=z(v,"container"),m=z(v,"xAxisG"),c=z(v,"xAxis"),V=z(v,"groupingLabel"),$=y({computedData:t.pipe(Y((e,r)=>e.length===r.length)),isSeriesSeprate:a}).pipe(u(o),S(async e=>e),b(e=>e.isSeriesSeprate?e.computedData:[e.computedData[0]]),b((e,r)=>k.selectAll(`g.${T}`).data(e,d=>d[0]?d[0].seriesIndex:r).join("g").classed(T,!0))),P=$.pipe(u(o),b((e,r)=>e.selectAll(`g.${m}`).data([m]).join("g").classed(m,!0)));y({containerSelection:$,gridContainerPosition:p}).pipe(u(o),S(async e=>e)).subscribe(e=>{e.containerSelection.attr("transform",(r,d)=>{const j=e.gridContainerPosition[d]??e.gridContainerPosition[0],W=j.translate,O=j.scale;return`translate(${W[0]}, ${W[1]}) scale(${O[0]}, ${O[1]})`})}),y({axisSelection:P,gridAxesTransform:h}).pipe(u(o),S(async e=>e)).subscribe(e=>{e.axisSelection.style("transform",e.gridAxesTransform.value)});const L=y({gridAxesReverseTransform:R,gridContainerPosition:p}).pipe(u(o),S(async e=>e),b(e=>{const r=`rotateX(${e.gridAxesReverseTransform.rotateX}deg) rotateY(${e.gridAxesReverseTransform.rotateY}deg)`,d=`rotate(${e.gridAxesReverseTransform.rotate}deg)`,j=`scale(${1/e.gridContainerPosition[0].scale[0]}, ${1/e.gridContainerPosition[0].scale[1]})`;return`${r} ${d} ${j}`}),Y()),M=y({textReverseTransform:L,fullParams:f}).pipe(u(o),S(async e=>e),b(e=>`${e.textReverseTransform} rotate(${e.fullParams.tickTextRotate}deg)`)),D=y({fullDataFormatter:A,gridAxesSize:x,computedData:t}).pipe(u(o),S(async e=>e),b(e=>{const r=e.computedData[0]?e.computedData[0].length-1:0,d=e.fullDataFormatter.grid.groupAxis.scaleDomain[0]-e.fullDataFormatter.grid.groupAxis.scalePadding,j=e.fullDataFormatter.grid.groupAxis.scaleDomain[1]==="max"?r+e.fullDataFormatter.grid.groupAxis.scalePadding:e.fullDataFormatter.grid.groupAxis.scaleDomain[1]+e.fullDataFormatter.grid.groupAxis.scalePadding;return[d,j]}),I(1)),B=y({groupScaleDomain:D,gridAxesSize:x}).pipe(u(o),S(async e=>e),b(e=>U().domain(e.groupScaleDomain).range([0,e.gridAxesSize.width]))),X=t.pipe(b(e=>(e[0]??[]).map(r=>r.groupLabel))),i=y({fullDataFormatter:A,fullParams:f}).pipe(u(o),S(async e=>e),b(e=>{let r="middle",d="hanging";return e.fullDataFormatter.grid.groupAxis.position==="bottom"?(r=e.fullParams.tickTextRotate?"end":"middle",d="hanging"):e.fullDataFormatter.grid.groupAxis.position==="top"?(r=e.fullParams.tickTextRotate?"start":"middle",d="auto"):e.fullDataFormatter.grid.groupAxis.position==="left"?(r="end",d="middle"):e.fullDataFormatter.grid.groupAxis.position==="right"&&(r="start",d="middle"),{textAnchor:r,dominantBaseline:d}})),n=A.pipe(u(o),b(e=>{let r="start",d="hanging";return e.grid.groupAxis.position==="bottom"?d="hanging":e.grid.groupAxis.position==="top"?d="auto":e.grid.groupAxis.position==="left"?r="end":e.grid.groupAxis.position==="right"&&(r="start"),e.grid.valueAxis.position==="left"?r="start":e.grid.valueAxis.position==="right"?r="end":e.grid.valueAxis.position==="bottom"?d="auto":e.grid.valueAxis.position==="top"&&(d="hanging"),{textAnchor:r,dominantBaseline:d}})),g=y({groupLabels:X,fullParams:f}).pipe(u(o),S(async e=>e),b(e=>Z(e.groupLabels,e.fullParams.tickFormat)));return y({axisSelection:P,fullParams:f,tickTextAlign:i,axisLabelAlign:n,gridAxesSize:x,fullDataFormatter:A,chartParams:s,groupScale:B,groupScaleDomain:D,groupLabelData:g,textReverseTransform:L,textReverseTransformWithRotate:M,textSizePx:l}).pipe(u(o),S(async e=>e)).subscribe(e=>{N({selection:e.axisSelection,xAxisClassName:c,fullParams:e.fullParams,tickTextAlign:e.tickTextAlign,gridAxesSize:e.gridAxesSize,fullDataFormatter:e.fullDataFormatter,chartParams:e.chartParams,groupScale:e.groupScale,groupScaleDomain:e.groupScaleDomain,groupLabelData:e.groupLabelData,textReverseTransformWithRotate:e.textReverseTransformWithRotate,textSizePx:e.textSizePx}),_({selection:e.axisSelection,groupingLabelClassName:V,fullParams:e.fullParams,axisLabelAlign:e.axisLabelAlign,gridAxesSize:e.gridAxesSize,fullDataFormatter:e.fullDataFormatter,chartParams:e.chartParams,textReverseTransform:e.textReverseTransform})}),()=>{o.next(void 0)}},ee=6;function ie({selection:v,textClassName:k,fullParams:t,axisLabelAlign:f,gridAxesSize:A,fullDataFormatter:s,fullChartParams:h,textReverseTransform:R}){const x=t.tickPadding-t.labelOffset[0],p=t.tickPadding+t.labelOffset[1];let a=0,l=0;s.grid.groupAxis.position==="bottom"?(l=-p,s.grid.valueAxis.position==="left"?a=-x:s.grid.valueAxis.position==="right"&&(a=x)):s.grid.groupAxis.position==="top"?(l=p,s.grid.valueAxis.position==="left"?a=-x:s.grid.valueAxis.position==="right"&&(a=x)):s.grid.groupAxis.position==="left"?(a=x,s.grid.valueAxis.position==="bottom"?l=p:s.grid.valueAxis.position==="top"&&(l=-p)):s.grid.groupAxis.position==="right"&&(a=-x,s.grid.valueAxis.position==="bottom"?l=p:s.grid.valueAxis.position==="top"&&(l=-p)),v.selectAll(`g.${k}`).data([t]).join("g").classed(k,!0).each((o,T,m)=>{w(m[T]).selectAll("text").data([o]).join(c=>c.append("text").style("font-weight","bold"),c=>c,c=>c.remove()).attr("text-anchor",f.textAnchor).attr("dominant-baseline",f.dominantBaseline).attr("font-size",h.styles.textSize).style("fill",C(t.labelColorType,h)).style("transform",R).attr("x",a).attr("y",l).text(c=>s.grid.valueAxis.label)}).attr("transform",o=>`translate(0, ${A.height})`)}function te({selection:v,yAxisClassName:k,fullParams:t,tickTextAlign:f,gridAxesSize:A,fullDataFormatter:s,fullChartParams:h,valueScale:R,textReverseTransformWithRotate:x,filteredMinMaxValue:p}){const a=v.selectAll(`g.${k}`).data([t]).join("g").classed(k,!0);let l=0,o=0;s.grid.valueAxis.position==="left"?(l=t.tickPadding,o=0):s.grid.valueAxis.position==="right"?(l=-t.tickPadding,o=0):s.grid.valueAxis.position==="bottom"?(l=0,o=t.tickPadding):s.grid.valueAxis.position==="top"&&(l=0,o=-t.tickPadding);const T=J(R).scale(R).ticks(t.ticks).tickFormat(V=>E(V,t.tickFormat)).tickSize(t.tickFullLine==!0?-A.width:ee).tickPadding(l),m=a.transition().duration(100).call(T);m.selectAll("line").style("fill","none").style("stroke",t.tickLineVisible==!0?C(t.tickColorType,h):"none").style("stroke-dasharray",t.tickFullLineDasharray).attr("pointer-events","none"),m.selectAll("path").style("fill","none").style("stroke",t.axisLineVisible==!0?C(t.axisLineColorType,h):"none").style("shape-rendering","crispEdges");const c=a.selectAll("text").attr("font-size",h.styles.textSize).style("color",C(t.tickTextColorType,h)).attr("text-anchor",f.textAnchor).attr("dominant-baseline",f.dominantBaseline).attr("y",o).attr("dy",0);return c.style("transform",x),(s.grid.valueAxis.position==="bottom"||s.grid.valueAxis.position==="top")&&c.attr("dy",0),a}const le=(v,{selection:k,computedData$:t,filteredMinMaxValue$:f,fullParams$:A,fullDataFormatter$:s,fullChartParams$:h,gridAxesTransform$:R,gridAxesReverseTransform$:x,gridAxesSize$:p,gridContainerPosition$:a,isSeriesSeprate$:l})=>{const o=new G,T=z(v,"container"),m=z(v,"yAxisG"),c=z(v,"yAxis"),V=z(v,"text"),$=y({computedData:t.pipe(Y((i,n)=>i.length===n.length)),isSeriesSeprate:l}).pipe(u(o),S(async i=>i),b(i=>i.isSeriesSeprate?i.computedData:[i.computedData[0]]),b((i,n)=>k.selectAll(`g.${T}`).data(i,g=>g[0]?g[0].seriesIndex:n).join("g").classed(T,!0))),P=$.pipe(u(o),b((i,n)=>i.selectAll(`g.${m}`).data([m]).join("g").classed(m,!0)));y({containerSelection:$,gridContainerPosition:a}).pipe(u(o),S(async i=>i)).subscribe(i=>{i.containerSelection.attr("transform",(n,g)=>{const e=i.gridContainerPosition[g]??i.gridContainerPosition[0],r=e.translate,d=e.scale;return`translate(${r[0]}, ${r[1]}) scale(${d[0]}, ${d[1]})`})}),y({axisSelection:P,gridAxesTransform:R}).pipe(u(o),S(async i=>i)).subscribe(i=>{i.axisSelection.style("transform",i.gridAxesTransform.value)});const L=y({gridAxesReverseTransform:x,gridContainerPosition:a}).pipe(u(o),S(async i=>i),b(i=>{const n=`rotateX(${i.gridAxesReverseTransform.rotateX}deg) rotateY(${i.gridAxesReverseTransform.rotateY}deg)`,g=`rotate(${i.gridAxesReverseTransform.rotate}deg)`,e=`scale(${1/i.gridContainerPosition[0].scale[0]}, ${1/i.gridContainerPosition[0].scale[1]})`;return`${n} ${g} ${e}`}),Y()),M=y({textReverseTransform:L,fullParams:A}).pipe(u(o),S(async i=>i),b(i=>`${i.textReverseTransform} rotate(${i.fullParams.tickTextRotate}deg)`)),D=new q(i=>{y({fullDataFormatter:s,gridAxesSize:p,filteredMinMaxValue:f}).pipe(u(o),S(async n=>n)).subscribe(n=>{let g=n.filteredMinMaxValue[1],e=n.filteredMinMaxValue[0];g===e&&g===0&&(g=1);const r=F({maxValue:g,minValue:e,axisWidth:n.gridAxesSize.height,scaleDomain:n.fullDataFormatter.grid.valueAxis.scaleDomain,scaleRange:n.fullDataFormatter.grid.valueAxis.scaleRange});i.next(r)})}),B=y({fullDataFormatter:s,fullParams:A}).pipe(u(o),S(async i=>i),b(i=>{let n="start",g="hanging";return i.fullDataFormatter.grid.valueAxis.position==="left"?(n="end",g="middle"):i.fullDataFormatter.grid.valueAxis.position==="right"?(n="start",g="middle"):i.fullDataFormatter.grid.valueAxis.position==="bottom"?(n=i.fullParams.tickTextRotate?"end":"middle",g="hanging"):i.fullDataFormatter.grid.valueAxis.position==="top"&&(n=i.fullParams.tickTextRotate?"start":"middle",g="auto"),{textAnchor:n,dominantBaseline:g}})),X=s.pipe(u(o),b(i=>{let n="start",g="hanging";return i.grid.groupAxis.position==="bottom"?g="auto":i.grid.groupAxis.position==="top"?g="hanging":i.grid.groupAxis.position==="left"?n="start":i.grid.groupAxis.position==="right"&&(n="end"),i.grid.valueAxis.position==="left"?n="end":i.grid.valueAxis.position==="right"?n="start":i.grid.valueAxis.position==="bottom"?g="hanging":i.grid.valueAxis.position==="top"&&(g="auto"),{textAnchor:n,dominantBaseline:g}}));return y({axisSelection:P,fullParams:A,tickTextAlign:B,axisLabelAlign:X,computedData:t,gridAxesSize:p,fullDataFormatter:s,fullChartParams:h,valueScale:D,textReverseTransform:L,textReverseTransformWithRotate:M,filteredMinMaxValue:f}).pipe(u(o),S(async i=>i)).subscribe(i=>{te({selection:i.axisSelection,yAxisClassName:c,fullParams:i.fullParams,tickTextAlign:i.tickTextAlign,gridAxesSize:i.gridAxesSize,fullDataFormatter:i.fullDataFormatter,fullChartParams:i.fullChartParams,valueScale:i.valueScale,textReverseTransformWithRotate:i.textReverseTransformWithRotate,filteredMinMaxValue:i.filteredMinMaxValue}),ie({selection:i.axisSelection,textClassName:V,fullParams:i.fullParams,axisLabelAlign:i.axisLabelAlign,gridAxesSize:i.gridAxesSize,fullDataFormatter:i.fullDataFormatter,fullChartParams:i.fullChartParams,textReverseTransform:i.textReverseTransform})}),()=>{o.next(void 0)}};export{re as a,le as c};
