import{Z as V,S as $,t as c,m as T,j as u,O as A,k as h,s as D,l as R}from"./Dy7f7BI4.js";import{g as X}from"./DUOO05n7.js";import{g as k,k as Z,b as W,n as q}from"./CPNhRdj_.js";const B="Bars",U=W(B,"g"),x=W(B,"rect"),j=.3;function J({axisWidth:o,groupAmount:n,barAmountOfGroup:_,barPadding:r=0,barGroupPadding:s=0}){const d=(o/(n-1)-s)/_-r;return d>1?d:1}function K(o,n,_){const r=o/2,s=o*n.length+_.barPadding*n.length;return q().domain(n).range([-s/2+r,s/2-r])}function Q(o,n){return o<=1?0:n/(o-1)*j}function tt(o,n){return o<=1?n:n*(1-j)}function et({selection:o,data:n,zeroY:_,groupLabels:r,barScale:s,params:l,chartParams:d,barWidth:m,transformedBarRadius:S,delayGroup:N,transitionItem:f}){const L=m/2;return o.selectAll(`g.${U}`).data(n,(P,O)=>r[O]).join(P=>P.append("g").classed(U,!0).attr("cursor","pointer"),P=>P,P=>P.remove()).attr("transform",(P,O)=>`translate(${P[0]?P[0].axisX:0}, 0)`).each((P,O,b)=>{R(b[O]).selectAll("rect").data(P,p=>p.id).join(p=>p.append("rect").classed(x,!0).attr("height",H=>0),p=>p,p=>p.remove()).attr("fill",p=>p.color).attr("y",p=>p.axisY<_?p.axisY:_).attr("x",p=>s(p.seriesLabel)).attr("width",m).attr("transform",`translate(${-L}, 0)`).attr("rx",S[0]).attr("ry",S[1]).transition().duration(f).ease(Z(d.transitionEase)).delay((p,H)=>p.groupIndex*N).attr("height",p=>Math.abs(p.axisYFromZero))}).selectAll(`rect.${x}`)}function at({defsSelection:o,clipPathData:n}){o.selectAll("clipPath").data(n).join(_=>_.append("clipPath"),_=>_,_=>_.remove()).attr("id",_=>_.id).each((_,r,s)=>{R(s[r]).selectAll("rect").data([_]).join(l=>l.append("rect"),l=>l,l=>l.remove()).attr("x",0).attr("y",0).attr("width",l=>l.width).attr("height",l=>l.height)})}function rt({selection:o,ids:n,fullChartParams:_}){if(o.interrupt("highlight"),!n.length){o.transition("highlight").duration(200).style("opacity",1);return}o.each((r,s,l)=>{n.includes(r.id)?R(l[s]).style("opacity",1):R(l[s]).style("opacity",_.styles.unhighlightedOpacity)})}const te=V(B,X)(({selection:o,name:n,subject:_,observer:r})=>{const s=new $,l=k(B,"clipPath-box"),d=o.append("g").attr("clip-path",`url(#${l})`),m=d.append("defs"),S=d.append("g"),N=new $;r.gridAxesTransform$.pipe(c(s),T(t=>t.value),u()).subscribe(t=>{d.style("transform",t)}),r.gridGraphicTransform$.pipe(c(s),T(t=>t.value),u()).subscribe(t=>{S.transition().duration(50).style("transform",t)});const f=r.visibleComputedData$.pipe(T(t=>t[0]&&t[0][0]?t[0][0].axisY-t[0][0].axisYFromZero:0),u()),L=new A(t=>{h({computedData:r.computedData$,visibleComputedData:r.visibleComputedData$,params:r.fullParams$,gridAxesSize:r.gridAxesSize$}).pipe(D(async e=>e)).subscribe(e=>{const i=e.params.barWidth?e.params.barWidth:J({axisWidth:e.gridAxesSize.width,groupAmount:e.computedData[0]?e.computedData[0].length:0,barAmountOfGroup:e.visibleComputedData.length,barPadding:e.params.barPadding,barGroupPadding:e.params.barGroupPadding});t.next(i)})}).pipe(c(s),u()),y=h({gridGraphicTransform:r.gridGraphicTransform$,barWidth:L,params:r.fullParams$}).pipe(c(s),D(async t=>t),T(t=>{const e=t.barWidth/2,i=t.params.barRadius===!0?e:t.params.barRadius===!1?0:typeof t.params.barRadius=="number"?t.params.barRadius:0,a=i==0?0:i/t.gridGraphicTransform.scale[0],I=i==0?0:i/t.gridGraphicTransform.scale[1];return[a,I]})),C=r.visibleComputedData$.pipe(c(s),T(t=>{const e=new Set;return t.forEach(i=>{i.forEach(a=>{e.add(a.seriesLabel)})}),Array.from(e)})),P=r.visibleComputedData$.pipe(c(s),T(t=>{const e=new Set;return t.forEach(i=>{i.forEach(a=>{e.add(a.groupLabel)})}),Array.from(e)})),O=new A(t=>{h({seriesLabels:C,barWidth:L,params:r.fullParams$}).pipe(c(s),D(async e=>e)).subscribe(e=>{const i=K(e.barWidth,e.seriesLabels,e.params);t.next(i)})}),b=r.fullChartParams$.pipe(c(s),T(t=>t.transitionDuration),u()),p=new A(t=>{h({groupLabels:P,transitionDuration:b}).pipe(D(async e=>e)).subscribe(e=>{const i=Q(e.groupLabels.length,e.transitionDuration);t.next(i)})}).pipe(c(s),u()),H=new A(t=>{h({groupLabels:P,transitionDuration:b}).pipe(D(async e=>e)).subscribe(e=>{const i=tt(e.groupLabels.length,e.transitionDuration);t.next(i)})}).pipe(c(s),u()),z=r.visibleComputedData$.pipe(c(s),T(t=>{const e=t.length,i=t.reduce((I,E)=>Math.max(I,E.length),0),a=new Array(i).fill(null).map(()=>new Array(e).fill(null));for(let I=0;I<e;I++)for(let E=0;E<i;E++)a[E][I]=t[I][E];return a}));r.gridAxesSize$.pipe(c(s)).subscribe(t=>{const e=[{id:l,width:t.width,height:t.height}];at({defsSelection:m,clipPathData:e})});const v=r.fullChartParams$.pipe(c(s),T(t=>t.highlightTarget),u());h({computedData:r.computedData$,barData$:z,zeroY:f,groupLabels:P,barScale:O,params:r.fullParams$,chartParams:r.fullChartParams$,highlightTarget:v,barWidth:L,transformedBarRadius:y,delayGroup:p,transitionItem:H,SeriesDataMap:r.SeriesDataMap$,GroupDataMap:r.GroupDataMap$}).pipe(c(s),D(async t=>t)).subscribe(t=>{const e=et({selection:S,data:t.barData$,zeroY:t.zeroY,groupLabels:t.groupLabels,barScale:t.barScale,params:t.params,chartParams:t.chartParams,barWidth:t.barWidth,transformedBarRadius:t.transformedBarRadius,delayGroup:t.delayGroup,transitionItem:t.transitionItem});e.on("mouseover",(i,a)=>{i.stopPropagation(),_.event$.next({type:"grid",eventName:"mouseover",pluginName:n,highlightTarget:t.highlightTarget,datum:a,series:t.SeriesDataMap.get(a.seriesLabel),seriesIndex:a.seriesIndex,seriesLabel:a.seriesLabel,groups:t.GroupDataMap.get(a.groupLabel),groupIndex:a.groupIndex,groupLabel:a.groupLabel,event:i,data:t.computedData})}).on("mousemove",(i,a)=>{i.stopPropagation(),_.event$.next({type:"grid",eventName:"mousemove",pluginName:n,highlightTarget:t.highlightTarget,datum:a,series:t.SeriesDataMap.get(a.seriesLabel),seriesIndex:a.seriesIndex,seriesLabel:a.seriesLabel,groups:t.GroupDataMap.get(a.groupLabel),groupIndex:a.groupIndex,groupLabel:a.groupLabel,event:i,data:t.computedData})}).on("mouseout",(i,a)=>{i.stopPropagation(),_.event$.next({type:"grid",eventName:"mouseout",pluginName:n,highlightTarget:t.highlightTarget,datum:a,series:t.SeriesDataMap.get(a.seriesLabel),seriesIndex:a.seriesIndex,seriesLabel:a.seriesLabel,groups:t.GroupDataMap.get(a.groupLabel),groupIndex:a.groupIndex,groupLabel:a.groupLabel,event:i,data:t.computedData})}).on("click",(i,a)=>{i.stopPropagation(),_.event$.next({type:"grid",eventName:"click",pluginName:n,highlightTarget:t.highlightTarget,datum:a,series:t.SeriesDataMap.get(a.seriesLabel),seriesIndex:a.seriesIndex,seriesLabel:a.seriesLabel,groups:t.GroupDataMap.get(a.groupLabel),groupIndex:a.groupIndex,groupLabel:a.groupLabel,event:i,data:t.computedData})}),N.next(e)});const Y=r.gridHighlight$.subscribe();return h({barSelection:N,highlight:r.gridHighlight$,fullChartParams:r.fullChartParams$}).pipe(c(s),D(async t=>t)).subscribe(t=>{rt({selection:t.barSelection,ids:t.highlight,fullChartParams:t.fullChartParams})}),()=>{s.next(void 0),Y.unsubscribe()}}),it={id:"CP_BOTTOM_AND_LEFT_PADDING_WITH_SERIES_HIGHLIGHT",description:"間距下面及左邊留空",data:{padding:{top:60,right:60,bottom:120,left:120},highlightTarget:"series"}},st={id:"CP_BOTTOM_AND_LEFT_PADDING",description:"間距下面及左邊留空",data:{padding:{top:60,right:60,bottom:120,left:120}}},ot={id:"CP_BOTTOM_LONG_PADDING",description:"間距下面加長留空",data:{padding:{top:60,right:60,bottom:140,left:60}}},nt={id:"CP_BOTTOM_LONG_PADDING_WITH_SERIES_HIGHLIGHT",description:"間距下面加長留空及highlight系列",data:{padding:{top:60,right:60,bottom:140,left:60},highlightTarget:"series"}},_t={id:"CP_BOTTOM_PADDING_WITH_GROUP_HIGHLIGHT",description:"間距下面留空及highlight群組",data:{padding:{top:60,right:60,bottom:120,left:60},highlightTarget:"group"}},lt={id:"CP_BOTTOM_PADDING_WITH_GROUP_HIGHLIGHT",description:"間距下面留空及highlight系列",data:{padding:{top:60,right:60,bottom:120,left:60},highlightTarget:"series"}},pt={id:"CP_BOTTOM_PADDING",description:"間距下面留空",data:{padding:{top:60,right:60,bottom:120,left:60}}},Pt={id:"CP_LEFT_PADDING",description:"間距右邊留空",data:{padding:{top:60,right:60,bottom:60,left:120}}},ct={id:"CP_TOP_AND_NO_BOTTOM_PADDING",description:"間距上面留空下面不留空",data:{padding:{top:140,right:120,bottom:0,left:60}}},dt={id:"CP_RIGHT_PADDING",description:"間距右邊留空",data:{padding:{top:60,right:120,bottom:60,left:60}}},gt=Object.freeze(Object.defineProperty({__proto__:null,CP_BOTTOM_AND_LEFT_PADDING:st,CP_BOTTOM_AND_LEFT_PADDING_WITH_SERIES_HIGHLIGHT:it,CP_BOTTOM_LONG_PADDING:ot,CP_BOTTOM_LONG_PADDING_WITH_SERIES_HIGHLIGHT:nt,CP_BOTTOM_PADDING:pt,CP_BOTTOM_PADDING_WITH_GROUP_HIGHLIGHT:_t,CP_BOTTOM_PADDING_WITH_SERIES_HIGHLIGHT:lt,CP_LEFT_PADDING:Pt,CP_RIGHT_PADDING:dt,CP_TOP_AND_NO_BOTTOM_PADDING:ct},Symbol.toStringTag,{value:"Module"})),Tt={},It=Object.freeze(Object.defineProperty({__proto__:null,temp:Tt},Symbol.toStringTag,{value:"Module"})),ut={id:"PP_BUBBLES_SCALING_BY_RADIUS",chartType:"series",pluginName:"Bubbles",description:"以半徑尺寸為比例的泡泡圖",data:{bubbleScaleType:"radius"}},ht={id:"PP_PIE_DONUT",chartType:"series",pluginName:"Pie",description:"甜甜圈圖",data:{innerRadius:.5}},Dt={id:"PP_PIE_HALF_DONUT",chartType:"series",pluginName:"Pie",description:"半圓甜甜圈圖",data:{innerRadius:.5,startAngle:-Math.PI/2,endAngle:Math.PI/2}},mt={id:"PP_PIE_LABELS_HALF_ANGLE",chartType:"series",pluginName:"PieLabels",description:"半圓甜甜圈資料標籤",data:{startAngle:-Math.PI/2,endAngle:Math.PI/2}},Ot={id:"PP_PIE_LABELS_INNER",chartType:"series",pluginName:"PieLabels",description:"圖內資料標籤",data:{labelCentroid:1.3,labelColorType:"primary"}},Et={id:"PP_SERIES_LEGEND_BOTTOM",chartType:"series",pluginName:"SeriesLegend",description:"圓型圖例列點",data:{listRectRadius:7}},St=Object.freeze(Object.defineProperty({__proto__:null,PP_BUBBLES_SCALING_BY_RADIUS:ut,PP_PIE_DONUT:ht,PP_PIE_HALF_DONUT:Dt,PP_PIE_LABELS_HALF_ANGLE:mt,PP_PIE_LABELS_INNER:Ot,PP_SERIES_LEGEND_ROUND:Et},Symbol.toStringTag,{value:"Module"})),Lt={id:"DF_BOTTOM_VALUE_AXIS",chartType:"grid",description:"底部橫向資料圖軸",data:{valueAxis:{position:"bottom"},groupAxis:{position:"left"}}},Gt=Object.freeze(Object.defineProperty({__proto__:null,DF_BOTTOM_VALUE_AXIS:Lt},Symbol.toStringTag,{value:"Module"})),Nt={id:"PP_BARS_ROUND",chartType:"grid",pluginName:"Bars",description:"圓角長條圖",data:{barWidth:0,barPadding:1,barGroupPadding:10,barRadius:!0}},bt={id:"PP_BARS_THIN",chartType:"grid",pluginName:"Bars",description:"圓角長條圖",data:{barWidth:20,barPadding:1,barGroupPadding:10}},At={id:"PP_DOTS_ONLY_SHOW_HIGHLIGHTED",chartType:"grid",pluginName:"Dots",description:"顯示highlight圓點",data:{onlyShowHighlighted:!1}},Rt={id:"PP_DOTS_SOLID",chartType:"grid",pluginName:"Dots",description:"實心圓點",data:{radius:3,fillColorType:"series",onlyShowHighlighted:!1}},Bt={id:"PP_GRID_LEGEND_BOTTOM_WITH_LINE_LIST",chartType:"grid",pluginName:"GridLegend",description:"底部圖例及線條列點",data:{position:"bottom",justify:"center",padding:14,listRectHeight:2}},ft={id:"PP_GRID_LEGEND_BOTTOM",chartType:"grid",pluginName:"GridLegend",description:"底部圖例",data:{position:"bottom",justify:"center",padding:14}},Ht={id:"PP_GROUP_AXIS_ROTATE_LABEL",chartType:"grid",pluginName:"GroupAxis",description:"群組圖軸標籤文字傾斜",data:{tickTextRotate:40}},Mt={id:"PP_LINES_CURVE",chartType:"grid",pluginName:"Lines",description:"圓弧折線圖",data:{lineCurve:"curveMonotoneX",lineWidth:3}},yt=Object.freeze(Object.defineProperty({__proto__:null,PP_BARS_ROUND:Nt,PP_BARS_THIN:bt,PP_DOTS_ONLY_SHOW_HIGHLIGHTED:At,PP_DOTS_SOLID:Rt,PP_GRID_LEGEND_BOTTOM:ft,PP_GRID_LEGEND_BOTTOM_WITH_LINE_LIST:Bt,PP_GROUP_AXIS_ROTATE_LABEL:Ht,PP_LINES_CURVE:Mt},Symbol.toStringTag,{value:"Module"})),Ct={},$t=Object.freeze(Object.defineProperty({__proto__:null,temp:Ct},Symbol.toStringTag,{value:"Module"})),Ut={},xt=Object.freeze(Object.defineProperty({__proto__:null,temp:Ut},Symbol.toStringTag,{value:"Module"})),Ft={},Wt=Object.freeze(Object.defineProperty({__proto__:null,temp:Ft},Symbol.toStringTag,{value:"Module"})),jt={},wt=Object.freeze(Object.defineProperty({__proto__:null,temp:jt},Symbol.toStringTag,{value:"Module"})),zt={},vt=Object.freeze(Object.defineProperty({__proto__:null,temp:zt},Symbol.toStringTag,{value:"Module"})),Yt={},Vt=Object.freeze(Object.defineProperty({__proto__:null,temp:Yt},Symbol.toStringTag,{value:"Module"})),Xt={},kt=Object.freeze(Object.defineProperty({__proto__:null,temp:Xt},Symbol.toStringTag,{value:"Module"})),Zt={},qt=Object.freeze(Object.defineProperty({__proto__:null,temp:Zt},Symbol.toStringTag,{value:"Module"})),F={series:It,grid:Gt,multiGrid:$t,multiValue:Wt,relationship:vt,tree:kt},M={series:St,grid:yt,multiGrid:xt,multiValue:wt,relationship:Vt,tree:qt},w=(o,n)=>{const _=n.chartParamsId?gt[n.chartParamsId].data:void 0,r=F[o][n.dataFormatterId]?F[o][n.dataFormatterId].data:void 0,s=n.allPluginParamsIds?n.allPluginParamsIds.reduce((l,d)=>{if(M[o][d]){const m=M[o][d].pluginName;l[m]=M[o][d].data}return l},{}):void 0;return{chartParams:_,dataFormatter:r,allPluginParams:s}},G=o=>w("series",o),g=o=>w("grid",o),ee=G({allPluginParamsIds:[],description:"基本Series參數"}),ae=G({allPluginParamsIds:["PP_BUBBLES_SCALING_BY_RADIUS","PP_SERIES_LEGEND_ROUND"],description:"以半徑尺寸為比例的泡泡圖"}),re=G({allPluginParamsIds:["PP_PIE_LABELS_INNER","PP_SERIES_LEGEND_ROUND"],description:"圓餅圖及內部資料標籤"}),ie=G({allPluginParamsIds:["PP_PIE_DONUT","PP_SERIES_LEGEND_ROUND"],description:"甜甜圈圖"}),se=G({chartParamsId:"CP_TOP_AND_NO_BOTTOM_PADDING",allPluginParamsIds:["PP_PIE_HALF_DONUT","PP_PIE_LABELS_HALF_ANGLE","PP_SERIES_LEGEND_ROUND"],description:"半圓甜甜圈圖"}),oe=g({chartParamsId:"CP_BOTTOM_PADDING",allPluginParamsIds:["PP_GRID_LEGEND_BOTTOM"],description:"基本Grid參數"}),ne=g({chartParamsId:"CP_BOTTOM_LONG_PADDING",allPluginParamsIds:["PP_GROUP_AXIS_ROTATE_LABEL","PP_GRID_LEGEND_BOTTOM"],description:"傾斜標籤"}),_e=g({chartParamsId:"CP_BOTTOM_AND_LEFT_PADDING",dataFormatterId:"DF_BOTTOM_VALUE_AXIS",allPluginParamsIds:["PP_GRID_LEGEND_BOTTOM"],description:"橫向圓角長條圖"}),le=g({chartParamsId:"CP_BOTTOM_PADDING",allPluginParamsIds:["PP_BARS_ROUND","PP_GRID_LEGEND_BOTTOM"],description:"圓角長條圖"}),pe=g({chartParamsId:"CP_BOTTOM_AND_LEFT_PADDING",dataFormatterId:"DF_BOTTOM_VALUE_AXIS",allPluginParamsIds:["PP_BARS_ROUND","PP_GRID_LEGEND_BOTTOM"],description:"橫向圓角長條圖"}),Pe=g({chartParamsId:"CP_BOTTOM_PADDING",allPluginParamsIds:["PP_BARS_THIN","PP_GRID_LEGEND_BOTTOM"],description:"細長條圖"}),ce=g({chartParamsId:"CP_BOTTOM_AND_LEFT_PADDING",dataFormatterId:"DF_BOTTOM_VALUE_AXIS",allPluginParamsIds:["PP_BARS_ROUND","PP_GRID_LEGEND_BOTTOM"],description:"橫向圓角長條圖"}),de=g({chartParamsId:"CP_BOTTOM_PADDING_WITH_SERIES_HIGHLIGHT",allPluginParamsIds:["PP_GRID_LEGEND_BOTTOM"],description:"基本Grid參數"}),ge=g({chartParamsId:"CP_BOTTOM_LONG_PADDING_WITH_SERIES_HIGHLIGHT",allPluginParamsIds:["PP_GROUP_AXIS_ROTATE_LABEL","PP_GRID_LEGEND_BOTTOM"],description:"傾斜標籤"}),Te=g({chartParamsId:"CP_BOTTOM_AND_LEFT_PADDING_WITH_SERIES_HIGHLIGHT",dataFormatterId:"DF_BOTTOM_VALUE_AXIS",allPluginParamsIds:["PP_GRID_LEGEND_BOTTOM"],description:"橫向圓角長條圖"}),Ie=g({chartParamsId:"CP_BOTTOM_PADDING_WITH_SERIES_HIGHLIGHT",allPluginParamsIds:["PP_LINES_CURVE","PP_GRID_LEGEND_BOTTOM_WITH_LINE_LIST"],description:"弧線折線圖"}),ue=g({chartParamsId:"CP_BOTTOM_PADDING_WITH_GROUP_HIGHLIGHT",allPluginParamsIds:["PP_DOTS_ONLY_SHOW_HIGHLIGHTED","PP_GRID_LEGEND_BOTTOM_WITH_LINE_LIST"],description:"折線圖及Highlight Group圓點"});export{te as B,ee as P,ae as a,re as b,ie as c,se as d,oe as e,ne as f,_e as g,le as h,pe as i,Pe as j,ce as k,de as l,ge as m,Te as n,Ie as o,ue as p};
