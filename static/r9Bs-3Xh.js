import{ak as R,S as P,t as y,s as b,m as $,$ as _,al as B,d as L,j as C,k as x,g as w,x as v,aL as M,a4 as k,L as z,aM as F,aN as H,a as j,aO as I,aP as E,aQ as G,a3 as J}from"./DXm0Mz1x.js";import{s as X,m as U}from"./C0IpQkfF.js";import{m as O,a as V}from"./goxUyvVz.js";import{f as Q}from"./BuQ8Ff8B.js";const A="PieLabels",K=w(A,"label-g"),Z=w(A,"line-g"),ee=w(A,"text"),W=2,te={name:A,defaultParams:_,layerIndex:B,validator:(g,{validateColumns:t})=>t(g,{outerRadius:{toBeTypes:["number"]},outerRadiusWhileHighlight:{toBeTypes:["number"]},startAngle:{toBeTypes:["number"]},endAngle:{toBeTypes:["number"]},labelCentroid:{toBeTypes:["number"]},labelFn:{toBeTypes:["Function"]},labelColorType:{toBeOption:"ColorType"}})};function ie({pieData:g,arc:t,arcMouseover:p,labelCentroid:r,lineStartCentroid:l,fullParams:h}){return g.map((e,n)=>{const[i,o]=t.centroid(e),[u,s]=p.centroid(e),f=h.labelFn(e.data);return{pieDatum:e,arcIndex:n,arcLabels:f.split(`
`),lineStartX:i*l,lineStartY:o*l,lineStartMouseoverX:u*l,lineStartMouseoverY:s*l,x:i*r,y:o*r,mouseoverX:u*r,mouseoverY:s*r,textWidth:0,collisionShiftX:0,collisionShiftY:0,quadrant:i>=0&&o<=0?1:i<0&&o<=0?2:i<0&&o>0?3:4}}).filter(e=>e.pieDatum.data.visible)}function ae({labelGSelection:g,data:t,fullParams:p,fullChartParams:r,textSizePx:l}){const h=g.selectAll("text").data(t,e=>e.pieDatum.id).join("text").classed(ee,!0).attr("font-weight","bold").attr("text-anchor",e=>e.quadrant==1||e.quadrant==4?"start":"end").style("dominant-baseline",e=>e.quadrant==1||e.quadrant==2?"auto":"hanging").style("cursor",e=>r.highlightTarget&&r.highlightTarget!="none"?"pointer":"none").attr("font-size",r.styles.textSize).attr("x",0).attr("y",0).attr("fill",(e,n)=>v({datum:e.pieDatum.data,colorType:p.labelColorType,fullChartParams:r})).each((e,n,i)=>{M(b(i[n]),{textArr:e.arcLabels,textSizePx:l,quadrant:e.quadrant})});return h.transition().attr("transform",e=>"translate("+e.x+","+e.y+")"),h}function ne(g,t,p){const r=g.nodes(),l=p,h=r.map((e,n)=>{const i=e.getBBox(),o=[t[n].x,t[n].y];return{node:e,x:o[0],y:o[1],width:i.width,height:i.height}});for(let e=0;e<h.length;e++){const n=h[e];for(let i=e+1;i<h.length;i++){const o=h[i];t[e].textWidth=n.width;const u=n.x+t[e].collisionShiftX,s=n.y+t[e].collisionShiftY,f=o.x+t[i].collisionShiftX,a=o.y+t[i].collisionShiftY;if(!(u+n.width/2<f-o.width/2||u-n.width/2>f+o.width/2||s+n.height/2<a-o.height/2||s-n.height/2>a+o.height/2)){if(t[i].quadrant==2){const c=a>s?-l*2:-l;t[i].collisionShiftY+=c}else if(t[i].quadrant==4){const c=a>s?l:l*2;t[i].collisionShiftY+=c}}}}for(let e=h.length-1;e>=0;e--){const n=h[e];for(let i=e-1;i>=0;i--){const o=h[i];t[e].textWidth=n.width;const u=n.x+t[e].collisionShiftX,s=n.y+t[e].collisionShiftY,f=o.x+t[i].collisionShiftX,a=o.y+t[i].collisionShiftY;if(!(u+n.width/2<f-o.width/2||u-n.width/2>f+o.width/2||s+n.height/2<a-o.height/2||s-n.height/2>a+o.height/2)){if(t[i].quadrant==1){const c=a>s?-l*2:-l;t[i].collisionShiftY+=c}else if(t[i].quadrant==3){const c=a>s?l:l*2;t[i].collisionShiftY+=c}}}}g.data(t).transition().attr("transform",e=>`translate(${e.x+e.collisionShiftX},${e.y+e.collisionShiftY})`)}function se({lineGSelection:g,data:t,fullParams:p,fullChartParams:r}){const l=t.filter(e=>e.collisionShiftX||e.collisionShiftY),h=g.selectAll("polyline").data(l,e=>e.pieDatum.id).join("polyline").attr("stroke",e=>v({datum:e.pieDatum.data,colorType:p.labelColorType,fullChartParams:r})).attr("stroke-width",1).attr("fill","none").attr("points",e=>[[e.lineStartX,e.lineStartY],[e.lineStartX,e.lineStartY]]);return h.transition().attr("points",e=>{let n=e.x+e.collisionShiftX,i=e.y+e.collisionShiftY;return[[n,i],[e.lineStartX,e.lineStartY]]}),h}function le({textSelection:g,lineSelection:t,ids:p,fullChartParams:r}){if(g.interrupt("highlight"),t.interrupt("highlight"),!p.length){g.transition("highlight").duration(200).attr("transform",l=>`translate(${l.x+l.collisionShiftX},${l.y+l.collisionShiftY})`).style("opacity",1),t.transition("highlight").duration(200).style("opacity",1);return}g.each((l,h,e)=>{const n=b(e[h]);p.includes(l.pieDatum.id)?n.style("opacity",1).transition("highlight").duration(200).attr("transform",i=>i.collisionShiftX||i.collisionShiftY?`translate(${i.x+i.collisionShiftX},${i.y+i.collisionShiftY})`:`translate(${i.mouseoverX+i.collisionShiftX},${i.mouseoverY+i.collisionShiftY})`):n.style("opacity",r.styles.unhighlightedOpacity).transition("highlight").duration(200).attr("transform",i=>`translate(${i.x+i.collisionShiftX},${i.y+i.collisionShiftY})`)}),t.each((l,h,e)=>{const n=b(e[h]);p.includes(l.pieDatum.data.id)?n.style("opacity",1).transition("highlight").duration(200):n.style("opacity",r.styles.unhighlightedOpacity).transition("highlight").duration(200)})}function re(g,t){const p=new P;t.containerSelection.selectAll("g").remove();const r=t.containerSelection.append("g");r.classed(Z,!0);const l=t.containerSelection.append("g");l.classed(K,!0);const h=new P,e=new P;let n=[];const i=t.seriesContainerPosition$.pipe(y(p),$(u=>u.width<u.height?u.width:u.height),L()),o=t.fullParams$.pipe(y(p),$(u=>u.labelCentroid>=W?W:u.labelCentroid));return C({shorterSideWith:i,containerVisibleComputedLayoutData:t.containerVisibleComputedLayoutData$,fullParams:t.fullParams$,fullChartParams:t.fullChartParams$,textSizePx:t.textSizePx$,lineStartCentroid:o}).pipe(y(p),x(async u=>u)).subscribe(u=>{const s=O({axisWidth:u.shorterSideWith,innerRadius:0,outerRadius:u.fullParams.outerRadius,padAngle:0,cornerRadius:0}),f=O({axisWidth:u.shorterSideWith,innerRadius:0,outerRadius:u.fullParams.outerRadiusWhileHighlight,padAngle:0,cornerRadius:0}),a=U({data:u.containerVisibleComputedLayoutData,startAngle:u.fullParams.startAngle,endAngle:u.fullParams.endAngle});n=ie({pieData:a,arc:s,arcMouseover:f,labelCentroid:u.fullParams.labelCentroid,lineStartCentroid:u.lineStartCentroid,fullParams:u.fullParams}),r.selectAll("polyline").remove();const c=ae({labelGSelection:l,data:n,fullParams:u.fullParams,fullChartParams:u.fullChartParams,textSizePx:u.textSizePx});setTimeout(()=>{ne(c,n,u.textSizePx);const m=se({lineGSelection:r,data:n,fullParams:u.fullParams,fullChartParams:u.fullChartParams});e.next(m)},1e3),h.next(c)}),C({textSelection:h,lineSelection:e,highlight:t.seriesHighlight$.pipe($(u=>u.map(s=>s.id))),fullChartParams:t.fullChartParams$}).pipe(y(p),x(async u=>u)).subscribe(u=>{le({textSelection:u.textSelection,lineSelection:u.lineSelection,ids:u.highlight,fullChartParams:u.fullChartParams})}),()=>{p.next(void 0)}}const Ae=R(te)(({selection:g,observer:t,subject:p})=>{const r=new P,{seriesCenterSelection$:l}=X({selection:g,pluginName:A,separateSeries$:t.separateSeries$,seriesLabels$:t.seriesLabels$,seriesContainerPosition$:t.seriesContainerPosition$}),h=[];return l.pipe(y(r)).subscribe(e=>{h.forEach(n=>n()),e.each((n,i,o)=>{const u=b(o[i]),s=t.visibleComputedLayoutData$.pipe(y(r),$(a=>a[i]??a[0])),f=t.seriesContainerPosition$.pipe(y(r),$(a=>a[i]??a[0]));h[i]=re(A,{containerSelection:u,containerVisibleComputedLayoutData$:s,fullParams$:t.fullParams$,fullChartParams$:t.fullChartParams$,textSizePx$:t.textSizePx$,seriesHighlight$:t.seriesHighlight$,seriesContainerPosition$:f,event$:p.event$})})}),()=>{r.next(void 0)}}),Y="Rose",oe=Math.PI*2,ue={name:Y,defaultParams:k,layerIndex:z,validator:(g,{validateColumns:t})=>t(g,{outerRadius:{toBeTypes:["number"]},padAngle:{toBeTypes:["number"]},strokeColorType:{toBeOption:"ColorType"},strokeWidth:{toBeTypes:["number"]},cornerRadius:{toBeTypes:["number"]},arcScaleType:{toBe:'"area" | "radius"',test:r=>r==="area"||r==="radius"},angleIncreaseWhileHighlight:{toBeTypes:["number"]}})};function he({cornerRadius:g,outerRadius:t,axisWidth:p,maxValue:r,arcScaleType:l,fullParams:h}){const e=p/2*t,n=l==="area"?.5:1,i=E().domain([0,r]).range([0,e]).exponent(n);return o=>{const u=i(o.prevValue),s=i(o.value),f=G(u,s);return a=>{const c=f(a);return V().innerRadius(0).outerRadius(c).padAngle(h.padAngle).padRadius(c).cornerRadius(g)(o)}}}function ce({pathSelection:g,ids:t,fullParams:p,fullChartParams:r,tweenArc:l}){if(g.interrupt("highlight"),!t.length){g.transition("highlight").style("opacity",1).attr("d",h=>l(h)(1));return}g.each((h,e,n)=>{const i=b(n[e]);t.includes(h.data.id)?i.style("opacity",1).transition("highlight").ease(I).duration(500).attr("d",o=>l({...o,startAngle:o.startAngle-p.angleIncreaseWhileHighlight,endAngle:o.endAngle+p.angleIncreaseWhileHighlight})(1)):i.style("opacity",r.styles.unhighlightedOpacity).transition("highlight").attr("d",o=>l(o)(1))})}function pe(g,t){const p=new P,r=w(g,"path");let l=[];const h=t.seriesContainerPosition$.pipe(y(p),$(a=>a.width<a.height?a.width:a.height),L()),e=C({containerVisibleComputedLayoutData:t.containerVisibleComputedLayoutData$,fullParams:t.fullParams$}).pipe(y(p),x(async a=>a),$(a=>{const c=oe/a.containerVisibleComputedLayoutData.length;return a.containerVisibleComputedLayoutData.map((m,S)=>({id:m.id,data:m,index:S,value:m.value,startAngle:c*S,endAngle:c*(S+1),padAngle:a.fullParams.padAngle,prevValue:l[S]&&l[S].id===m.id?l[S].value:0}))})),n=t.fullChartParams$.pipe(y(p),$(a=>a.highlightTarget),L()),i=t.visibleComputedLayoutData$.pipe($(a=>Math.max(...a.flat().map(c=>c.value))),L()),o=C({fullParams:t.fullParams$,axisWidth:h,maxValue:i}).pipe(y(p),x(async a=>a),$(a=>he({cornerRadius:a.fullParams.cornerRadius,outerRadius:a.fullParams.outerRadius,axisWidth:a.axisWidth,maxValue:a.maxValue,arcScaleType:a.fullParams.arcScaleType,fullParams:a.fullParams}))),u=t.fullChartParams$.pipe(y(p),$(a=>a.transitionDuration),L()),s=new F(!1),f=new H(a=>{C({pieData:e,tweenArc:o,transitionDuration:u,fullParams:t.fullParams$,fullChartParams:t.fullChartParams$}).pipe(y(p),x(async c=>c)).subscribe(c=>{const m=c.pieData.map((d,D)=>(d.prevValue=l[D]&&l[D].id===d.id?l[D].value:0,d));s.next(!0);const S=t.containerSelection.selectAll("path").data(m,d=>d.id).join("path").classed(r,!0).style("cursor","pointer").attr("fill",(d,D)=>d.data.color).attr("stroke",(d,D)=>v({datum:d.data,colorType:c.fullParams.strokeColorType,fullChartParams:c.fullChartParams})).attr("stroke-width",c.fullParams.strokeWidth);S.interrupt("graphicMove"),S.transition("graphicMove").duration(c.transitionDuration).attrTween("d",c.tweenArc).on("end",()=>{a.next(S),s.next(!1)}),l=Object.assign([],m)})}).pipe(j(1));return C({pathSelection:f,SeriesDataMap:t.SeriesDataMap$,computedData:t.computedData$,highlightTarget:n}).pipe(y(p),x(async a=>a)).subscribe(a=>{a.pathSelection.on("mouseover",(c,m)=>{c.stopPropagation(),t.event$.next({type:"series",eventName:"mouseover",pluginName:g,highlightTarget:a.highlightTarget,datum:m.data,series:a.SeriesDataMap.get(m.data.seriesLabel),seriesIndex:m.data.seriesIndex,seriesLabel:m.data.seriesLabel,event:c,data:a.computedData})}).on("mousemove",(c,m)=>{c.stopPropagation(),t.event$.next({type:"series",eventName:"mousemove",pluginName:g,highlightTarget:a.highlightTarget,datum:m.data,series:a.SeriesDataMap.get(m.data.seriesLabel),seriesIndex:m.data.seriesIndex,seriesLabel:m.data.seriesLabel,event:c,data:a.computedData})}).on("mouseout",(c,m)=>{c.stopPropagation(),t.event$.next({type:"series",eventName:"mouseout",pluginName:g,highlightTarget:a.highlightTarget,datum:m.data,series:a.SeriesDataMap.get(m.data.seriesLabel),seriesIndex:m.data.seriesIndex,seriesLabel:m.data.seriesLabel,event:c,data:a.computedData})}).on("click",(c,m)=>{c.stopPropagation(),t.event$.next({type:"series",eventName:"click",pluginName:g,highlightTarget:a.highlightTarget,datum:m.data,series:a.SeriesDataMap.get(m.data.seriesLabel),seriesIndex:m.data.seriesIndex,seriesLabel:m.data.seriesLabel,event:c,data:a.computedData})})}),C({pathSelection:f,highlight:t.seriesHighlight$.pipe($(a=>a.map(c=>c.id))),fullParams:t.fullParams$,fullChartParams:t.fullChartParams$,tweenArc:o,isTransitionMoving:s}).pipe(y(p),x(async a=>a),Q(a=>!a.isTransitionMoving)).subscribe(a=>{ce({pathSelection:a.pathSelection,ids:a.highlight,fullParams:a.fullParams,fullChartParams:a.fullChartParams,tweenArc:a.tweenArc})}),()=>{p.next(void 0)}}const Te=R(ue)(({selection:g,name:t,subject:p,observer:r})=>{const l=new P,{seriesCenterSelection$:h}=X({selection:g,pluginName:Y,separateSeries$:r.separateSeries$,seriesLabels$:r.seriesLabels$,seriesContainerPosition$:r.seriesContainerPosition$}),e=[];return h.pipe(y(l)).subscribe(n=>{e.forEach(i=>i()),n.each((i,o,u)=>{const s=b(u[o]),f=r.visibleComputedLayoutData$.pipe(y(l),$(c=>JSON.parse(JSON.stringify(c[o]??c[0])))),a=r.seriesContainerPosition$.pipe(y(l),$(c=>JSON.parse(JSON.stringify(c[o]??c[0]))));e[o]=pe(Y,{containerSelection:s,computedData$:r.computedData$,visibleComputedData$:r.visibleComputedData$,visibleComputedLayoutData$:r.visibleComputedLayoutData$,containerVisibleComputedLayoutData$:f,SeriesDataMap$:r.SeriesDataMap$,fullParams$:r.fullParams$,fullChartParams$:r.fullChartParams$,seriesHighlight$:r.seriesHighlight$,seriesContainerPosition$:a,event$:p.event$})})}),()=>{l.next(void 0),e.forEach(n=>n())}}),T="RoseLabels",ge=w(T,"label-g"),me=w(T,"line-g"),fe=w(T,"text"),N=2,ye={name:T,defaultParams:J,layerIndex:B,validator:(g,{validateColumns:t})=>t(g,{outerRadius:{toBeTypes:["number"]},labelCentroid:{toBeTypes:["number"]},labelFn:{toBeTypes:["Function"]},labelColorType:{toBeOption:"ColorType"},arcScaleType:{toBe:'"area" | "radius"',test:r=>r==="area"||r==="radius"}})};function Se({pieData:g,labelCentroid:t,arcScaleType:p,maxValue:r,axisWidth:l,outerRadius:h,lineStartCentroid:e,fullParams:n}){const i=l/2*h,o=p==="area"?.5:1,u=E().domain([0,r]).range([0,i]).exponent(o);return g.map((s,f)=>{const a=u(s.value),c=V().innerRadius(0).outerRadius(a).padAngle(0).padRadius(a).cornerRadius(0),[m,S]=c.centroid(s),[d,D]=[m,S],q=n.labelFn(s.data);return{pieDatum:s,arcIndex:f,arcLabels:q.split(`
`),lineStartX:m*e,lineStartY:S*e,lineStartMouseoverX:d*e,lineStartMouseoverY:D*e,x:m*t,y:S*t,mouseoverX:d*t,mouseoverY:D*t,textWidth:0,collisionShiftX:0,collisionShiftY:0,quadrant:m>=0&&S<=0?1:m<0&&S<=0?2:m<0&&S>0?3:4}}).filter(s=>s.pieDatum.data.visible)}function $e({labelGSelection:g,data:t,fullParams:p,fullChartParams:r,textSizePx:l}){const h=g.selectAll("text").data(t,e=>e.pieDatum.id).join("text").classed(fe,!0).attr("font-weight","bold").attr("text-anchor",e=>e.quadrant==1||e.quadrant==4?"start":"end").style("dominant-baseline",e=>e.quadrant==1||e.quadrant==2?"auto":"hanging").style("cursor",e=>r.highlightTarget&&r.highlightTarget!="none"?"pointer":"none").attr("font-size",r.styles.textSize).attr("fill",(e,n)=>v({datum:e.pieDatum.data,colorType:p.labelColorType,fullChartParams:r})).each((e,n,i)=>{M(b(i[n]),{textArr:e.arcLabels,textSizePx:l,quadrant:e.quadrant})});return h.transition().attr("transform",e=>"translate("+e.x+","+e.y+")"),h}function de(g,t,p){const r=g.nodes(),l=p,h=r.map((e,n)=>{const i=e.getBBox(),o=[t[n].x,t[n].y];return{node:e,x:o[0],y:o[1],width:i.width,height:i.height}});for(let e=0;e<h.length;e++){const n=h[e];for(let i=e+1;i<h.length;i++){const o=h[i];t[e].textWidth=n.width;const u=n.x+t[e].collisionShiftX,s=n.y+t[e].collisionShiftY,f=o.x+t[i].collisionShiftX,a=o.y+t[i].collisionShiftY;if(!(u+n.width/2<f-o.width/2||u-n.width/2>f+o.width/2||s+n.height/2<a-o.height/2||s-n.height/2>a+o.height/2)){if(t[i].quadrant==2){const c=a>s?-l*2:-l;t[i].collisionShiftY+=c}else if(t[i].quadrant==4){const c=a>s?l:l*2;t[i].collisionShiftY+=c}}}}for(let e=h.length-1;e>=0;e--){const n=h[e];for(let i=e-1;i>=0;i--){const o=h[i];t[e].textWidth=n.width;const u=n.x+t[e].collisionShiftX,s=n.y+t[e].collisionShiftY,f=o.x+t[i].collisionShiftX,a=o.y+t[i].collisionShiftY;if(!(u+n.width/2<f-o.width/2||u-n.width/2>f+o.width/2||s+n.height/2<a-o.height/2||s-n.height/2>a+o.height/2)){if(t[i].quadrant==1){const c=a>s?-l*2:-l;t[i].collisionShiftY+=c}else if(t[i].quadrant==3){const c=a>s?l:l*2;t[i].collisionShiftY+=c}}}}g.data(t).transition().attr("transform",e=>`translate(${e.x+e.collisionShiftX},${e.y+e.collisionShiftY})`)}function Pe({lineGSelection:g,data:t,fullParams:p,fullChartParams:r}){const l=t.filter(e=>e.collisionShiftX||e.collisionShiftY),h=g.selectAll("polyline").data(l,e=>e.pieDatum.id).join("polyline").attr("stroke",e=>v({datum:e.pieDatum.data,colorType:p.labelColorType,fullChartParams:r})).attr("stroke-width",1).attr("fill","none").attr("points",e=>[[e.lineStartX,e.lineStartY],[e.lineStartX,e.lineStartY]]);return h.transition().attr("points",e=>{let n=e.x+e.collisionShiftX,i=e.y+e.collisionShiftY;return[[n,i],[e.lineStartX,e.lineStartY]]}),h}function be({textSelection:g,lineSelection:t,ids:p,fullChartParams:r}){if(g.interrupt("highlight"),t.interrupt("highlight"),!p.length){g.transition("highlight").duration(200).attr("transform",l=>`translate(${l.x+l.collisionShiftX},${l.y+l.collisionShiftY})`).style("opacity",1),t.transition("highlight").duration(200).style("opacity",1);return}g.each((l,h,e)=>{const n=b(e[h]);p.includes(l.pieDatum.data.id)?n.style("opacity",1).transition("highlight").duration(200).attr("transform",i=>`translate(${i.mouseoverX+i.collisionShiftX},${i.mouseoverY+i.collisionShiftY})`):n.style("opacity",r.styles.unhighlightedOpacity).transition("highlight").duration(200).attr("transform",i=>`translate(${i.x+i.collisionShiftX},${i.y+i.collisionShiftY})`)}),t.each((l,h,e)=>{const n=b(e[h]);p.includes(l.pieDatum.data.id)?n.style("opacity",1).transition("highlight").duration(200):n.style("opacity",r.styles.unhighlightedOpacity).transition("highlight").duration(200)})}function Ce(g,t){const p=new P;t.containerSelection.selectAll("g").remove();const r=t.containerSelection.append("g");r.classed(me,!0);const l=t.containerSelection.append("g");l.classed(ge,!0);const h=new P,e=new P;let n=[];const i=t.seriesContainerPosition$.pipe(y(p),$(s=>s.width<s.height?s.width:s.height),L()),o=t.visibleComputedLayoutData$.pipe($(s=>Math.max(...s.flat().map(f=>f.value))),L()),u=t.fullParams$.pipe(y(p),$(s=>s.labelCentroid>=N?N:s.labelCentroid));return C({shorterSideWith:i,containerVisibleComputedLayoutData:t.containerVisibleComputedLayoutData$,maxValue:o,fullParams:t.fullParams$,fullChartParams:t.fullChartParams$,textSizePx:t.textSizePx$,lineStartCentroid:u}).pipe(y(p),x(async s=>s)).subscribe(s=>{const f=Math.PI*2/s.containerVisibleComputedLayoutData.length,a=s.containerVisibleComputedLayoutData.map((m,S)=>({id:m.id,data:m,index:S,value:m.value,startAngle:f*S,endAngle:f*(S+1),padAngle:0}));n=Se({pieData:a,labelCentroid:s.fullParams.labelCentroid,arcScaleType:s.fullParams.arcScaleType,maxValue:s.maxValue,axisWidth:s.shorterSideWith,outerRadius:s.fullParams.outerRadius,lineStartCentroid:s.lineStartCentroid,fullParams:s.fullParams}),r.selectAll("polyline").remove();const c=$e({labelGSelection:l,data:n,fullParams:s.fullParams,fullChartParams:s.fullChartParams,textSizePx:s.textSizePx});setTimeout(()=>{de(c,n,s.textSizePx);const m=Pe({lineGSelection:r,data:n,fullParams:s.fullParams,fullChartParams:s.fullChartParams});e.next(m)},1e3),h.next(c)}),C({textSelection:h,lineSelection:e,highlight:t.seriesHighlight$.pipe($(s=>s.map(f=>f.id))),fullChartParams:t.fullChartParams$}).pipe(y(p),x(async s=>s)).subscribe(s=>{be({textSelection:s.textSelection,lineSelection:s.lineSelection,ids:s.highlight,fullChartParams:s.fullChartParams})}),()=>{p.next(void 0)}}const ve=R(ye)(({selection:g,observer:t,subject:p})=>{const r=new P,{seriesCenterSelection$:l}=X({selection:g,pluginName:T,separateSeries$:t.separateSeries$,seriesLabels$:t.seriesLabels$,seriesContainerPosition$:t.seriesContainerPosition$}),h=[];return l.pipe(y(r)).subscribe(e=>{h.forEach(n=>n()),e.each((n,i,o)=>{const u=b(o[i]),s=t.visibleComputedLayoutData$.pipe(y(r),$(a=>JSON.parse(JSON.stringify(a[i]??a[0])))),f=t.seriesContainerPosition$.pipe(y(r),$(a=>JSON.parse(JSON.stringify(a[i]??a[0]))));h[i]=Ce(T,{containerSelection:u,visibleComputedLayoutData$:t.visibleComputedLayoutData$,containerVisibleComputedLayoutData$:s,fullParams$:t.fullParams$,fullChartParams$:t.fullChartParams$,textSizePx$:t.textSizePx$,seriesHighlight$:t.seriesHighlight$,seriesContainerPosition$:f,event$:p.event$})})}),()=>{r.next(void 0)}});export{Ae as P,Te as R,ve as a};
