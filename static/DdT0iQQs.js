function B(s,{text:i,radius:a,lineHeight:o,isBreakAll:c=!1,limit:u=0}){if(s==null||i==null){console.error("selection or text is not defined");return}a==null&&(a=s.node().getBBox().width/2);function g(n){let t;return c?t=n.split(""):t=n.split(/\s+/g),t[t.length-1]||t.pop(),t[0]||t.shift(),t}function m(n,t){return n&&t&&n.length>t&&(n=n.substring(0,t)+"..."),n}function T(n){var e;const t=document.createElement("canvas").getContext("2d");return((e=t==null?void 0:t.measureText(n))==null?void 0:e.width)??0}function w(n){const t=T(n.trim());return Math.sqrt(t*o)}function y(n,t){let e={width:0,text:""},l=1/0;const d=[];let f=" ";c&&(f="");for(let r=0,p=n.length;r<p;++r){const x=(e.text?e.text+f:"")+n[r],h=T(x);(l+h)/2<t?(e.width=l=h,e.text=x):(l=T(n[r]),e={width:l,text:n[r]},d.push(e))}return d}function W(n){let t=0;for(let e=0,l=n.length;e<l;++e){const d=(Math.abs(e-l/2+.5)+.5)*o,f=n[e].width/2;t=Math.max(t,Math.sqrt(f**2+d**2))}return t}function b(n,t){u>0&&(t=m(t,u));const e=g(t),l=w(t),d=y(e,l),f=W(d);let r=n.select("text");r.size()||(r=n.append("text")),r.attr("transform",`translate(0,0) scale(${a/f})`);const p=r.selectAll("tspan").data(d),x=p.enter().append("tspan").attr("x",0).merge(p).attr("y",(h,M)=>(M-d.length/2+.8)*o).text(h=>h.text);return p.exit().remove(),p.merge(x)}return b(s,i)}function $(s,{textArr:i,textSizePx:a,groupAxisPosition:o}){s.text(null);const c=Number(s.attr("x"));let u=Number(s.attr("y"));o==="top"&&(u-=(i.length-1)*a),s.selectAll("tspan").data(i).join("tspan").attr("x",c).attr("y",(g,m)=>u+m*a).text(g=>g)}function j(s,{textArr:i,textSizePx:a,quadrant:o}){s.selectAll("tspan").data(i).join("tspan").attr("x",0).attr("y",(c,u)=>o==1||o==2?-(i.length-1-u)*a:u*a).text(c=>c)}export{B as a,$ as b,j as r};
