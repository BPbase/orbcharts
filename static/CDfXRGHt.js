import{ao as L,a as P,t as S,s as b,m as $,a0 as _,ap as N,d as A,k as C,l as x,aQ as O,g as w,u as R,aR as E,a8 as k,L as z,aS as F,aT as H,b as I,aU as j,aV as M,aW as G,aX as V,a7 as J}from"./Cc0KHcL0.js";import{s as X,m as U}from"./CAQe0vSz.js";import{f as Q}from"./2XqyCpLW.js";const T="PieLabels",K=w(T,"label-g"),Z=w(T,"line-g"),ee=w(T,"text"),W=2,te={name:T,defaultParams:_,layerIndex:N,validator:(g,{validateColumns:t})=>t(g,{outerRadius:{toBeTypes:["number"]},outerRadiusWhileHighlight:{toBeTypes:["number"]},startAngle:{toBeTypes:["number"]},endAngle:{toBeTypes:["number"]},labelCentroid:{toBeTypes:["number"]},labelFn:{toBeTypes:["Function"]},labelColorType:{toBeOption:"ColorType"}})};function ie({pieData:g,arc:t,arcMouseover:p,labelCentroid:l,lineStartCentroid:r,fullParams:u}){return g.map((e,n)=>{const[i,o]=t.centroid(e),[h,s]=p.centroid(e),f=u.labelFn(e.data);return{pieDatum:e,arcIndex:n,arcLabels:f.split(`
`),lineStartX:i*r,lineStartY:o*r,lineStartMouseoverX:h*r,lineStartMouseoverY:s*r,x:i*l,y:o*l,mouseoverX:h*l,mouseoverY:s*l,textWidth:0,collisionShiftX:0,collisionShiftY:0,quadrant:i>=0&&o<=0?1:i<0&&o<=0?2:i<0&&o>0?3:4}}).filter(e=>e.pieDatum.data.visible)}function ae({labelGSelection:g,data:t,fullParams:p,fullChartParams:l,textSizePx:r}){const u=g.selectAll("text").data(t,e=>e.pieDatum.id).join("text").classed(ee,!0).attr("font-weight","bold").attr("text-anchor",e=>e.quadrant==1||e.quadrant==4?"start":"end").style("dominant-baseline",e=>e.quadrant==1||e.quadrant==2?"auto":"hanging").style("cursor",e=>l.highlightTarget&&l.highlightTarget!="none"?"pointer":"none").attr("font-size",l.styles.textSize).attr("x",0).attr("y",0).attr("fill",(e,n)=>R({datum:e.pieDatum.data,colorType:p.labelColorType,fullChartParams:l})).each((e,n,i)=>{E(b(i[n]),{textArr:e.arcLabels,textSizePx:r,quadrant:e.quadrant})});return u.transition().attr("transform",e=>"translate("+e.x+","+e.y+")"),u}function ne(g,t,p){const l=g.nodes(),r=p,u=l.map((e,n)=>{const i=e.getBBox(),o=[t[n].x,t[n].y];return{node:e,x:o[0],y:o[1],width:i.width,height:i.height}});for(let e=0;e<u.length;e++){const n=u[e];for(let i=e+1;i<u.length;i++){const o=u[i];t[e].textWidth=n.width;const h=n.x+t[e].collisionShiftX,s=n.y+t[e].collisionShiftY,f=o.x+t[i].collisionShiftX,a=o.y+t[i].collisionShiftY;if(!(h+n.width/2<f-o.width/2||h-n.width/2>f+o.width/2||s+n.height/2<a-o.height/2||s-n.height/2>a+o.height/2)){if(t[i].quadrant==2){const c=a>s?-r*2:-r;t[i].collisionShiftY+=c}else if(t[i].quadrant==4){const c=a>s?r:r*2;t[i].collisionShiftY+=c}}}}for(let e=u.length-1;e>=0;e--){const n=u[e];for(let i=e-1;i>=0;i--){const o=u[i];t[e].textWidth=n.width;const h=n.x+t[e].collisionShiftX,s=n.y+t[e].collisionShiftY,f=o.x+t[i].collisionShiftX,a=o.y+t[i].collisionShiftY;if(!(h+n.width/2<f-o.width/2||h-n.width/2>f+o.width/2||s+n.height/2<a-o.height/2||s-n.height/2>a+o.height/2)){if(t[i].quadrant==1){const c=a>s?-r*2:-r;t[i].collisionShiftY+=c}else if(t[i].quadrant==3){const c=a>s?r:r*2;t[i].collisionShiftY+=c}}}}g.data(t).transition().attr("transform",e=>`translate(${e.x+e.collisionShiftX},${e.y+e.collisionShiftY})`)}function se({lineGSelection:g,data:t,fullParams:p,fullChartParams:l}){const r=t.filter(e=>e.collisionShiftX||e.collisionShiftY),u=g.selectAll("polyline").data(r,e=>e.pieDatum.id).join("polyline").attr("stroke",e=>R({datum:e.pieDatum.data,colorType:p.labelColorType,fullChartParams:l})).attr("stroke-width",1).attr("fill","none").attr("points",e=>[[e.lineStartX,e.lineStartY],[e.lineStartX,e.lineStartY]]);return u.transition().attr("points",e=>{let n=e.x+e.collisionShiftX,i=e.y+e.collisionShiftY;return[[n,i],[e.lineStartX,e.lineStartY]]}),u}function re({textSelection:g,lineSelection:t,ids:p,fullChartParams:l}){if(g.interrupt("highlight"),t.interrupt("highlight"),!p.length){g.transition("highlight").duration(200).attr("transform",r=>`translate(${r.x+r.collisionShiftX},${r.y+r.collisionShiftY})`).style("opacity",1),t.transition("highlight").duration(200).style("opacity",1);return}g.each((r,u,e)=>{const n=b(e[u]);p.includes(r.pieDatum.id)?n.style("opacity",1).transition("highlight").duration(200).attr("transform",i=>i.collisionShiftX||i.collisionShiftY?`translate(${i.x+i.collisionShiftX},${i.y+i.collisionShiftY})`:`translate(${i.mouseoverX+i.collisionShiftX},${i.mouseoverY+i.collisionShiftY})`):n.style("opacity",l.styles.unhighlightedOpacity).transition("highlight").duration(200).attr("transform",i=>`translate(${i.x+i.collisionShiftX},${i.y+i.collisionShiftY})`)}),t.each((r,u,e)=>{const n=b(e[u]);p.includes(r.pieDatum.data.id)?n.style("opacity",1).transition("highlight").duration(200):n.style("opacity",l.styles.unhighlightedOpacity).transition("highlight").duration(200)})}function le(g,t){const p=new P;t.containerSelection.selectAll("g").remove();const l=t.containerSelection.append("g");l.classed(Z,!0);const r=t.containerSelection.append("g");r.classed(K,!0);const u=new P,e=new P;let n=[];const i=t.seriesContainerPosition$.pipe(S(p),$(h=>h.width<h.height?h.width:h.height),A()),o=t.fullParams$.pipe(S(p),$(h=>h.labelCentroid>=W?W:h.labelCentroid));return C({shorterSideWith:i,containerVisibleComputedSortedData:t.containerVisibleComputedSortedData$,fullParams:t.fullParams$,fullChartParams:t.fullChartParams$,textSizePx:t.textSizePx$,lineStartCentroid:o}).pipe(S(p),x(async h=>h)).subscribe(h=>{const s=O({axisWidth:h.shorterSideWith,innerRadius:0,outerRadius:h.fullParams.outerRadius,padAngle:0,cornerRadius:0}),f=O({axisWidth:h.shorterSideWith,innerRadius:0,outerRadius:h.fullParams.outerRadiusWhileHighlight,padAngle:0,cornerRadius:0}),a=U({data:h.containerVisibleComputedSortedData,startAngle:h.fullParams.startAngle,endAngle:h.fullParams.endAngle});n=ie({pieData:a,arc:s,arcMouseover:f,labelCentroid:h.fullParams.labelCentroid,lineStartCentroid:h.lineStartCentroid,fullParams:h.fullParams}),l.selectAll("polyline").remove();const c=ae({labelGSelection:r,data:n,fullParams:h.fullParams,fullChartParams:h.fullChartParams,textSizePx:h.textSizePx});setTimeout(()=>{ne(c,n,h.textSizePx);const m=se({lineGSelection:l,data:n,fullParams:h.fullParams,fullChartParams:h.fullChartParams});e.next(m)},1e3),u.next(c)}),C({textSelection:u,lineSelection:e,highlight:t.seriesHighlight$.pipe($(h=>h.map(s=>s.id))),fullChartParams:t.fullChartParams$}).pipe(S(p),x(async h=>h)).subscribe(h=>{re({textSelection:h.textSelection,lineSelection:h.lineSelection,ids:h.highlight,fullChartParams:h.fullChartParams})}),()=>{p.next(void 0)}}const we=L(te)(({selection:g,observer:t,subject:p})=>{const l=new P,{seriesCenterSelection$:r}=X({selection:g,pluginName:T,separateSeries$:t.separateSeries$,seriesLabels$:t.seriesLabels$,seriesContainerPosition$:t.seriesContainerPosition$}),u=[];return r.pipe(S(l)).subscribe(e=>{u.forEach(n=>n()),e.each((n,i,o)=>{const h=b(o[i]),s=t.visibleComputedSortedData$.pipe(S(l),$(a=>a[i]??a[0])),f=t.seriesContainerPosition$.pipe(S(l),$(a=>a[i]??a[0]));u[i]=le(T,{containerSelection:h,containerVisibleComputedSortedData$:s,fullParams$:t.fullParams$,fullChartParams$:t.fullChartParams$,textSizePx$:t.textSizePx$,seriesHighlight$:t.seriesHighlight$,seriesContainerPosition$:f,event$:p.event$})})}),()=>{l.next(void 0)}}),Y="Rose",oe=Math.PI*2,he={name:Y,defaultParams:k,layerIndex:z,validator:(g,{validateColumns:t})=>t(g,{outerRadius:{toBeTypes:["number"]},padAngle:{toBeTypes:["number"]},strokeColorType:{toBeOption:"ColorType"},strokeWidth:{toBeTypes:["number"]},cornerRadius:{toBeTypes:["number"]},arcScaleType:{toBe:'"area" | "radius"',test:l=>l==="area"||l==="radius"},angleIncreaseWhileHighlight:{toBeTypes:["number"]}})};function ue({cornerRadius:g,outerRadius:t,axisWidth:p,maxValue:l,arcScaleType:r,fullParams:u}){const e=p/2*t,n=r==="area"?.5:1,i=M().domain([0,l]).range([0,e]).exponent(n);return o=>{const h=i(o.prevValue),s=i(o.value),f=G(h,s);return a=>{const c=f(a);return V().innerRadius(0).outerRadius(c).padAngle(u.padAngle).padRadius(c).cornerRadius(g)(o)}}}function ce({pathSelection:g,ids:t,fullParams:p,fullChartParams:l,tweenArc:r}){if(g.interrupt("highlight"),!t.length){g.transition("highlight").style("opacity",1).attr("d",u=>r(u)(1));return}g.each((u,e,n)=>{const i=b(n[e]);t.includes(u.data.id)?i.style("opacity",1).transition("highlight").ease(j).duration(500).attr("d",o=>r({...o,startAngle:o.startAngle-p.angleIncreaseWhileHighlight,endAngle:o.endAngle+p.angleIncreaseWhileHighlight})(1)):i.style("opacity",l.styles.unhighlightedOpacity).transition("highlight").attr("d",o=>r(o)(1))})}function pe(g,t){const p=new P,l=w(g,"path");let r=[];const u=t.seriesContainerPosition$.pipe(S(p),$(a=>a.width<a.height?a.width:a.height),A()),e=C({containerVisibleComputedSortedData:t.containerVisibleComputedSortedData$,fullParams:t.fullParams$}).pipe(S(p),x(async a=>a),$(a=>{const c=oe/a.containerVisibleComputedSortedData.length;return a.containerVisibleComputedSortedData.map((m,d)=>({id:m.id,data:m,index:d,value:m.value,startAngle:c*d,endAngle:c*(d+1),padAngle:a.fullParams.padAngle,prevValue:r[d]&&r[d].id===m.id?r[d].value:0}))})),n=t.fullChartParams$.pipe(S(p),$(a=>a.highlightTarget),A()),i=t.visibleComputedSortedData$.pipe($(a=>Math.max(...a.flat().map(c=>c.value))),A()),o=C({fullParams:t.fullParams$,axisWidth:u,maxValue:i}).pipe(S(p),x(async a=>a),$(a=>ue({cornerRadius:a.fullParams.cornerRadius,outerRadius:a.fullParams.outerRadius,axisWidth:a.axisWidth,maxValue:a.maxValue,arcScaleType:a.fullParams.arcScaleType,fullParams:a.fullParams}))),h=t.fullChartParams$.pipe(S(p),$(a=>a.transitionDuration),A()),s=new F(!1),f=new H(a=>{C({pieData:e,tweenArc:o,transitionDuration:h,fullParams:t.fullParams$,fullChartParams:t.fullChartParams$}).pipe(S(p),x(async c=>c)).subscribe(c=>{const m=c.pieData.map((y,D)=>(y.prevValue=r[D]&&r[D].id===y.id?r[D].value:0,y));s.next(!0);const d=t.containerSelection.selectAll("path").data(m,y=>y.id).join("path").classed(l,!0).style("cursor","pointer").attr("fill",(y,D)=>y.data.color).attr("stroke",(y,D)=>R({datum:y.data,colorType:c.fullParams.strokeColorType,fullChartParams:c.fullChartParams})).attr("stroke-width",c.fullParams.strokeWidth);d.interrupt("graphicMove"),d.transition("graphicMove").duration(c.transitionDuration).attrTween("d",c.tweenArc).on("end",()=>{a.next(d),s.next(!1)}),r=Object.assign([],m)})}).pipe(I(1));return C({pathSelection:f,SeriesDataMap:t.SeriesDataMap$,computedData:t.computedData$,highlightTarget:n}).pipe(S(p),x(async a=>a)).subscribe(a=>{a.pathSelection.on("mouseover",(c,m)=>{c.stopPropagation(),t.event$.next({type:"series",eventName:"mouseover",pluginName:g,highlightTarget:a.highlightTarget,datum:m.data,series:a.SeriesDataMap.get(m.data.seriesLabel),seriesIndex:m.data.seriesIndex,seriesLabel:m.data.seriesLabel,event:c,data:a.computedData})}).on("mousemove",(c,m)=>{c.stopPropagation(),t.event$.next({type:"series",eventName:"mousemove",pluginName:g,highlightTarget:a.highlightTarget,datum:m.data,series:a.SeriesDataMap.get(m.data.seriesLabel),seriesIndex:m.data.seriesIndex,seriesLabel:m.data.seriesLabel,event:c,data:a.computedData})}).on("mouseout",(c,m)=>{c.stopPropagation(),t.event$.next({type:"series",eventName:"mouseout",pluginName:g,highlightTarget:a.highlightTarget,datum:m.data,series:a.SeriesDataMap.get(m.data.seriesLabel),seriesIndex:m.data.seriesIndex,seriesLabel:m.data.seriesLabel,event:c,data:a.computedData})}).on("click",(c,m)=>{c.stopPropagation(),t.event$.next({type:"series",eventName:"click",pluginName:g,highlightTarget:a.highlightTarget,datum:m.data,series:a.SeriesDataMap.get(m.data.seriesLabel),seriesIndex:m.data.seriesIndex,seriesLabel:m.data.seriesLabel,event:c,data:a.computedData})})}),C({pathSelection:f,highlight:t.seriesHighlight$.pipe($(a=>a.map(c=>c.id))),fullParams:t.fullParams$,fullChartParams:t.fullChartParams$,tweenArc:o,isTransitionMoving:s}).pipe(S(p),x(async a=>a),Q(a=>!a.isTransitionMoving)).subscribe(a=>{ce({pathSelection:a.pathSelection,ids:a.highlight,fullParams:a.fullParams,fullChartParams:a.fullChartParams,tweenArc:a.tweenArc})}),()=>{p.next(void 0)}}const Te=L(he)(({selection:g,name:t,subject:p,observer:l})=>{const r=new P,{seriesCenterSelection$:u}=X({selection:g,pluginName:Y,separateSeries$:l.separateSeries$,seriesLabels$:l.seriesLabels$,seriesContainerPosition$:l.seriesContainerPosition$}),e=[];return u.pipe(S(r)).subscribe(n=>{e.forEach(i=>i()),n.each((i,o,h)=>{const s=b(h[o]),f=l.visibleComputedSortedData$.pipe(S(r),$(c=>JSON.parse(JSON.stringify(c[o]??c[0])))),a=l.seriesContainerPosition$.pipe(S(r),$(c=>JSON.parse(JSON.stringify(c[o]??c[0]))));e[o]=pe(Y,{containerSelection:s,computedData$:l.computedData$,visibleComputedData$:l.visibleComputedData$,visibleComputedSortedData$:l.visibleComputedSortedData$,containerVisibleComputedSortedData$:f,SeriesDataMap$:l.SeriesDataMap$,fullParams$:l.fullParams$,fullChartParams$:l.fullChartParams$,seriesHighlight$:l.seriesHighlight$,seriesContainerPosition$:a,event$:p.event$})})}),()=>{r.next(void 0),e.forEach(n=>n())}}),v="RoseLabels",ge=w(v,"label-g"),me=w(v,"line-g"),fe=w(v,"text"),B=2,Se={name:v,defaultParams:J,layerIndex:N,validator:(g,{validateColumns:t})=>t(g,{outerRadius:{toBeTypes:["number"]},labelCentroid:{toBeTypes:["number"]},labelFn:{toBeTypes:["Function"]},labelColorType:{toBeOption:"ColorType"},arcScaleType:{toBe:'"area" | "radius"',test:l=>l==="area"||l==="radius"}})};function de({pieData:g,labelCentroid:t,arcScaleType:p,maxValue:l,axisWidth:r,outerRadius:u,lineStartCentroid:e,fullParams:n}){const i=r/2*u,o=p==="area"?.5:1,h=M().domain([0,l]).range([0,i]).exponent(o);return g.map((s,f)=>{const a=h(s.value),c=V().innerRadius(0).outerRadius(a).padAngle(0).padRadius(a).cornerRadius(0),[m,d]=c.centroid(s),[y,D]=[m,d],q=n.labelFn(s.data);return{pieDatum:s,arcIndex:f,arcLabels:q.split(`
`),lineStartX:m*e,lineStartY:d*e,lineStartMouseoverX:y*e,lineStartMouseoverY:D*e,x:m*t,y:d*t,mouseoverX:y*t,mouseoverY:D*t,textWidth:0,collisionShiftX:0,collisionShiftY:0,quadrant:m>=0&&d<=0?1:m<0&&d<=0?2:m<0&&d>0?3:4}}).filter(s=>s.pieDatum.data.visible)}function $e({labelGSelection:g,data:t,fullParams:p,fullChartParams:l,textSizePx:r}){const u=g.selectAll("text").data(t,e=>e.pieDatum.id).join("text").classed(fe,!0).attr("font-weight","bold").attr("text-anchor",e=>e.quadrant==1||e.quadrant==4?"start":"end").style("dominant-baseline",e=>e.quadrant==1||e.quadrant==2?"auto":"hanging").style("cursor",e=>l.highlightTarget&&l.highlightTarget!="none"?"pointer":"none").attr("font-size",l.styles.textSize).attr("fill",(e,n)=>R({datum:e.pieDatum.data,colorType:p.labelColorType,fullChartParams:l})).each((e,n,i)=>{E(b(i[n]),{textArr:e.arcLabels,textSizePx:r,quadrant:e.quadrant})});return u.transition().attr("transform",e=>"translate("+e.x+","+e.y+")"),u}function ye(g,t,p){const l=g.nodes(),r=p,u=l.map((e,n)=>{const i=e.getBBox(),o=[t[n].x,t[n].y];return{node:e,x:o[0],y:o[1],width:i.width,height:i.height}});for(let e=0;e<u.length;e++){const n=u[e];for(let i=e+1;i<u.length;i++){const o=u[i];t[e].textWidth=n.width;const h=n.x+t[e].collisionShiftX,s=n.y+t[e].collisionShiftY,f=o.x+t[i].collisionShiftX,a=o.y+t[i].collisionShiftY;if(!(h+n.width/2<f-o.width/2||h-n.width/2>f+o.width/2||s+n.height/2<a-o.height/2||s-n.height/2>a+o.height/2)){if(t[i].quadrant==2){const c=a>s?-r*2:-r;t[i].collisionShiftY+=c}else if(t[i].quadrant==4){const c=a>s?r:r*2;t[i].collisionShiftY+=c}}}}for(let e=u.length-1;e>=0;e--){const n=u[e];for(let i=e-1;i>=0;i--){const o=u[i];t[e].textWidth=n.width;const h=n.x+t[e].collisionShiftX,s=n.y+t[e].collisionShiftY,f=o.x+t[i].collisionShiftX,a=o.y+t[i].collisionShiftY;if(!(h+n.width/2<f-o.width/2||h-n.width/2>f+o.width/2||s+n.height/2<a-o.height/2||s-n.height/2>a+o.height/2)){if(t[i].quadrant==1){const c=a>s?-r*2:-r;t[i].collisionShiftY+=c}else if(t[i].quadrant==3){const c=a>s?r:r*2;t[i].collisionShiftY+=c}}}}g.data(t).transition().attr("transform",e=>`translate(${e.x+e.collisionShiftX},${e.y+e.collisionShiftY})`)}function Pe({lineGSelection:g,data:t,fullParams:p,fullChartParams:l}){const r=t.filter(e=>e.collisionShiftX||e.collisionShiftY),u=g.selectAll("polyline").data(r,e=>e.pieDatum.id).join("polyline").attr("stroke",e=>R({datum:e.pieDatum.data,colorType:p.labelColorType,fullChartParams:l})).attr("stroke-width",1).attr("fill","none").attr("points",e=>[[e.lineStartX,e.lineStartY],[e.lineStartX,e.lineStartY]]);return u.transition().attr("points",e=>{let n=e.x+e.collisionShiftX,i=e.y+e.collisionShiftY;return[[n,i],[e.lineStartX,e.lineStartY]]}),u}function be({textSelection:g,lineSelection:t,ids:p,fullChartParams:l}){if(g.interrupt("highlight"),t.interrupt("highlight"),!p.length){g.transition("highlight").duration(200).attr("transform",r=>`translate(${r.x+r.collisionShiftX},${r.y+r.collisionShiftY})`).style("opacity",1),t.transition("highlight").duration(200).style("opacity",1);return}g.each((r,u,e)=>{const n=b(e[u]);p.includes(r.pieDatum.data.id)?n.style("opacity",1).transition("highlight").duration(200).attr("transform",i=>`translate(${i.mouseoverX+i.collisionShiftX},${i.mouseoverY+i.collisionShiftY})`):n.style("opacity",l.styles.unhighlightedOpacity).transition("highlight").duration(200).attr("transform",i=>`translate(${i.x+i.collisionShiftX},${i.y+i.collisionShiftY})`)}),t.each((r,u,e)=>{const n=b(e[u]);p.includes(r.pieDatum.data.id)?n.style("opacity",1).transition("highlight").duration(200):n.style("opacity",l.styles.unhighlightedOpacity).transition("highlight").duration(200)})}function Ce(g,t){const p=new P;t.containerSelection.selectAll("g").remove();const l=t.containerSelection.append("g");l.classed(me,!0);const r=t.containerSelection.append("g");r.classed(ge,!0);const u=new P,e=new P;let n=[];const i=t.seriesContainerPosition$.pipe(S(p),$(s=>s.width<s.height?s.width:s.height),A()),o=t.visibleComputedSortedData$.pipe($(s=>Math.max(...s.flat().map(f=>f.value))),A()),h=t.fullParams$.pipe(S(p),$(s=>s.labelCentroid>=B?B:s.labelCentroid));return C({shorterSideWith:i,containerVisibleComputedSortedData:t.containerVisibleComputedSortedData$,maxValue:o,fullParams:t.fullParams$,fullChartParams:t.fullChartParams$,textSizePx:t.textSizePx$,lineStartCentroid:h}).pipe(S(p),x(async s=>s)).subscribe(s=>{const f=Math.PI*2/s.containerVisibleComputedSortedData.length,a=s.containerVisibleComputedSortedData.map((m,d)=>({id:m.id,data:m,index:d,value:m.value,startAngle:f*d,endAngle:f*(d+1),padAngle:0}));n=de({pieData:a,labelCentroid:s.fullParams.labelCentroid,arcScaleType:s.fullParams.arcScaleType,maxValue:s.maxValue,axisWidth:s.shorterSideWith,outerRadius:s.fullParams.outerRadius,lineStartCentroid:s.lineStartCentroid,fullParams:s.fullParams}),l.selectAll("polyline").remove();const c=$e({labelGSelection:r,data:n,fullParams:s.fullParams,fullChartParams:s.fullChartParams,textSizePx:s.textSizePx});setTimeout(()=>{ye(c,n,s.textSizePx);const m=Pe({lineGSelection:l,data:n,fullParams:s.fullParams,fullChartParams:s.fullChartParams});e.next(m)},1e3),u.next(c)}),C({textSelection:u,lineSelection:e,highlight:t.seriesHighlight$.pipe($(s=>s.map(f=>f.id))),fullChartParams:t.fullChartParams$}).pipe(S(p),x(async s=>s)).subscribe(s=>{be({textSelection:s.textSelection,lineSelection:s.lineSelection,ids:s.highlight,fullChartParams:s.fullChartParams})}),()=>{p.next(void 0)}}const ve=L(Se)(({selection:g,observer:t,subject:p})=>{const l=new P,{seriesCenterSelection$:r}=X({selection:g,pluginName:v,separateSeries$:t.separateSeries$,seriesLabels$:t.seriesLabels$,seriesContainerPosition$:t.seriesContainerPosition$}),u=[];return r.pipe(S(l)).subscribe(e=>{u.forEach(n=>n()),e.each((n,i,o)=>{const h=b(o[i]),s=t.visibleComputedSortedData$.pipe(S(l),$(a=>JSON.parse(JSON.stringify(a[i]??a[0])))),f=t.seriesContainerPosition$.pipe(S(l),$(a=>JSON.parse(JSON.stringify(a[i]??a[0]))));u[i]=Ce(v,{containerSelection:h,visibleComputedSortedData$:t.visibleComputedSortedData$,containerVisibleComputedSortedData$:s,fullParams$:t.fullParams$,fullChartParams$:t.fullChartParams$,textSizePx$:t.textSizePx$,seriesHighlight$:t.seriesHighlight$,seriesContainerPosition$:f,event$:p.event$})})}),()=>{l.next(void 0)}});export{we as P,Te as R,ve as a};
