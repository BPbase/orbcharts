import{C as b,bC as P,P as R,N as S,Q as v,T as y,bD as _,O as $,bE as C,o as d,c as m,b as M}from"./Dy7f7BI4.js";function F(e,n){const t=new Map;let o=Object.assign([],e),r=[];return o.forEach((u,c)=>{Array.isArray(u)?u.forEach((a,s)=>{r.push({rowIndex:c,columnIndex:s,index:-1,datum:a})}):r.push({rowIndex:c,columnIndex:0,index:-1,datum:u})}),r.sort((u,c)=>n(u.datum,c.datum)),r=r.map((u,c)=>({...u,index:c})),r.forEach(u=>{t.set(String([u.rowIndex,u.columnIndex]),u.index)}),t}const L=e=>{const{data:n=[],dataFormatter:t,chartParams:o}=e;if(!n.length)return[];const r=[];try{const u=(a=>{if(a){const s=F(n,t.sort);return(i,l,f)=>s.get(String([l,f]))}else return(s,i,l)=>s.length})(t.sort!=null),c=(a,s,i,l,f)=>{const p=b(t.type,s,i),h=t.seriesLabels[s]||P("series",s),E=t.colorsPredicate(a,s,i,e),g=t.visibleFilter(a,s,i,e);return typeof a=="number"?{id:p,index:l,sortedIndex:f,label:p,tooltipContent:t.tooltipContentFormat(a,s,i,e),data:{},value:a,seriesIndex:s,seriesLabel:h,color:E,visible:g}:{id:a.id?a.id:p,index:l,sortedIndex:f,label:a.label?a.label:p,tooltipContent:a.tooltipContent?a.tooltipContent:t.tooltipContentFormat(a,s,i,e),data:a.data??{},value:a.value,seriesIndex:s,seriesLabel:h,color:E,visible:g}};n.forEach((a,s)=>{if(Array.isArray(a))a.forEach((i,l)=>{const f=u(r,s,l),p=c(i,s,l,r.length,f);r.push(p)});else{const i=u(r,s,0),l=c(a,s,0,r.length,i);r.push(l)}})}catch(u){throw Error(u)}return r},T=({subject:e,observer:n})=>{const t=R({datumList$:n.computedData$,fullChartParams$:n.fullChartParams$,event$:e.event$}).pipe(S(1)),o=v({datumList$:n.computedData$}).pipe(S(1));return{fullParams$:n.fullParams$,fullChartParams$:n.fullChartParams$,fullDataFormatter$:n.fullDataFormatter$,computedData$:n.computedData$,layout$:n.layout$,seriesHighlight$:t,SeriesDataMap$:o}};class k extends y{constructor(n,t){super({defaultDataFormatter:_,computedDataFn:L,contextObserverFn:T},n,t)}}var D=new $(function(e){return e.complete()}),A=C(function(e){return function(){e(this),this.name="EmptyError",this.message="no elements in sequence"}});function I(e){return d(function(n,t){var o=!1;n.subscribe(m(t,function(r){o=!0,t.next(r)},function(){o||t.next(e),t.complete()}))})}function x(e){return e<=0?function(){return D}:d(function(n,t){var o=0;n.subscribe(m(t,function(r){++o<=e&&(t.next(r),e<=o&&t.complete())}))})}function O(e){return e===void 0&&(e=U),d(function(n,t){var o=!1;n.subscribe(m(t,function(r){o=!0,t.next(r)},function(){return o?t.complete():t.error(e())}))})}function U(){return new A}function B(e,n){var t=arguments.length>=2;return function(o){return o.pipe(M,x(1),t?I(n):O(function(){return new A}))}}const N={force:{strength:.03,velocityDecay:.2,collisionSpacing:2},bubbleText:{fillRate:.6,lineHeight:12,lineLengthMin:4},highlightRIncrease:0,bubbleScaleType:"area"},G={outerRadius:.95,innerRadius:0,outerMouseoverRadius:1,enterDuration:800,startAngle:0,endAngle:Math.PI*2,padAngle:.02,cornerRadius:0},H={eventFn:(e,n,t)=>n==="mouseover"||n==="mousemove"?[String(e.datum.value)]:[String(Math.round(e.data.reduce((o,r)=>o+(r.value??0),0)*t))],textAttrs:[{transform:"translate(0, 0)"}],textStyles:[{"font-weight":"bold","text-anchor":"middle","pointer-events":"none","dominant-baseline":"middle","font-size":64,fill:"#000"}]},j={outerRadius:.95,outerMouseoverRadius:1,startAngle:0,endAngle:Math.PI*2,labelCentroid:2.3,labelColorType:"series",labelFn:e=>String(e.value)},q={position:"right",justify:"end",padding:28,backgroundFill:"none",backgroundStroke:"none",gap:10,listRectWidth:14,listRectHeight:14,listRectRadius:0};export{H as D,D as E,k as S,j as a,N as b,G as c,q as d,B as f};
