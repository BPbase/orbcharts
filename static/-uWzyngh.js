import{bh as Mt,aF as Ct,aD as Xt,bi as St,ap as k,ar as W,as as Q,aw as ft,an as Yt,ba as Lt,av as vt,bo as ot,az as rt,aG as Ft,aq as V,ao as Vt,bj as Pt,aH as Rt,bp as kt,bq as at,br as Bt,bs as wt,bt as Ot,bu as It,bv as _t,bw as Et,bx as Nt,o as E,S as N,t as T,m as A,X as zt,aJ as jt,Y as Gt,am as Wt,a as I,j as X,k as C,d as w,s as v,aN as q,by as st,g as L,p as Ut,a5 as Ht,u as qt,bz as Jt,b4 as Zt,aP as Kt,aV as Qt,x as ct,ae as te,b0 as ee,b1 as P,b2 as ae,b3 as ie,af as le,i as ne,b8 as tt,b5 as ut,b6 as mt,ag as oe,b7 as re}from"./I3UjhR9R.js";import{c as J,d as ht}from"./C--PG8Xw.js";import{c as se}from"./qddaURT9.js";import{c as ce}from"./b_ZjlFt3.js";import{f as ue}from"./CNmFpe8w.js";import{c as Z,e as xt,h as me,i as xe}from"./9L4COJS-.js";const pe=o=>({status:"success",columnName:"",expectToBe:""}),ye=o=>{const{data:l,dataFormatter:t,chartParams:a}=o;if(!l.length)return[];const e=St();let s=[];try{const c=l.map((r,n)=>Array.isArray(r)?{id:"",label:"",description:"",data:{},categoryLabel:e,value:r}:Mt(r)?{id:r.id??"",label:r.label??"",description:r.description??"",data:r.data??{},categoryLabel:r.categoryLabel??e,value:r.value}:{id:"",label:"",description:"",data:{},categoryLabel:e,value:[]}),m=(()=>{const r=new Set(t.categoryLabels);for(let n of c){const h=n.categoryLabel??e;r.add(h)}return Array.from(r)})(),y=new Map(m.map((r,n)=>[r,n]));let p=0;c.forEach((r,n)=>{const h=p;p++;const x=Ct(t.type,n),f=y.get(r.categoryLabel)??0,D=Xt(f,a),i={id:r.id?r.id:x,index:h,label:r.label?r.label:x,description:r.description??"",data:r.data,datumIndex:n,value:r.value,categoryIndex:f,categoryLabel:r.categoryLabel,visible:!0,color:D};i.visible=t.visibleFilter(i,o),s[f]||(s[f]=[]),s[f].push(i)})}catch(c){throw Error(c)}return s},fe=o=>({status:"success",columnName:"",expectToBe:""}),he=({computedData$:o})=>o.pipe(k(l=>{const t=l.flat(),[a,e]=ot(t.map(m=>m.value[0])),[s,c]=ot(t.map(m=>m.value[1]));return{minX:a,maxX:e,minY:s,maxY:c}})),ge=({computedData$:o,minMaxXY$:l,fullDataFormatter$:t,layout$:a})=>{function e(c,m){let y=c.maxX,p=c.minX;return p===y&&y===0&&(y=1),J({maxValue:y,minValue:p,axisWidth:m.width,scaleDomain:["auto","auto"],scaleRange:[0,1]})}function s(c,m){let y=c.maxY,p=c.minY;return p===y&&y===0&&(y=1),J({maxValue:y,minValue:p,axisWidth:m.height,scaleDomain:["auto","auto"],scaleRange:[0,1],reverse:!0})}return W({computedData:o,minMaxXY:l,fullDataFormatter:t,layout:a}).pipe(Q(async c=>c),k(c=>{const m=e(c.minMaxXY,c.layout),y=s(c.minMaxXY,c.layout);return c.computedData.map((p,r)=>p.map((n,h)=>({...n,axisX:m(n.value[0]??0),axisY:y(n.value[1]??0)})))}))},de=({computedData$:o,fullDataFormatter$:l})=>o.pipe(k(t=>t.map(a=>a[0]?a[0].categoryLabel:"")),ft((t,a)=>JSON.stringify(t).length===JSON.stringify(a).length)),De=({computedData$:o})=>o.pipe(k(l=>l.map(t=>t.filter(a=>a.visible==!0)).filter(t=>t.length>0))),$e=({computedLayoutData$:o})=>o.pipe(k(l=>l.map(t=>t.filter(a=>a.visible==!0)).filter(t=>t.length>0))),Ae=({computedData$:o,fullDataFormatter$:l,layout$:t})=>W({computedData:o,fullDataFormatter:l,layout:t}).pipe(Q(async e=>e),k(e=>{if(e.fullDataFormatter.separateCategory)return rt(e.layout,e.fullDataFormatter.container,e.computedData.length);{const s=rt(e.layout,e.fullDataFormatter.container,1);return e.computedData.map((c,m)=>s[0])}})),be=({visibleComputedLayoutData$:o,minMaxXY$:l,fullDataFormatter$:t})=>W({visibleComputedLayoutData:o,minMaxXY:l,fullDataFormatter:t}).pipe(k(a=>{const{minX:e,maxX:s,minY:c,maxY:m}=(()=>{let{minX:x,maxX:f,minY:D,maxY:i}=a.minMaxXY;return a.fullDataFormatter.xAxis.scaleDomain[0]==="auto"&&x>0?x=0:typeof a.fullDataFormatter.xAxis.scaleDomain[0]=="number"&&(x=a.fullDataFormatter.xAxis.scaleDomain[0]),a.fullDataFormatter.xAxis.scaleDomain[1]==="auto"&&f<0?f=0:typeof a.fullDataFormatter.xAxis.scaleDomain[1]=="number"&&(f=a.fullDataFormatter.xAxis.scaleDomain[1]),a.fullDataFormatter.yAxis.scaleDomain[0]==="auto"&&D>0?D=0:typeof a.fullDataFormatter.yAxis.scaleDomain[0]=="number"&&(D=a.fullDataFormatter.yAxis.scaleDomain[0]),a.fullDataFormatter.yAxis.scaleDomain[1]==="auto"&&i<0?i=0:typeof a.fullDataFormatter.yAxis.scaleDomain[1]=="number"&&(i=a.fullDataFormatter.yAxis.scaleDomain[1]),{minX:x,maxX:f,minY:D,maxY:i}})();let y=[],p=null,r=null,n=null,h=null;for(let x of a.visibleComputedLayoutData)for(let f of x)f.value[0]>=e&&f.value[0]<=s&&f.value[1]>=c&&f.value[1]<=m&&(y.push(f),(p==null||f.value[0]<p.value[0])&&(p=f),(r==null||f.value[0]>r.value[0])&&(r=f),(n==null||f.value[1]<n.value[1])&&(n=f),(h==null||f.value[1]>h.value[1])&&(h=f));return{datumList:y,minXDatum:p,maxXDatum:r,minYDatum:n,maxYDatum:h}})),Te=({minMaxXY$:o,filteredMinMaxXYData$:l,fullDataFormatter$:t,layout$:a})=>{const e=new Yt;function s({minMaxXY:c,filteredMinMaxXYData:m,xAxis:y,yAxis:p,width:r,height:n}){let h=0,x=0,f=0,D=0,{minX:i,maxX:g,minY:d,maxY:$}=c,Y=m.minXDatum.value[0]??0,S=m.maxXDatum.value[0]??0,F=m.minYDatum.value[1]??0,u=m.maxYDatum.value[1]??0;Y===S&&S===0&&(S=1),F===u&&u===0&&(u=1),i===g&&g===0&&(g=1),d===$&&$===0&&($=1);const M=J({maxValue:S,minValue:Y,axisWidth:r,scaleDomain:y.scaleDomain,scaleRange:y.scaleRange}),b=M(i>0?0:i),R=M(g<0?0:g);h=b,f=(R-b)/r;const H=J({maxValue:u,minValue:F,axisWidth:n,scaleDomain:p.scaleDomain,scaleRange:p.scaleRange,reverse:!0}),z=H(d>0?0:d),_=H($<0?0:$);return x=_,D=(z-_)/n,{translate:[h,x],scale:[f,D],rotate:0,rotateX:0,rotateY:0,value:`translate(${h}px, ${x}px) scale(${f}, ${D})`}}return new Lt(c=>(W({minMaxXY:o,filteredMinMaxXYData:l,fullDataFormatter:t,layout:a}).pipe(vt(e),Q(async m=>m)).subscribe(m=>{if(!m.filteredMinMaxXYData.minXDatum||!m.filteredMinMaxXYData.maxXDatum||m.filteredMinMaxXYData.minXDatum.value[0]==null||m.filteredMinMaxXYData.maxXDatum.value[0]==null||!m.filteredMinMaxXYData.minYDatum||!m.filteredMinMaxXYData.maxYDatum||m.filteredMinMaxXYData.minYDatum.value[1]==null||m.filteredMinMaxXYData.maxYDatum.value[1]==null)return;const y=s({minMaxXY:m.minMaxXY,filteredMinMaxXYData:m.filteredMinMaxXYData,xAxis:m.fullDataFormatter.xAxis,yAxis:m.fullDataFormatter.yAxis,width:m.layout.width,height:m.layout.height});c.next(y)}),function(){e.next(void 0)}))},Me=({multiValueContainerPosition$:o,multiValueGraphicTransform$:l})=>W({multiValueContainerPosition:o,multiValueGraphicTransform:l}).pipe(Q(async t=>t),k(t=>t.multiValueContainerPosition.map((a,e)=>[1/t.multiValueGraphicTransform.scale[0]/t.multiValueContainerPosition[e].scale[0],1/t.multiValueGraphicTransform.scale[1]/t.multiValueContainerPosition[e].scale[1]]))),Ce=({subject:o,observer:l})=>{const t=Ft(l.fullChartParams$).pipe(V(1)),a=l.fullDataFormatter$.pipe(k(i=>i.separateCategory),ft(),V(1)),e=Ae({computedData$:l.computedData$,fullDataFormatter$:l.fullDataFormatter$,layout$:l.layout$}),s=l.computedData$.pipe(k(i=>i.flat().flat())).pipe(V(1)),c=Vt({datumList$:s,fullChartParams$:l.fullChartParams$,event$:o.event$}).pipe(V(1)),m=de({computedData$:l.computedData$,fullDataFormatter$:l.fullDataFormatter$}),y=Pt({datumList$:s}).pipe(V(1)),p=he({computedData$:l.computedData$}).pipe(V(1)),r=ge({computedData$:l.computedData$,minMaxXY$:p,fullDataFormatter$:l.fullDataFormatter$,layout$:l.layout$}).pipe(V(1)),n=De({computedData$:l.computedData$}).pipe(V(1)),h=$e({computedLayoutData$:r}).pipe(V(1)),x=be({visibleComputedLayoutData$:h,minMaxXY$:p,fullDataFormatter$:l.fullDataFormatter$}).pipe(V(1)),f=Te({minMaxXY$:p,filteredMinMaxXYData$:x,fullDataFormatter$:l.fullDataFormatter$,layout$:l.layout$}).pipe(V(1)),D=Me({multiValueContainerPosition$:e,multiValueGraphicTransform$:f});return{fullParams$:l.fullParams$,fullChartParams$:l.fullChartParams$,fullDataFormatter$:l.fullDataFormatter$,computedData$:l.computedData$,layout$:l.layout$,textSizePx$:t,isCategorySeprate$:a,multiValueContainerPosition$:e,multiValueHighlight$:c,categoryLabels$:m,CategoryDataMap$:y,minMaxXY$:p,computedLayoutData$:r,visibleComputedData$:n,visibleComputedLayoutData$:h,filteredMinMaxXYData$:x,multiValueGraphicTransform$:f,multiValueGraphicReverseScale$:D}};class pa extends Rt{constructor(l,t){super({defaultDataFormatter:kt,dataFormatterValidator:pe,computedDataFn:ye,dataValidator:fe,contextObserverCallback:Ce},l,t)}}var Xe=function(o){at(l,o);function l(t,a){return o.call(this)||this}return l.prototype.schedule=function(t,a){return this},l}(Bt),pt={setInterval:function(o,l){for(var t=[],a=2;a<arguments.length;a++)t[a-2]=arguments[a];return setInterval.apply(void 0,wt([o,l],Ot(t)))},clearInterval:function(o){return clearInterval(o)},delegate:void 0},Se=function(o){at(l,o);function l(t,a){var e=o.call(this,t,a)||this;return e.scheduler=t,e.work=a,e.pending=!1,e}return l.prototype.schedule=function(t,a){var e;if(a===void 0&&(a=0),this.closed)return this;this.state=t;var s=this.id,c=this.scheduler;return s!=null&&(this.id=this.recycleAsyncId(c,s,a)),this.pending=!0,this.delay=a,this.id=(e=this.id)!==null&&e!==void 0?e:this.requestAsyncId(c,this.id,a),this},l.prototype.requestAsyncId=function(t,a,e){return e===void 0&&(e=0),pt.setInterval(t.flush.bind(t,this),e)},l.prototype.recycleAsyncId=function(t,a,e){if(e===void 0&&(e=0),e!=null&&this.delay===e&&this.pending===!1)return a;a!=null&&pt.clearInterval(a)},l.prototype.execute=function(t,a){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var e=this._execute(t,a);if(e)return e;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},l.prototype._execute=function(t,a){var e=!1,s;try{this.work(t)}catch(c){e=!0,s=c||new Error("Scheduled action threw falsy error")}if(e)return this.unsubscribe(),s},l.prototype.unsubscribe=function(){if(!this.closed){var t=this,a=t.id,e=t.scheduler,s=e.actions;this.work=this.state=this.scheduler=null,this.pending=!1,It(s,this),a!=null&&(this.id=this.recycleAsyncId(e,a,null)),this.delay=null,o.prototype.unsubscribe.call(this)}},l}(Xe),yt=function(){function o(l,t){t===void 0&&(t=o.now),this.schedulerActionCtor=l,this.now=t}return o.prototype.schedule=function(l,t,a){return t===void 0&&(t=0),new this.schedulerActionCtor(this,l).schedule(a,t)},o.now=_t.now,o}(),Ye=function(o){at(l,o);function l(t,a){a===void 0&&(a=yt.now);var e=o.call(this,t,a)||this;return e.actions=[],e._active=!1,e}return l.prototype.flush=function(t){var a=this.actions;if(this._active){a.push(t);return}var e;this._active=!0;do if(e=t.execute(t.state,t.delay))break;while(t=a.shift());if(this._active=!1,e){for(;t=a.shift();)t.unsubscribe();throw e}},l}(yt),Le=new Ye(Se);function ve(o,l){return l===void 0&&(l=Le),Et(function(t,a){var e=null,s=null,c=null,m=function(){if(e){e.unsubscribe(),e=null;var p=s;s=null,a.next(p)}};function y(){var p=c+o,r=l.now();if(r<p){e=this.schedule(void 0,p-r),a.add(e);return}m()}t.subscribe(Nt(a,function(p){s=p,c=l.now(),e||(e=l.schedule(y,o),a.add(e))},function(){m(),a.complete()},void 0,function(){s=e=null}))})}const gt="MultiValueLegend",Fe={name:gt,defaultParams:zt,layerIndex:jt,validator:(o,{validateColumns:l})=>l(o,{placement:{toBe:'"top" | "top-start" | "top-end" | "bottom" | "bottom-start" | "bottom-end" | "left" | "left-start" | "left-end" | "right" | "right-start" | "right-end"',test:a=>["top","top-start","top-end","bottom","bottom-start","bottom-end","left","left-start","left-end","right","right-start","right-end"].includes(a)},padding:{toBeTypes:["number"]},backgroundFill:{toBeOption:"ColorType"},backgroundStroke:{toBeOption:"ColorType"},gap:{toBeTypes:["number"]},listRectWidth:{toBeTypes:["number"]},listRectHeight:{toBeTypes:["number"]},listRectRadius:{toBeTypes:["number"]},textColorType:{toBeOption:"ColorType"}})},ya=E(Fe)(({selection:o,rootSelection:l,observer:t,subject:a})=>{const e=new N,s=t.CategoryDataMap$.pipe(T(e),A(y=>Array.from(y.keys()))),c=t.fullParams$.pipe(T(e),A(y=>{const p=[{listRectWidth:y.listRectWidth,listRectHeight:y.listRectHeight,listRectRadius:y.listRectRadius}];return{...y,labelList:p}})),m=se(gt,{rootSelection:l,legendLabels$:s,fullParams$:c,layout$:t.layout$,fullChartParams$:t.fullChartParams$,textSizePx$:t.textSizePx$});return()=>{e.next(void 0),m()}}),dt="MultiValueTooltip",Ve={name:dt,defaultParams:Gt,layerIndex:Wt,validator:(o,{validateColumns:l})=>l(o,{backgroundColorType:{toBeOption:"ColorType"},backgroundOpacity:{toBeTypes:["number"]},strokeColorType:{toBeOption:"ColorType"},offset:{toBe:"[number, number]",test:a=>Array.isArray(a)&&a.length===2&&typeof a[0]=="number"&&typeof a[1]=="number"},padding:{toBeTypes:["number"]},textColorType:{toBeOption:"ColorType"},renderFn:{toBeTypes:["Function"]}})},fa=E(Ve)(({selection:o,rootSelection:l,name:t,subject:a,observer:e})=>{const s=new N,c=ce(dt,{rootSelection:l,fullParams$:e.fullParams$,fullChartParams$:e.fullChartParams$,layout$:e.layout$,event$:a.event$});return()=>{s.next(void 0),c()}}),Dt=({selection:o,pluginName:l,clipPathID:t,categoryLabels$:a,multiValueContainerPosition$:e,multiValueGraphicTransform$:s})=>{const c=L(l,"category"),m=L(l,"axes"),y=L(l,"graphic"),p=a.pipe(A((x,f)=>o.selectAll(`g.${c}`).data(x,D=>D).join(D=>D.append("g").classed(c,!0).each((i,g,d)=>{v(d[g]).selectAll(`g.${m}`).data([g]).join($=>$.append("g").classed(m,!0).attr("clip-path",`url(#${t})`).each((Y,S,F)=>{v(F[S]).selectAll("defs").data([S]).join("defs"),v(F[S]).selectAll("g").data([S]).join("g").classed(y,!0)}),$=>$,$=>$.remove())}),D=>D,D=>D.remove())),I(1));X({categorySelection:p,multiValueContainerPosition:e}).pipe(C(async x=>x)).subscribe(x=>{x.categorySelection.transition().attr("transform",(f,D)=>{const i=x.multiValueContainerPosition[D]??x.multiValueContainerPosition[0],g=i.translate,d=i.scale;return`translate(${g[0]}, ${g[1]}) scale(${d[0]}, ${d[1]})`})});const r=p.pipe(A(x=>x.select(`g.${m}`)),I(1)),n=r.pipe(A(x=>x.select("defs")),I(1)),h=X({axesSelection:r,multiValueGraphicTransform:s}).pipe(C(async x=>x),A(x=>{const f=x.axesSelection.select(`g.${y}`);return f.transition().duration(50).style("transform",x.multiValueGraphicTransform.value),f}),I(1));return{categorySelection$:p,axesSelection$:r,defsSelection$:n,graphicGSelection$:h}},Pe=({rootSelection:o,fullDataFormatter$:l,filteredMinMaxXYData$:t,multiValueContainerPosition$:a,layout$:e})=>{const s=ht(o,"mousemove").pipe(ve(2)),c=a.pipe(A(r=>r.reduce((h,x)=>x.columnIndex>h?x.columnIndex:h,0)+1),w(),I(1)),m=a.pipe(A(r=>r.reduce((h,x)=>x.rowIndex>h?x.rowIndex:h,0)+1),w(),I(1)),y=new q(r=>{X({layout:e,filteredMinMaxXYData:t,fullDataFormatter:l,columnAmount:c,rowAmount:m}).pipe(C(async n=>n)).subscribe(n=>{if(!n.filteredMinMaxXYData.minXDatum||!n.filteredMinMaxXYData.maxXDatum||n.filteredMinMaxXYData.minXDatum.value[0]==null||n.filteredMinMaxXYData.maxXDatum.value[0]==null||!n.filteredMinMaxXYData.minYDatum||!n.filteredMinMaxXYData.maxYDatum||n.filteredMinMaxXYData.minYDatum.value[1]==null||n.filteredMinMaxXYData.maxYDatum.value[1]==null)return;const h=st({maxValue:n.filteredMinMaxXYData.maxXDatum.value[0],minValue:n.filteredMinMaxXYData.minXDatum.value[0],axisWidth:n.layout.width,scaleDomain:n.fullDataFormatter.xAxis.scaleDomain,scaleRange:n.fullDataFormatter.xAxis.scaleRange}),x=st({maxValue:n.filteredMinMaxXYData.maxYDatum.value[1],minValue:n.filteredMinMaxXYData.minYDatum.value[1],axisWidth:n.layout.height,scaleDomain:n.fullDataFormatter.yAxis.scaleDomain,scaleRange:n.fullDataFormatter.yAxis.scaleRange,reverse:!0});r.next({xScale:h,yScale:x})})}),p=X({fullDataFormatter:l,rootMousemove:s,columnAmount:c,rowAmount:m,layout:e,multiValueContainerPosition:a}).pipe(C(async r=>r),A(r=>({x:(r.rootMousemove.offsetX-r.layout.left)/r.multiValueContainerPosition[0].scale[0]%(r.layout.rootWidth/r.columnAmount/r.multiValueContainerPosition[0].scale[0]),y:(r.rootMousemove.offsetY-r.layout.top)/r.multiValueContainerPosition[0].scale[1]%(r.layout.rootHeight/r.rowAmount/r.multiValueContainerPosition[0].scale[1])})));return X({xyScale:y,axisValue:p}).pipe(C(async r=>r),A(r=>({x:r.axisValue.x,y:r.axisValue.y,xValue:r.xyScale.xScale(r.axisValue.x),yValue:r.xyScale.yScale(r.axisValue.y)})))},B="ScatterBubbles",Re=.9,ke={name:B,defaultParams:Ht,layerIndex:qt,validator:(o,{validateColumns:l})=>l(o,{fillColorType:{toBeOption:"ColorType"},strokeColorType:{toBeOption:"ColorType"},strokeWidth:{toBeTypes:["number"]},valueLinearOpacity:{toBeTypes:["number[]"]},arcScaleType:{toBe:"ArcScaleType",test:a=>a==="area"||a==="radius"},sizeAdjust:{toBeTypes:["number"]}})};function Be({graphicGSelection:o,circleGClassName:l,circleClassName:t,bubbleData:a,fullParams:e,fullChartParams:s,graphicReverseScale:c}){const m=r=>{const n=r.size();return s.transitionDuration/n};let y=0;return o.each((r,n,h)=>{v(h[n]).selectAll("g").data(a[n],x=>x.id).join(x=>(y=m(x),x.append("g").classed(l,!0)),x=>x,x=>x.remove()).attr("transform",x=>`translate(${x.axisX}, ${x.axisY})`).each((x,f,D)=>{v(D[f]).selectAll("circle").data([x]).join(i=>i.append("circle").style("cursor","pointer").style("vector-effect","non-scaling-stroke").classed(t,!0).attr("opacity",0).transition().delay((g,d)=>f*y).attr("opacity",.8),i=>i.transition().duration(50).attr("opacity",.8),i=>i.remove()).attr("r",i=>i.r).attr("fill",(i,g)=>ct({datum:i,colorType:e.fillColorType,fullChartParams:s})).attr("stroke",(i,g)=>ct({datum:i,colorType:e.strokeColorType,fullChartParams:s})).attr("stroke-width",e.strokeWidth).attr("transform",`scale(${c[n][0]??1}, ${c[n][1]??1})`)})}),o.selectAll(`circle.${t}`)}function we({selection:o,ids:l,fullChartParams:t}){if(o.interrupt("highlight"),!l.length){o.transition("highlight").duration(200).style("opacity",a=>a.opacity);return}o.each((a,e,s)=>{l.includes(a.id)?v(s[e]).style("opacity",m=>m.opacity).transition("highlight").duration(200):v(s[e]).style("opacity",t.styles.unhighlightedOpacity).transition("highlight").duration(200)})}function Oe({defsSelection:o,clipPathData:l}){o.selectAll("clipPath").data(l).join(t=>t.append("clipPath"),t=>t,t=>t.remove()).attr("id",t=>t.id).each((t,a,e)=>{v(e[a]).selectAll("rect").data([t]).join("rect").attr("x",0).attr("y",0).attr("width",s=>s.width).attr("height",s=>s.height)})}const ha=E(ke)(({selection:o,name:l,subject:t,observer:a})=>{const e=new N,s=Ut(B,"clipPath-box"),c=L(B,"circleG"),m=L(B,"circle"),{categorySelection$:y,axesSelection$:p,defsSelection$:r,graphicGSelection$:n}=Dt({selection:o,pluginName:B,clipPathID:s,categoryLabels$:a.categoryLabels$,multiValueContainerPosition$:a.multiValueContainerPosition$,multiValueGraphicTransform$:a.multiValueGraphicTransform$}),h=X({computedData:a.computedData$,multiValueGraphicReverseScale:a.multiValueGraphicReverseScale$}).pipe(T(e),C(async u=>u),A(u=>u.computedData.map((M,b)=>u.multiValueGraphicReverseScale[b])));X({defsSelection:r,layout:a.layout$}).pipe(T(e),C(async u=>u)).subscribe(u=>{const M=[{id:s,width:u.layout.width,height:u.layout.height}];Oe({defsSelection:u.defsSelection,clipPathData:M})});const x=a.filteredMinMaxXYData$.pipe(T(e),A(u=>u.datumList.flat().map(M=>M.value[2]??0)),I(1)),f=a.filteredMinMaxXYData$.pipe(T(e),A(u=>Jt(u.datumList.flat().map(M=>M.value[2]??0)))),D=X({filteredMinMaxValue:f,fullParams:a.fullParams$}).pipe(T(e),C(async u=>u),A(u=>Zt().domain(u.filteredMinMaxValue).range(u.fullParams.valueLinearOpacity))),i=X({layout:a.layout$,fullParams:a.fullParams$}).pipe(T(e),A(u=>Math.min(u.layout.width,u.layout.height)/2*u.fullParams.sizeAdjust)),g=x.pipe(T(e),A(u=>u.reduce((M,b)=>M+b,0)),ue(u=>u>0)),d=X({totalR:i,totalValue:g,fullParams:a.fullParams$}).pipe(T(e),C(async u=>u),A(u=>Kt().domain([0,u.totalValue]).range([0,u.totalR]).exponent(u.fullParams.arcScaleType==="area"?.5:1))),$=X({radiusScale:d,fullParams:a.fullParams$,totalR:i,filteredValueList:x}).pipe(T(e),C(async u=>u),A(u=>u.fullParams.arcScaleType==="area"?1:(()=>{const M=u.totalR*u.totalR*Math.PI;return Math.sqrt(M/Qt(u.filteredValueList,b=>Math.PI*Math.pow(u.radiusScale(b),2)))})())),Y=X({computedLayoutData:a.computedLayoutData$,opacityScale:D,radiusScale:d,scaleFactor:$,fullParams:a.fullParams$}).pipe(T(e),C(async u=>u),A(u=>u.computedLayoutData.map(M=>M.map(b=>{const R=b;return R.r=u.radiusScale(R.value[2])*u.scaleFactor*Re,R.opacity=u.opacityScale(R.value[2]),R})))),S=X({graphicGSelection:n,bubbleData:Y,graphicReverseScale:h,fullChartParams:a.fullChartParams$,fullParams:a.fullParams$}).pipe(T(e),C(async u=>u),A(u=>Be({graphicGSelection:u.graphicGSelection,circleGClassName:c,circleClassName:m,bubbleData:u.bubbleData,fullParams:u.fullParams,fullChartParams:u.fullChartParams,graphicReverseScale:u.graphicReverseScale}))),F=a.fullChartParams$.pipe(T(e),A(u=>u.highlightTarget),w());return X({graphicSelection:S,computedData:a.computedData$,CategoryDataMap:a.CategoryDataMap$,highlightTarget:F}).pipe(T(e),C(async u=>u)).subscribe(u=>{u.graphicSelection.on("mouseover",(M,b)=>{t.event$.next({type:"multiValue",eventName:"mouseover",pluginName:B,highlightTarget:u.highlightTarget,datum:b,category:u.CategoryDataMap.get(b.categoryLabel),categoryIndex:b.categoryIndex,categoryLabel:b.categoryLabel,data:u.computedData,event:M})}).on("mousemove",(M,b)=>{t.event$.next({type:"multiValue",eventName:"mousemove",pluginName:B,highlightTarget:u.highlightTarget,datum:b,category:u.CategoryDataMap.get(b.categoryLabel),categoryIndex:b.categoryIndex,categoryLabel:b.categoryLabel,data:u.computedData,event:M})}).on("mouseout",(M,b)=>{t.event$.next({type:"multiValue",eventName:"mouseout",pluginName:B,highlightTarget:u.highlightTarget,datum:b,category:u.CategoryDataMap.get(b.categoryLabel),categoryIndex:b.categoryIndex,categoryLabel:b.categoryLabel,data:u.computedData,event:M})}).on("click",(M,b)=>{t.event$.next({type:"multiValue",eventName:"click",pluginName:B,highlightTarget:u.highlightTarget,datum:b,category:u.CategoryDataMap.get(b.categoryLabel),categoryIndex:b.categoryIndex,categoryLabel:b.categoryLabel,data:u.computedData,event:M})})}),X({graphicSelection:S,highlight:a.multiValueHighlight$.pipe(A(u=>u.map(M=>M.id))),fullChartParams:a.fullChartParams$}).pipe(T(e),C(async u=>u)).subscribe(u=>{we({selection:u.graphicSelection,ids:u.highlight,fullChartParams:u.fullChartParams})}),()=>{e.next(void 0)}}),K="XYAux",et=L(K,"label-box"),Ie={name:K,defaultParams:te,layerIndex:ee,validator:(o,{validateColumns:l})=>{const t=l(o,{xAxis:{toBeTypes:["object"]},yAxis:{toBeTypes:["object"]}});if(o.xAxis){const a=l(o.xAxis,{showLine:{toBeTypes:["boolean"]},showLabel:{toBeTypes:["boolean"]},lineDashArray:{toBeTypes:["string"]},lineColorType:{toBeOption:"ColorType"},labelColorType:{toBeOption:"ColorType"},labelTextColorType:{toBeOption:"ColorType"},labelTextFormat:{toBeTypes:["string","Function"]},labelPadding:{toBeTypes:["number"]}});if(a.status==="error")return a}if(o.yAxis){const a=l(o.yAxis,{showLine:{toBeTypes:["boolean"]},showLabel:{toBeTypes:["boolean"]},lineDashArray:{toBeTypes:["string"]},lineColorType:{toBeOption:"ColorType"},labelColorType:{toBeOption:"ColorType"},labelTextColorType:{toBeOption:"ColorType"},labelTextFormat:{toBeTypes:["string","Function"]},labelPadding:{toBeTypes:["number"]}});if(a.status==="error")return a}return t}};function _e({axisX:o,axisY:l,layout:t,fullParams:a}){return o>=0&&o<=t.width&&l>=0&&l<=t.height?[{id:"line-x",x1:o,x2:o,y1:0,y2:t.height,dashArray:a.xAxis.lineDashArray??"none",colorType:a.xAxis.lineColorType},{id:"line-0",x1:0,x2:t.width,y1:l,y2:l,dashArray:a.yAxis.lineDashArray??"none",colorType:a.yAxis.lineColorType}]:[]}function Ee({axisX:o,axisY:l,xValue:t,yValue:a,fullParams:e,textSizePx:s,layout:c,columnAmount:m,rowAmount:y}){if(!(o>=0&&o<=c.width&&l>=0&&l<=c.height))return[];const p=6,r=3,n=o,h=c.height+e.xAxis.labelPadding*y,x=Z(t,e.xAxis.labelTextFormat),f=x.split(`
`),D=f.reduce((j,G)=>G.length>j.length?G:j,""),i=xt(D,s),g=s*f.length,d=i+p*2,$=g+r*2,Y=-d/2,S=-r,F=Y+p,u=S+r,M=-(e.yAxis.labelPadding*m),b=l,R=Z(a,e.yAxis.labelTextFormat),U=R.split(`
`),H=U.reduce((j,G)=>G.length>j.length?G:j,""),z=xt(H,s),_=s*U.length,it=z+p*2,At=_+r*2,lt=-z-p,nt=-r-_/2,bt=lt+p,Tt=nt+r;return[{id:"label-x",x:n,y:h,text:x,textArr:f,textWidth:i,textHeight:g,colorType:e.xAxis.labelColorType,textColorType:e.xAxis.labelTextColorType,rectWidth:d,rectHeight:$,rectX:Y,rectY:S,textX:F,textY:u},{id:"label-y",x:M,y:b,text:R,textArr:U,textWidth:z,textHeight:_,colorType:e.yAxis.labelColorType,textColorType:e.xAxis.labelTextColorType,rectWidth:it,rectHeight:At,rectX:lt,rectY:nt,textX:bt,textY:Tt}]}function Ne({selection:o,pluginName:l,lineData:t,fullParams:a,fullChartParams:e}){const s=L(l,"auxline");return o.selectAll(`line.${s}`).data(t).join(m=>m.append("line").classed(s,!0).style("stroke-width",1).style("pointer-events","none").style("vector-effect","non-scaling-stroke").attr("x1",y=>y.x1).attr("y1",y=>y.y1).attr("x2",y=>y.x2).attr("y2",y=>y.y2),m=>m.transition().duration(50).attr("x1",p=>p.x1).attr("y1",p=>p.y1).attr("x2",p=>p.x2).attr("y2",p=>p.y2),m=>m.remove()).style("stroke",m=>P(m.colorType,e)).style("stroke-dasharray",m=>m.dashArray)}function ze(o){o.selectAll("line").data([]).exit().remove()}function je({selection:o,labelData:l,fullParams:t,fullDataFormatter:a,fullChartParams:e,textReverseTransform:s,textSizePx:c}){return o.selectAll(`g.${et}`).data(l).join(y=>y.append("g").classed(et,!0).style("cursor","pointer").attr("transform",(p,r)=>`translate(${p.x}, ${p.y})`),y=>y.transition().duration(50).attr("transform",(r,n)=>`translate(${r.x}, ${r.y})`),y=>y.remove()).each((y,p,r)=>{v(r[p]).selectAll("rect").data([y]).join(n=>n.append("rect").style("cursor","pointer").attr("rx",5).attr("ry",5),n=>n,n=>n.remove()).attr("width",n=>`${n.rectWidth}px`).attr("height",n=>`${n.rectHeight}px`).attr("fill",n=>P(n.colorType,e)).attr("x",n=>n.rectX).attr("y",n=>n.rectY).style("transform",s),v(r[p]).selectAll("text").data([y]).join(n=>n.append("text").style("dominant-baseline","hanging").style("cursor","pointer").style("pointer-events","none"),n=>n,n=>n.remove()).style("transform",s).attr("fill",n=>P(n.textColorType,e)).attr("font-size",e.styles.textSize).attr("x",n=>n.textX).attr("y",n=>n.textY).each((n,h,x)=>{ae(v(x[h]),{textArr:y.textArr,textSizePx:c,groupAxisPosition:h===0?"bottom":"left"})})})}function Ge(o){o.selectAll(`g.${et}`).data([]).exit().remove()}const ga=E(Ie)(({selection:o,rootSelection:l,name:t,subject:a,observer:e})=>{const s=new N,c=l.insert("rect","g").classed(L(K,"rect"),!0).attr("opacity",0),{categorySelection$:m,axesSelection$:y,defsSelection$:p,graphicGSelection$:r}=Dt({selection:o,pluginName:K,clipPathID:"test",categoryLabels$:e.isCategorySeprate$.pipe(C(i=>ie(()=>i,e.categoryLabels$,e.categoryLabels$.pipe(A(g=>[g[0]]))))),multiValueContainerPosition$:e.multiValueContainerPosition$,multiValueGraphicTransform$:e.multiValueGraphicTransform$});e.layout$.pipe(T(s)).subscribe(i=>{c.attr("width",i.rootWidth).attr("height",i.rootHeight)});const n=e.multiValueContainerPosition$.pipe(A(i=>i.reduce((d,$)=>$.columnIndex>d?$.columnIndex:d,0)+1),w()),h=e.multiValueContainerPosition$.pipe(A(i=>i.reduce((d,$)=>$.rowIndex>d?$.rowIndex:d,0)+1),w()),x=e.multiValueContainerPosition$.pipe(T(s),C(async i=>i),A(i=>`${`scale(${1/i[0].scale[0]}, ${1/i[0].scale[1]})`}`),w()),f=Pe({rootSelection:l,fullDataFormatter$:e.fullDataFormatter$,filteredMinMaxXYData$:e.filteredMinMaxXYData$,multiValueContainerPosition$:e.multiValueContainerPosition$,layout$:e.layout$}).pipe(T(s));X({axesSelection:y,layout:e.layout$,xyPosition:f,fullParams:e.fullParams$,fullDataFormatter:e.fullDataFormatter$,fullChartParams:e.fullChartParams$,textReverseTransform:x,textSizePx:e.textSizePx$,columnAmount:n,rowAmount:h}).pipe(T(s),C(async i=>i)).subscribe(i=>{const{x:g,y:d,xValue:$,yValue:Y}=i.xyPosition,S=_e({axisX:g,axisY:d,layout:i.layout,fullParams:i.fullParams});Ne({selection:i.axesSelection,pluginName:t,lineData:S,fullParams:i.fullParams,fullChartParams:i.fullChartParams});const F=Ee({axisX:g,axisY:d,xValue:$,yValue:Y,fullParams:i.fullParams,textSizePx:i.textSizePx,layout:i.layout,columnAmount:i.columnAmount,rowAmount:i.rowAmount});je({selection:i.axesSelection,labelData:F,fullParams:i.fullParams,fullDataFormatter:i.fullDataFormatter,fullChartParams:i.fullChartParams,textReverseTransform:i.textReverseTransform,textSizePx:i.textSizePx})});const D=ht(c,"mouseout").pipe(T(s));return X({rootRectMouseout:D,axesSelection:y}).pipe(T(s),C(async i=>i)).subscribe(i=>{setTimeout(()=>{ze(i.axesSelection),Ge(i.axesSelection)})}),()=>{s.next(void 0),c.remove()}}),O="XYAxes",$t=6,We="middle",Ue="hanging",He="start",qe="hanging",Je="end",Ze="middle",Ke="end",Qe="auto",ta={name:O,defaultParams:le,layerIndex:ne,validator:(o,{validateColumns:l})=>{const t=l(o,{xAxis:{toBeTypes:["object"]},yAxis:{toBeTypes:["object"]}});if(o.xAxis){const a=l(o.xAxis,{labelOffset:{toBe:"[number, number]",test:e=>Array.isArray(e)&&e.length===2&&typeof e[0]=="number"&&typeof e[1]=="number"},labelColorType:{toBeOption:"ColorType"},axisLineVisible:{toBeTypes:["boolean"]},axisLineColorType:{toBeOption:"ColorType"},ticks:{toBeTypes:["number","null"]},tickFormat:{toBeTypes:["string","Function"]},tickLineVisible:{toBeTypes:["boolean"]},tickPadding:{toBeTypes:["number"]},tickFullLine:{toBeTypes:["boolean"]},tickFullLineDasharray:{toBeTypes:["string"]},tickColorType:{toBeOption:"ColorType"},tickTextColorType:{toBeOption:"ColorType"}});if(a.status==="error")return a}if(o.yAxis){const a=l(o.yAxis,{labelOffset:{toBe:"[number, number]",test:e=>Array.isArray(e)&&e.length===2&&typeof e[0]=="number"&&typeof e[1]=="number"},labelColorType:{toBeOption:"ColorType"},axisLineVisible:{toBeTypes:["boolean"]},axisLineColorType:{toBeOption:"ColorType"},ticks:{toBeTypes:["number","null"]},tickFormat:{toBeTypes:["string","Function"]},tickLineVisible:{toBeTypes:["boolean"]},tickPadding:{toBeTypes:["number"]},tickFullLine:{toBeTypes:["boolean"]},tickFullLineDasharray:{toBeTypes:["string"]},tickColorType:{toBeOption:"ColorType"},tickTextColorType:{toBeOption:"ColorType"}});if(a.status==="error")return a}return t}};function ea({selection:o,xLabelClassName:l,fullParams:t,layout:a,fullDataFormatter:e,fullChartParams:s,textReverseTransform:c}){const m=t.xAxis.tickPadding+t.xAxis.labelOffset[0],y=t.xAxis.tickPadding+t.xAxis.labelOffset[1];let p=m,r=y;o.selectAll(`g.${l}`).data([t]).join("g").classed(l,!0).each((n,h,x)=>{v(x[h]).selectAll("text").data([n]).join(f=>f.append("text").style("font-weight","bold"),f=>f,f=>f.remove()).attr("text-anchor",He).attr("dominant-baseline",qe).attr("font-size",s.styles.textSize).style("fill",P(t.xAxis.labelColorType,s)).style("transform",c).attr("x",p).attr("y",r).text(f=>e.xAxis.label)}).attr("transform",n=>`translate(${a.width}, ${a.height})`)}function aa({selection:o,yLabelClassName:l,fullParams:t,layout:a,fullDataFormatter:e,fullChartParams:s,textReverseTransform:c}){const m=t.yAxis.tickPadding-t.yAxis.labelOffset[0],y=t.yAxis.tickPadding+t.yAxis.labelOffset[1];let p=-m,r=-y;o.selectAll(`g.${l}`).data([t]).join("g").classed(l,!0).each((n,h,x)=>{v(x[h]).selectAll("text").data([n]).join(f=>f.append("text").style("font-weight","bold"),f=>f,f=>f.remove()).attr("text-anchor",Ke).attr("dominant-baseline",Qe).attr("font-size",s.styles.textSize).style("fill",P(t.yAxis.labelColorType,s)).style("transform",c).attr("x",p).attr("y",r).text(f=>e.yAxis.label)})}function ia({selection:o,xAxisClassName:l,fullParams:t,layout:a,fullDataFormatter:e,fullChartParams:s,xScale:c,textReverseTransform:m,minMaxXY:y}){const p=o.selectAll(`g.${l}`).data([t]).join("g").classed(l,!0).attr("transform",`translate(0, ${a.height})`);let r=t.xAxis.tickPadding;const n=me(c).scale(c).ticks(t.xAxis.ticks).tickFormat(f=>Z(f,t.xAxis.tickFormat)).tickSize(t.xAxis.tickFullLine==!0?-a.height:$t).tickSizeOuter(-a.height).tickPadding(r),h=p.transition().duration(100).call(n);return h.selectAll("line").style("fill","none").style("stroke",t.xAxis.tickLineVisible==!0?P(t.xAxis.tickColorType,s):"none").style("stroke-dasharray",t.xAxis.tickFullLineDasharray).attr("pointer-events","none"),h.selectAll("path").style("fill","none").style("stroke",t.xAxis.axisLineVisible==!0?P(t.xAxis.axisLineColorType,s):"none").style("shape-rendering","crispEdges"),p.selectAll("text").attr("font-size",s.styles.textSize).style("color",P(t.xAxis.tickTextColorType,s)).attr("text-anchor",We).attr("dominant-baseline",Ue).attr("dy",0).attr("y",r).style("transform",m),p}function la({selection:o,yAxisClassName:l,fullParams:t,layout:a,fullDataFormatter:e,fullChartParams:s,yScale:c,textReverseTransform:m,minMaxXY:y}){const p=o.selectAll(`g.${l}`).data([t]).join("g").classed(l,!0);let r=t.yAxis.tickPadding;const n=xe(c).scale(c).ticks(t.xAxis.ticks).tickFormat(f=>Z(f,t.yAxis.tickFormat)).tickSize(t.yAxis.tickFullLine==!0?-a.width:$t).tickPadding(r),h=p.transition().duration(100).call(n);return h.selectAll("line").style("fill","none").style("stroke",t.yAxis.tickLineVisible==!0?P(t.yAxis.tickColorType,s):"none").style("stroke-dasharray",t.yAxis.tickFullLineDasharray).attr("pointer-events","none"),h.selectAll("path").style("fill","none").style("stroke",t.yAxis.axisLineVisible==!0?P(t.yAxis.axisLineColorType,s):"none").style("shape-rendering","crispEdges"),p.selectAll("text").attr("font-size",s.styles.textSize).style("color",P(t.yAxis.tickTextColorType,s)).attr("text-anchor",Je).attr("dominant-baseline",Ze).attr("x",-r).attr("dy",0).style("transform",m),p}const da=E(ta)(({selection:o,name:l,observer:t,subject:a})=>{const e=new N,s=L(O,"container"),c=L(O,"xAxis"),m=L(O,"yAxisG"),y=L(O,"yAxis"),p=L(O,"xLabel"),r=L(O,"yLabel"),n=X({computedData:t.computedData$.pipe(w((i,g)=>i.length===g.length)),isCategorySeprate:t.isCategorySeprate$}).pipe(T(e),C(async i=>i),A(i=>i.isCategorySeprate?i.computedData:[i.computedData[0]]),A((i,g)=>o.selectAll(`g.${s}`).data(i,d=>d[0]?d[0].categoryIndex:g).join("g").classed(s,!0))),h=n.pipe(T(e),A((i,g)=>i.selectAll(`g.${m}`).data([m]).join("g").classed(m,!0)));X({containerSelection:n,gridContainerPosition:t.multiValueContainerPosition$}).pipe(T(e),C(async i=>i)).subscribe(i=>{i.containerSelection.attr("transform",(g,d)=>{const $=i.gridContainerPosition[d]??i.gridContainerPosition[0],Y=$.translate,S=$.scale;return`translate(${Y[0]}, ${Y[1]}) scale(${S[0]}, ${S[1]})`})});const x=t.multiValueContainerPosition$.pipe(T(e),C(async i=>i),A(i=>`${`scale(${1/i[0].scale[0]}, ${1/i[0].scale[1]})`}`),w()),f=new q(i=>{X({fullDataFormatter:t.fullDataFormatter$,layout:t.layout$,filteredMinMaxXYData:t.filteredMinMaxXYData$}).pipe(T(e),C(async g=>g)).subscribe(g=>{if(!g.filteredMinMaxXYData.minXDatum||!g.filteredMinMaxXYData.maxXDatum||g.filteredMinMaxXYData.minXDatum.value[0]==null||g.filteredMinMaxXYData.maxXDatum.value[0]==null)return;let d=g.filteredMinMaxXYData.maxXDatum.value[0],$=g.filteredMinMaxXYData.minXDatum.value[0];d===$&&d===0&&(d=1);const Y=tt({maxValue:d,minValue:$,axisWidth:g.layout.width,scaleDomain:g.fullDataFormatter.xAxis.scaleDomain,scaleRange:g.fullDataFormatter.xAxis.scaleRange});i.next(Y)})}),D=new q(i=>{X({fullDataFormatter:t.fullDataFormatter$,layout:t.layout$,filteredMinMaxXYData:t.filteredMinMaxXYData$}).pipe(T(e),C(async g=>g)).subscribe(g=>{if(!g.filteredMinMaxXYData.minYDatum||!g.filteredMinMaxXYData.maxYDatum||g.filteredMinMaxXYData.minYDatum.value[1]==null||g.filteredMinMaxXYData.maxYDatum.value[1]==null)return;let d=g.filteredMinMaxXYData.maxYDatum.value[1],$=g.filteredMinMaxXYData.minYDatum.value[1];d===$&&d===0&&(d=1);const Y=tt({maxValue:d,minValue:$,axisWidth:g.layout.height,scaleDomain:g.fullDataFormatter.yAxis.scaleDomain,scaleRange:g.fullDataFormatter.yAxis.scaleRange,reverse:!0});i.next(Y)})});return X({axisSelection:h,fullParams:t.fullParams$,computedData:t.computedData$,layout:t.layout$,fullDataFormatter:t.fullDataFormatter$,fullChartParams:t.fullChartParams$,xScale:f,yScale:D,textReverseTransform:x,minMaxXY:t.minMaxXY$}).pipe(T(e),C(async i=>i)).subscribe(i=>{ia({selection:i.axisSelection,xAxisClassName:c,fullParams:i.fullParams,layout:i.layout,fullDataFormatter:i.fullDataFormatter,fullChartParams:i.fullChartParams,xScale:i.xScale,textReverseTransform:i.textReverseTransform,minMaxXY:i.minMaxXY}),la({selection:i.axisSelection,yAxisClassName:y,fullParams:i.fullParams,layout:i.layout,fullDataFormatter:i.fullDataFormatter,fullChartParams:i.fullChartParams,yScale:i.yScale,textReverseTransform:i.textReverseTransform,minMaxXY:i.minMaxXY}),ea({selection:i.axisSelection,xLabelClassName:p,fullParams:i.fullParams,layout:i.layout,fullDataFormatter:i.fullDataFormatter,fullChartParams:i.fullChartParams,textReverseTransform:i.textReverseTransform}),aa({selection:i.axisSelection,yLabelClassName:r,fullParams:i.fullParams,layout:i.layout,fullDataFormatter:i.fullDataFormatter,fullChartParams:i.fullChartParams,textReverseTransform:i.textReverseTransform})}),()=>{e.next(void 0)}}),na="XYZoom",oa={name:na,defaultParams:oe,layerIndex:re,validator:(o,{validateColumns:l})=>({status:"success",columnName:"",expectToBe:""})},Da=E(oa)(({selection:o,rootSelection:l,name:t,observer:a,subject:e})=>{const s=new N;let c={k:1,x:0,y:0};const m=a.fullDataFormatter$.pipe(A(n=>n.xAxis),ut()),y=a.fullDataFormatter$.pipe(A(n=>n.yAxis),ut()),p=new q(n=>{X({initXAxis:m,layout:a.layout$,minMaxXY:a.minMaxXY$}).pipe(T(s),C(async h=>h)).subscribe(h=>{const x=tt({maxValue:h.minMaxXY.maxX,minValue:h.minMaxXY.minX,axisWidth:h.layout.width,scaleDomain:h.initXAxis.scaleDomain,scaleRange:h.initXAxis.scaleRange});n.next(x)})}),r=X({initXAxis:m,initYAxis:y,minMaxXY:a.minMaxXY$}).pipe(T(s),C(async n=>n),A(n=>{let h=n.minMaxXY.minX,x=n.minMaxXY.maxX,f=n.minMaxXY.minY,D=n.minMaxXY.maxY;return n.initXAxis.scaleDomain[0]==="auto"&&h>0&&(h=0),n.initXAxis.scaleDomain[1]==="auto"&&x<0&&(x=0),n.initYAxis.scaleDomain[0]==="auto"&&f>0&&(f=0),n.initYAxis.scaleDomain[1]==="auto"&&D<0&&(D=0),{minX:h,maxX:x,minY:f,maxY:D}}));return X({initXScale:p,fullDataFormatter:a.fullDataFormatter$,minMaxScaleDomain:r}).pipe(T(s),C(async n=>n)).subscribe(n=>{const h=n.initXScale.copy(),x=mt().on("zoom",function(D){const i=D.transform,g=Y=>{const S=Math.round(Y);return Math.min(n.minMaxScaleDomain.maxX,Math.max(n.minMaxScaleDomain.minX,S))},d=i.rescaleX(h).domain().map(g);d[0]<=n.minMaxScaleDomain.minX&&d[1]>=n.minMaxScaleDomain.maxX?i.k<c.k&&(i.k=c.k,i.x=c.x,i.y=c.y):d[1]-d[0]<=1&&i.k>c.k&&(i.k=c.k,i.x=c.x,i.y=c.y),c.k=i.k,c.x=i.x,c.y=i.y;const $={...n.fullDataFormatter,xAxis:{...n.fullDataFormatter.xAxis,scaleDomain:d}};e.dataFormatter$.next($)});l.call(x)}),()=>{s.next(void 0),l.call(mt().on("zoom",null))}});export{ya as M,ha as S,ga as X,fa as a,da as b,Da as c,pa as d,Dt as m};
