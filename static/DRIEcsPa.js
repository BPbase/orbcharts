import{k as w,l as sa,n as la,o as oa,p as na,q as ca,r as ua,u as da,v,y as m,z as Z,A as aa,B as U,C as g,E as ma,F as pa,G as $a,H as ga,I as fa,J as Da,j as A,S as G,t as h,d as L,s as z,f as k,K as La,e as E,g as x}from"./DTMfjTug.js";import{c as ba,a as ha,b as Aa,d as Ga,e as Pa,f as Ca,s as Ta,h as ya,i as xa,j as Sa}from"./b2J-cE12.js";import{c as Fa}from"./QZuagGDf.js";import{c as Ma}from"./BSAcznNU.js";import{s as I,g as S}from"./D2FdcmjD.js";import{c as Ra}from"./DodeClqA.js";import{c as _a}from"./CcLHzMHG.js";import{a as va,c as ka}from"./BsvKXhGM.js";const Ea=c=>{const{data:l=[],dataFormatter:i,chartParams:r}=c;if(!l.length)return[];let u=[];try{const t=i.gridList[0]||w,$=l.map((s,n)=>i.gridList[n]||t),o=l.map((s,n)=>ba(s,$[n])),a=i.separateGrid?o.map((s,n)=>sa({transposedDataGrid:s,dataFormatterGrid:$[n],chartType:"multiGrid"})):o.map((s,n)=>la({transposedDataGrid:s,dataFormatterGrid:$[n],chartType:"multiGrid",gridIndex:n})),e=new Map;let d=0;a.flat().forEach((s,n)=>{if(!e.has(s)){const p=oa(d,r);e.set(s,p),d++}}),u=o.map((s,n)=>{const p=a[n],b=na({transposedDataGrid:s,dataFormatterGrid:$[n],chartType:"multiGrid",gridIndex:n});let f=0;return s.map((P,C)=>P.map((D,T)=>{const M=ca("multiGrid",n,C,T),R=b[T],_=p[C],y={id:D.id?D.id:M,index:f,label:D.label?D.label:M,description:D.description??"",data:D.data,value:D.value,gridIndex:n,seriesIndex:C,seriesLabel:_,groupIndex:T,groupLabel:R,color:e.get(_),visible:!0};return y.visible=i.visibleFilter(y,c),f++,y}))})}catch(t){throw Error(t)}return u},Ia=({fullDataFormatter$:c,computedData$:l,layout$:i,fullChartParams$:r,event$:u})=>{const t=new ua,$=da({datumList$:l.pipe(v(a=>a.flat().flat()),m(1)),fullChartParams$:r,event$:u}).pipe(m(1)),o=Oa({computedData$:l,fullDataFormatter$:c,layout$:i}).pipe(m(1));return Z({fullDataFormatter:c,computedData:l,multiGridContainer:o}).pipe(aa(async a=>a),v(a=>{t.next(void 0);const e=a.fullDataFormatter.gridList[0]??w;return a.computedData.map((d,s)=>{const n=a.fullDataFormatter.gridList[s]??e,p={type:"grid",visibleFilter:a.fullDataFormatter.visibleFilter,grid:{...n},container:{...a.fullDataFormatter.container}},b=U(p).pipe(g(t),m(1)),f=U(d).pipe(g(t),m(1)),O=U(a.multiGridContainer[s]).pipe(g(t),m(1)),P=ha({fullDataFormatter$:b,layout$:i}).pipe(g(t),m(1)),C=Aa({gridAxesTransform$:P}).pipe(g(t),m(1)),D=Ga({computedData$:f,fullDataFormatter$:b,layout$:i}).pipe(g(t),m(1)),T=Pa({gridContainerPosition$:O,gridAxesTransform$:P,gridGraphicTransform$:D}),M=Ca({fullDataFormatter$:b,layout$:i}).pipe(g(t),m(1)),R=f.pipe(v(ia=>ia.flat())).pipe(g(t),m(1)),_=Ta({computedData$:f}).pipe(g(t),m(1)),y=ma({datumList$:R}).pipe(g(t),m(1)),ta=pa({datumList$:R}).pipe(g(t),m(1)),ea=ya({computedData$:f}).pipe(g(t),m(1)),W=xa({computedData$:f,fullDataFormatter$:b,layout$:i}).pipe(g(t),m(1)),ra=Sa({computedLayoutData$:W}).pipe(g(t),m(1));return{gridContainerPosition$:O,gridAxesTransform$:P,gridAxesReverseTransform$:C,gridGraphicTransform$:D,gridGraphicReverseScale$:T,gridAxesSize$:M,gridHighlight$:$,seriesLabels$:_,SeriesDataMap$:y,GroupDataMap$:ta,dataFormatter$:b,computedData$:f,computedLayoutData$:W,visibleComputedData$:ea,visibleComputedLayoutData$:ra}})}))},Oa=({computedData$:c,fullDataFormatter$:l,layout$:i})=>Z({computedData:c,fullDataFormatter:l,layout:i}).pipe(aa(async r=>r),v(r=>{const u=r.fullDataFormatter.gridList[0]??w,t=r.computedData.reduce((e,d,s)=>{const p=(r.fullDataFormatter.gridList[s]??u).separateSeries?d.length:r.fullDataFormatter.separateGrid?1:0;return e+p},0)||1,$=$a(r.layout,r.fullDataFormatter.container,t);let o=0;return r.computedData.map((e,d)=>{const s=r.fullDataFormatter.gridList[d]??u,n=e.map((p,b)=>{const f=$[o];return s.separateSeries&&(o+=1),f});return!s.separateSeries&&r.fullDataFormatter.separateGrid&&(o+=1),n})})),Ua=({subject:c,observer:l})=>{const i=ga(l.fullChartParams$).pipe(m(1)),r=Ia({fullDataFormatter$:l.fullDataFormatter$,computedData$:l.computedData$,layout$:l.layout$,fullChartParams$:l.fullChartParams$,event$:c.event$}).pipe(m(1));return{fullParams$:l.fullParams$,fullChartParams$:l.fullChartParams$,fullDataFormatter$:l.fullDataFormatter$,computedData$:l.computedData$,layout$:l.layout$,textSizePx$:i,multiGridEachDetail$:r}};class Za extends fa{constructor(l,i){super({defaultDataFormatter:Da,computedDataFn:Ea,contextObserverFn:Ua},l,i)}}const za={position:"right",justify:"end",padding:28,backgroundFill:"none",backgroundStroke:"none",gap:10,listRectWidth:14,listRectHeight:14,listRectRadius:0,gridList:[{listRectWidth:14,listRectHeight:14,listRectRadius:0}],textColorType:"primary"},Na={labelOffset:[0,0],labelColorType:"primary",axisLineVisible:!0,axisLineColorType:"primary",tickFormat:c=>c,tickLineVisible:!0,tickPadding:20,tickFullLine:!1,tickFullLineDasharray:"none",tickColorType:"secondary",tickTextRotate:0,tickTextColorType:"primary",gridIndexes:[0]},Va={labelOffset:[0,0],labelColorType:"primary",axisLineVisible:!1,axisLineColorType:"primary",ticks:4,tickFormat:",.0f",tickLineVisible:!0,tickPadding:20,tickFullLine:!0,tickFullLineDasharray:"none",tickColorType:"secondary",tickTextRotate:0,tickTextColorType:"primary",gridIndexes:[0]},ja={barWidth:0,barPadding:1,barGroupPadding:40,barRadius:!1,gridIndexes:[0]},at={barWidth:0,barGroupPadding:10,barRadius:!1,gridIndexes:[0]},tt={barWidth:0,barPadding:1,barGroupPadding:20,linearGradientOpacity:[1,0],gridIndexes:[0]},Ba={lineCurve:"curveLinear",lineWidth:2,gridIndexes:[1]},et={lineCurve:"curveLinear",linearGradientOpacity:[1,0],gridIndexes:[1]},Ha={radius:4,fillColorType:"white",strokeColorType:"series",strokeWidth:2,onlyShowHighlighted:!1,gridIndexes:[1]},rt={firstAxis:{labelOffset:[0,0],labelColorType:"primary",axisLineVisible:!1,axisLineColorType:"primary",ticks:4,tickFormat:",.0f",tickLineVisible:!0,tickPadding:20,tickFullLine:!0,tickFullLineDasharray:"none",tickColorType:"secondary",tickTextRotate:0,tickTextColorType:"primary"},secondAxis:{labelOffset:[0,0],labelColorType:"primary",axisLineVisible:!1,axisLineColorType:"primary",ticks:4,tickFormat:",.0f",tickLineVisible:!0,tickPadding:20,tickFullLine:!0,tickFullLineDasharray:"none",tickColorType:"secondary",tickTextRotate:0,tickTextColorType:"primary"},gridIndexes:[0,1]},X="MultiGridLegend",it=A(X,za)(({selection:c,rootSelection:l,observer:i,subject:r})=>{const u=new G,t=i.multiGridEachDetail$.pipe(h(u),L(e=>e.map((s,n)=>s.SeriesDataMap$.pipe(L(p=>Array.from(p.keys()))))),z(e=>k(e)),L(e=>e.flat())),$=k({fullParams:i.fullParams$,computedData:i.computedData$}).pipe(h(u),z(async e=>e),L(e=>e.computedData.map((d,s)=>{const n=La(e.fullParams.gridList[s]??{},{listRectWidth:e.fullParams.listRectWidth,listRectHeight:e.fullParams.listRectHeight,listRectRadius:e.fullParams.listRectRadius});return d.map(p=>n)}).flat())),o=k({fullParams:i.fullParams$,seriesList:$}).pipe(h(u),z(async e=>e),L(e=>({...e.fullParams,seriesList:e.seriesList}))),a=Fa(X,{rootSelection:l,seriesLabels$:t,fullParams$:o,layout$:i.layout$,fullChartParams$:i.fullChartParams$,textSizePx$:i.textSizePx$});return()=>{u.next(void 0),a()}}),F=c=>{const l=c.fullParams$.pipe(L(i=>i.gridIndexes),E(),I(1));return k({multiGridEachDetail:c.multiGridEachDetail$,gridIndexes:l}).pipe(L(i=>i.gridIndexes.map(r=>i.multiGridEachDetail[r]??i.multiGridEachDetail[0])))},N="MultiBars",K=S(N,"grid"),st=A(N,ja)(({selection:c,name:l,subject:i,observer:r})=>{const u=new G,t=[];return F(r).subscribe(o=>{t.forEach(a=>a()),c.selectAll(`g.${K}`).data(o).join("g").attr("class",K).each((a,e,d)=>{const s=x(d[e]),n=a.dataFormatter$.pipe(h(u),L(p=>p.grid.separateSeries),E(),I(1));t[e]=Ma(N,{selection:s,computedData$:a.computedData$,visibleComputedData$:a.visibleComputedData$,computedLayoutData$:a.computedLayoutData$,visibleComputedLayoutData$:a.visibleComputedLayoutData$,seriesLabels$:a.seriesLabels$,SeriesDataMap$:a.SeriesDataMap$,GroupDataMap$:a.GroupDataMap$,fullParams$:r.fullParams$,fullChartParams$:r.fullChartParams$,gridAxesTransform$:a.gridAxesTransform$,gridGraphicTransform$:a.gridGraphicTransform$,gridGraphicReverseScale$:a.gridGraphicReverseScale$,gridAxesSize$:a.gridAxesSize$,gridHighlight$:a.gridHighlight$,gridContainerPosition$:a.gridContainerPosition$,isSeriesSeprate$:n,event$:i.event$})})}),()=>{u.next(void 0),t.forEach(o=>o())}}),V="MultiLines",q=S(V,"grid"),lt=A(V,Ba)(({selection:c,name:l,subject:i,observer:r})=>{const u=new G,t=[];return F(r).subscribe(o=>{t.forEach(a=>a()),c.selectAll(`g.${q}`).data(o).join("g").attr("class",q).each((a,e,d)=>{const s=x(d[e]);t[e]=Ra(V,{selection:s,computedData$:a.computedData$,computedLayoutData$:a.computedLayoutData$,visibleComputedData$:a.visibleComputedData$,visibleComputedLayoutData$:a.visibleComputedLayoutData$,seriesLabels$:a.seriesLabels$,SeriesDataMap$:a.SeriesDataMap$,GroupDataMap$:a.GroupDataMap$,fullDataFormatter$:a.dataFormatter$,fullParams$:r.fullParams$,fullChartParams$:r.fullChartParams$,gridAxesTransform$:a.gridAxesTransform$,gridGraphicTransform$:a.gridGraphicTransform$,gridAxesSize$:a.gridAxesSize$,gridHighlight$:a.gridHighlight$,gridContainerPosition$:a.gridContainerPosition$,event$:i.event$})})}),()=>{u.next(void 0),t.forEach(o=>o())}}),j="MultiDots",J=S(j,"grid"),ot=A(j,Ha)(({selection:c,name:l,subject:i,observer:r})=>{const u=new G,t=[];return F(r).subscribe(o=>{t.forEach(a=>a()),c.selectAll(`g.${J}`).data(o).join("g").attr("class",J).each((a,e,d)=>{const s=x(d[e]);t[e]=_a(j,{selection:s,computedData$:a.computedData$,visibleComputedData$:a.visibleComputedData$,computedLayoutData$:a.computedLayoutData$,visibleComputedLayoutData$:a.visibleComputedLayoutData$,seriesLabels$:a.seriesLabels$,SeriesDataMap$:a.SeriesDataMap$,GroupDataMap$:a.GroupDataMap$,fullParams$:r.fullParams$,fullChartParams$:r.fullChartParams$,gridAxesTransform$:a.gridAxesTransform$,gridGraphicTransform$:a.gridGraphicTransform$,gridGraphicReverseScale$:a.gridGraphicReverseScale$,gridAxesSize$:a.gridAxesSize$,gridHighlight$:a.gridHighlight$,gridContainerPosition$:a.gridContainerPosition$,event$:i.event$})})}),()=>{u.next(void 0),t.forEach(o=>o())}}),B="MultiGroupAxis",Q=S(B,"grid"),nt=A(B,Na)(({selection:c,name:l,subject:i,observer:r})=>{const u=new G,t=[];return F(r).subscribe(o=>{t.forEach(a=>a()),c.selectAll(`g.${Q}`).data(o).join("g").attr("class",Q).each((a,e,d)=>{const s=x(d[e]),n=a.dataFormatter$.pipe(h(u),L(p=>p.grid.separateSeries),E(),I(1));t[e]=va(B,{selection:s,computedData$:a.computedData$,fullParams$:r.fullParams$,fullDataFormatter$:a.dataFormatter$,fullChartParams$:r.fullChartParams$,gridAxesTransform$:a.gridAxesTransform$,gridAxesReverseTransform$:a.gridAxesReverseTransform$,gridAxesSize$:a.gridAxesSize$,gridContainerPosition$:a.gridContainerPosition$,isSeriesSeprate$:n})})}),()=>{u.next(void 0),t.forEach(o=>o())}}),H="MultiValueAxis",Y=S(H,"grid"),ct=A(H,Va)(({selection:c,name:l,subject:i,observer:r})=>{const u=new G,t=[];return F(r).subscribe(o=>{t.forEach(a=>a()),c.selectAll(`g.${Y}`).data(o).join("g").attr("class",Y).each((a,e,d)=>{const s=x(d[e]),n=a.dataFormatter$.pipe(h(u),L(p=>p.grid.separateSeries),E(),I(1));t[e]=ka(H,{selection:s,computedData$:a.computedData$,fullParams$:r.fullParams$,fullDataFormatter$:a.dataFormatter$,fullChartParams$:r.fullChartParams$,gridAxesTransform$:a.gridAxesTransform$,gridAxesReverseTransform$:a.gridAxesReverseTransform$,gridAxesSize$:a.gridAxesSize$,gridContainerPosition$:a.gridContainerPosition$,isSeriesSeprate$:n})})}),()=>{u.next(void 0),t.forEach(o=>o())}}),ut=[[[1205,850,930,1111,1500],[735,900,880,1035,1120]],[[55,60,50,70,75],[35,40,45,65,80]]];export{at as D,Za as M,tt as a,et as b,nt as c,ct as d,st as e,it as f,ut as g,lt as h,ot as i,rt as j,F as m};
