import{w as P,S as c,t as y,g as k,d as v,f as m,s as w}from"./C-r1ajy-.js";import{b as $}from"./C55koCnE.js";import{s as C,m as D}from"./Bp9OZYNL.js";import{b as h,c as L,g as S}from"./BeiEZ8Ba.js";const p="PieLabels",A=S(p,"text");function x(u,l,s,a){return u.map((i,e)=>{const[o,r]=l.centroid(i),[t,n]=s.centroid(i);return{pieDatum:i,arcIndex:e,arcLabel:i.data.label,x:o*a,y:r*a,mouseoverX:t*a,mouseoverY:n*a}}).filter(i=>i.pieDatum.data.visible)}function R(u,l,s,a){let i=u.selectAll("text").data(l,t=>t.pieDatum.id),e=i.enter().append("text").classed(A,!0),o=i.exit();e.append("text");const r=i.merge(e);return r.attr("font-weight","bold").attr("text-anchor","middle").style("dominant-baseline","middle").style("cursor",t=>a.highlightTarget&&a.highlightTarget!="none"?"pointer":"none").text(t=>s.labelFn(t.pieDatum.data)).attr("font-size",a.styles.textSize).attr("fill",(t,n)=>L({datum:t.pieDatum.data,colorType:s.labelColorType,fullChartParams:a})).transition().attr("transform",t=>"translate("+t.x+","+t.y+")"),o.remove(),r}function E({labelSelection:u,ids:l,fullChartParams:s}){if(u.interrupt("highlight"),!l.length){u.transition().duration(200).attr("transform",a=>"translate("+a.x+","+a.y+")").style("opacity",1);return}u.each((a,i,e)=>{const o=k(e[i]);l.includes(a.pieDatum.id)?o.style("opacity",1).transition().duration(200).attr("transform",r=>"translate("+r.mouseoverX+","+r.mouseoverY+")"):o.style("opacity",s.styles.unhighlightedOpacity).transition().duration(200).attr("transform",r=>"translate("+r.x+","+r.y+")")})}function T(u,l){const s=new c;let a=new c,i=[];return m({layout:l.seriesContainerPosition$,containerComputedLayoutData:l.containerComputedLayoutData$,fullParams:l.fullParams$,fullChartParams:l.fullChartParams$}).pipe(y(s),w(async e=>e)).subscribe(e=>{const o=e.layout.width<e.layout.height?e.layout.width:e.layout.height,r=h({axisWidth:o,innerRadius:0,outerRadius:e.fullParams.outerRadius,padAngle:0,cornerRadius:0}),t=h({axisWidth:o,innerRadius:0,outerRadius:e.fullParams.outerMouseoverRadius,padAngle:0,cornerRadius:0}),n=D({data:e.containerComputedLayoutData,startAngle:e.fullParams.startAngle,endAngle:e.fullParams.endAngle});i=x(n,r,t,e.fullParams.labelCentroid);const b=R(l.containerSelection,i,e.fullParams,e.fullChartParams);a.next(b)}),m({labelSelection:a,highlight:l.seriesHighlight$.pipe(v(e=>e.map(o=>o.id))),fullChartParams:l.fullChartParams$}).pipe(y(s),w(async e=>e)).subscribe(e=>{E({labelSelection:e.labelSelection,ids:e.highlight,fullChartParams:e.fullChartParams})}),()=>{s.next(void 0)}}const H=P(p,$)(({selection:u,observer:l,subject:s})=>{const a=new c,{seriesCenterSelection$:i}=C({selection:u,pluginName:p,separateSeries$:l.separateSeries$,seriesLabels$:l.seriesLabels$,seriesContainerPosition$:l.seriesContainerPosition$}),e=[];return i.pipe(y(a)).subscribe(o=>{e.forEach(r=>r()),o.each((r,t,n)=>{const b=k(n[t]),g=l.computedLayoutData$.pipe(y(a),v(d=>d[t]??d[0])),f=l.seriesContainerPosition$.pipe(y(a),v(d=>d[t]??d[0]));e[t]=T(p,{containerSelection:b,containerComputedLayoutData$:g,fullParams$:l.fullParams$,fullChartParams$:l.fullChartParams$,seriesHighlight$:l.seriesHighlight$,seriesContainerPosition$:f,event$:s.event$})})}),()=>{a.next(void 0)}}),I=[[{id:"疫情",label:"疫情",value:1828,type:"keyword"},{id:"簡單",label:"簡單",value:1202,type:"keyword"},{id:"垃圾",label:"垃圾",value:1112,type:"keyword"},{id:"防疫",label:"防疫",value:1062,type:"keyword"},{id:"武漢肺炎",label:"武漢肺炎",value:956,type:"keyword"},{id:"學生",label:"學生",value:811,type:"keyword"},{id:"五樓",label:"五樓",value:754,type:"keyword"},{id:"一個人",label:"一個人",value:724,type:"keyword"},{id:"崩潰",label:"崩潰",value:717,type:"keyword"},{id:"紓困",label:"紓困",value:690,type:"keyword"},{id:"蟑螂",label:"蟑螂",value:689,type:"keyword"},{id:"申請",label:"申請",value:663,type:"keyword"},{id:"同學",label:"同學",value:651,type:"keyword"},{id:"不意外",label:"不意外",value:627,type:"keyword"},{id:"在一起",label:"在一起",value:620,type:"keyword"},{id:"病毒",label:"病毒",value:617,type:"keyword"},{id:"邏輯",label:"邏輯",value:612,type:"keyword"},{id:"支那",label:"支那",value:610,type:"keyword"},{id:"智障",label:"智障",value:594,type:"keyword"},{id:"開心",label:"開心",value:589,type:"keyword"},{id:"男生",label:"男生",value:541,type:"keyword"},{id:"可憐哪",label:"可憐哪",value:534,type:"keyword"},{id:"肥宅",label:"肥宅",value:532,type:"keyword"},{id:"短網址",label:"短網址",value:524,type:"keyword"},{id:"畢業",label:"畢業",value:522,type:"keyword"},{id:"真相",label:"真相",value:519,type:"keyword"},{id:"台灣價值",label:"台灣價值",value:513,type:"keyword"},{id:"直播",label:"直播",value:493,type:"keyword"},{id:"攻擊",label:"攻擊",value:465,type:"keyword"},{id:"劇情",label:"劇情",value:449,type:"keyword"},{id:"口罩",label:"口罩",value:449,type:"keyword"},{id:"醫生",label:"醫生",value:438,type:"keyword"},{id:"戴口罩",label:"戴口罩",value:437,type:"keyword"},{id:"開車",label:"開車",value:436,type:"keyword"},{id:"投票",label:"投票",value:425,type:"keyword"},{id:"失敗",label:"失敗",value:424,type:"keyword"},{id:"傷害",label:"傷害",value:422,type:"keyword"},{id:"幸福",label:"幸福",value:414,type:"keyword"},{id:"資格",label:"資格",value:411,type:"keyword"},{id:"乖乖",label:"乖乖",value:410,type:"keyword"},{id:"感恩",label:"感恩",value:407,type:"keyword"},{id:"投資",label:"投資",value:405,type:"keyword"},{id:"堅持",label:"堅持",value:402,type:"keyword"},{id:"APP",label:"APP",value:144,type:"keyword"}],[{id:"民進黨",label:"民進黨",value:1161,type:"group"},{id:"國民黨",label:"國民黨",value:903,type:"group"},{id:"KMT",label:"KMT",value:448,type:"group"}],[{id:"美國",label:"美國",value:1112,type:"location"},{id:"日本",label:"日本",value:1016,type:"location"},{id:"高雄",label:"高雄",value:905,type:"location"},{id:"台中",label:"台中",value:558,type:"location"},{id:"韓國",label:"韓國",value:416,type:"location"}],[{id:"韓國瑜",label:"韓國瑜",value:680,type:"people"},{id:"蔡英文",label:"蔡英文",value:593,type:"people"},{id:"柯文哲",label:"柯文哲",value:484,type:"people"},{id:"李來希",label:"李來希",value:451,type:"people"}],[{id:"蘋果",label:"蘋果",value:581,type:"brand"},{id:"臉書",label:"臉書",value:439,type:"brand"},{id:"IG",label:"IG",value:269,type:"brand"},{id:"LINE",label:"LINE",value:165,type:"brand"}]];export{H as P,I as s};
