import{au as At,av as et,aw as lt,ax as ut,ay as $t,az as Z,aA as Ft,aB as T,o as kt,aC as Pt,u as Ct,q as Gt,aD as Nt,z as R,B as G,x as k,v as at,E as it,F as Tt,aE as ct,I as ft,aF as Lt,m as W,c as I,i as z,j as X,S as Ot,O as mt,t as dt,aG as Rt,s as Q}from"./hQFDSd1w.js";import{g as tt}from"./CrPrLvvz.js";function q(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Vt(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function xt(t){let e,r,n;t.length!==2?(e=q,r=(i,u)=>q(t(i),u),n=(i,u)=>t(i)-u):(e=t===q||t===Vt?t:jt,r=t,n=t);function o(i,u,l=0,f=i.length){if(l<f){if(e(u,u)!==0)return f;do{const c=l+f>>>1;r(i[c],u)<0?l=c+1:f=c}while(l<f)}return l}function a(i,u,l=0,f=i.length){if(l<f){if(e(u,u)!==0)return f;do{const c=l+f>>>1;r(i[c],u)<=0?l=c+1:f=c}while(l<f)}return l}function s(i,u,l=0,f=i.length){const c=o(i,u,l,f-1);return c>l&&n(i[c-1],u)>-n(i[c],u)?c-1:c}return{left:o,center:s,right:a}}function jt(){return 0}function zt(t){return t===null?NaN:+t}const Xt=xt(q),Yt=Xt.right;xt(zt).center;const Et=Math.sqrt(50),Wt=Math.sqrt(10),It=Math.sqrt(2);function B(t,e,r){const n=(e-t)/Math.max(0,r),o=Math.floor(Math.log10(n)),a=n/Math.pow(10,o),s=a>=Et?10:a>=Wt?5:a>=It?2:1;let i,u,l;return o<0?(l=Math.pow(10,-o)/s,i=Math.round(t*l),u=Math.round(e*l),i/l<t&&++i,u/l>e&&--u,l=-l):(l=Math.pow(10,o)*s,i=Math.round(t/l),u=Math.round(e/l),i*l<t&&++i,u*l>e&&--u),u<i&&.5<=r&&r<2?B(t,e,r*2):[i,u,l]}function Ut(t,e,r){if(e=+e,t=+t,r=+r,!(r>0))return[];if(t===e)return[t];const n=e<t,[o,a,s]=n?B(e,t,r):B(t,e,r);if(!(a>=o))return[];const i=a-o+1,u=new Array(i);if(n)if(s<0)for(let l=0;l<i;++l)u[l]=(a-l)/-s;else for(let l=0;l<i;++l)u[l]=(a-l)*s;else if(s<0)for(let l=0;l<i;++l)u[l]=(o+l)/-s;else for(let l=0;l<i;++l)u[l]=(o+l)*s;return u}function nt(t,e,r){return e=+e,t=+t,r=+r,B(t,e,r)[2]}function qt(t,e,r){e=+e,t=+t,r=+r;const n=e<t,o=n?nt(e,t,r):nt(t,e,r);return(n?-1:1)*(o<0?1/-o:o)}function Bt(t,e){e||(e=[]);var r=t?Math.min(e.length,t.length):0,n=e.slice(),o;return function(a){for(o=0;o<r;++o)n[o]=t[o]*(1-a)+e[o]*a;return n}}function _t(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Ht(t,e){var r=e?e.length:0,n=t?Math.min(r,t.length):0,o=new Array(n),a=new Array(r),s;for(s=0;s<n;++s)o[s]=ot(t[s],e[s]);for(;s<r;++s)a[s]=e[s];return function(i){for(s=0;s<n;++s)a[s]=o[s](i);return a}}function Jt(t,e){var r=new Date;return t=+t,e=+e,function(n){return r.setTime(t*(1-n)+e*n),r}}function Zt(t,e){var r={},n={},o;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(o in e)o in t?r[o]=ot(t[o],e[o]):n[o]=e[o];return function(a){for(o in r)n[o]=r[o](a);return n}}function ot(t,e){var r=typeof e,n;return e==null||r==="boolean"?At(e):(r==="number"?et:r==="string"?(n=lt(e))?(e=n,ut):$t:e instanceof lt?ut:e instanceof Date?Jt:_t(e)?Bt:Array.isArray(e)?Ht:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Zt:et)(t,e)}function Kt(t,e){return t=+t,e=+e,function(r){return Math.round(t*(1-r)+e*r)}}function Qt(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function _(t,e){if((r=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var r,n=t.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+t.slice(r+1)]}function O(t){return t=_(Math.abs(t)),t?t[1]:NaN}function te(t,e){return function(r,n){for(var o=r.length,a=[],s=0,i=t[0],u=0;o>0&&i>0&&(u+i+1>n&&(i=Math.max(1,n-u)),a.push(r.substring(o-=i,o+i)),!((u+=i+1)>n));)i=t[s=(s+1)%t.length];return a.reverse().join(e)}}function ee(t){return function(e){return e.replace(/[0-9]/g,function(r){return t[+r]})}}var ne=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function H(t){if(!(e=ne.exec(t)))throw new Error("invalid format: "+t);var e;return new st({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}H.prototype=st.prototype;function st(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}st.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function re(t){t:for(var e=t.length,r=1,n=-1,o;r<e;++r)switch(t[r]){case".":n=o=r;break;case"0":n===0&&(n=r),o=r;break;default:if(!+t[r])break t;n>0&&(n=0);break}return n>0?t.slice(0,n)+t.slice(o+1):t}var vt;function ae(t,e){var r=_(t,e);if(!r)return t+"";var n=r[0],o=r[1],a=o-(vt=Math.max(-8,Math.min(8,Math.floor(o/3)))*3)+1,s=n.length;return a===s?n:a>s?n+new Array(a-s+1).join("0"):a>0?n.slice(0,a)+"."+n.slice(a):"0."+new Array(1-a).join("0")+_(t,Math.max(0,e+a-1))[0]}function gt(t,e){var r=_(t,e);if(!r)return t+"";var n=r[0],o=r[1];return o<0?"0."+new Array(-o).join("0")+n:n.length>o+1?n.slice(0,o+1)+"."+n.slice(o+1):n+new Array(o-n.length+2).join("0")}const pt={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Qt,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>gt(t*100,e),r:gt,s:ae,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function ht(t){return t}var bt=Array.prototype.map,yt=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function ie(t){var e=t.grouping===void 0||t.thousands===void 0?ht:te(bt.call(t.grouping,Number),t.thousands+""),r=t.currency===void 0?"":t.currency[0]+"",n=t.currency===void 0?"":t.currency[1]+"",o=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?ht:ee(bt.call(t.numerals,String)),s=t.percent===void 0?"%":t.percent+"",i=t.minus===void 0?"−":t.minus+"",u=t.nan===void 0?"NaN":t.nan+"";function l(c){c=H(c);var m=c.fill,p=c.align,d=c.sign,h=c.symbol,b=c.zero,v=c.width,D=c.comma,y=c.precision,w=c.trim,M=c.type;M==="n"?(D=!0,M="g"):pt[M]||(y===void 0&&(y=12),w=!0,M="g"),(b||m==="0"&&p==="=")&&(b=!0,m="0",p="=");var F=h==="$"?r:h==="#"&&/[boxX]/.test(M)?"0"+M.toLowerCase():"",P=h==="$"?n:/[%p]/.test(M)?s:"",V=pt[M],Y=/[defgprs%]/.test(M);y=y===void 0?6:/[gprs]/.test(M)?Math.max(1,Math.min(21,y)):Math.max(0,Math.min(20,y));function j(g){var S=F,x=P,A,K,N;if(M==="c")x=V(g)+x,g="";else{g=+g;var C=g<0||1/g<0;if(g=isNaN(g)?u:V(Math.abs(g),y),w&&(g=re(g)),C&&+g==0&&d!=="+"&&(C=!1),S=(C?d==="("?d:i:d==="-"||d==="("?"":d)+S,x=(M==="s"?yt[8+vt/3]:"")+x+(C&&d==="("?")":""),Y){for(A=-1,K=g.length;++A<K;)if(N=g.charCodeAt(A),48>N||N>57){x=(N===46?o+g.slice(A+1):g.slice(A))+x,g=g.slice(0,A);break}}}D&&!b&&(g=e(g,1/0));var E=S.length+g.length+x.length,$=E<v?new Array(v-E+1).join(m):"";switch(D&&b&&(g=e($+g,$.length?v-x.length:1/0),$=""),p){case"<":g=S+g+x+$;break;case"=":g=S+$+g+x;break;case"^":g=$.slice(0,E=$.length>>1)+S+g+x+$.slice(E);break;default:g=$+S+g+x;break}return a(g)}return j.toString=function(){return c+""},j}function f(c,m){var p=l((c=H(c),c.type="f",c)),d=Math.max(-8,Math.min(8,Math.floor(O(m)/3)))*3,h=Math.pow(10,-d),b=yt[8+d/3];return function(v){return p(h*v)+b}}return{format:l,formatPrefix:f}}var U,Dt,wt;oe({thousands:",",grouping:[3],currency:["$",""]});function oe(t){return U=ie(t),Dt=U.format,wt=U.formatPrefix,U}function se(t){return Math.max(0,-O(Math.abs(t)))}function le(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(O(e)/3)))*3-O(Math.abs(t)))}function ue(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,O(e)-O(t))+1}function ce(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function fe(t){return function(){return t}}function me(t){return+t}var Mt=[0,1];function L(t){return t}function rt(t,e){return(e-=t=+t)?function(r){return(r-t)/e}:fe(isNaN(e)?NaN:.5)}function de(t,e){var r;return t>e&&(r=t,t=e,e=r),function(n){return Math.max(t,Math.min(e,n))}}function ge(t,e,r){var n=t[0],o=t[1],a=e[0],s=e[1];return o<n?(n=rt(o,n),a=r(s,a)):(n=rt(n,o),a=r(a,s)),function(i){return a(n(i))}}function pe(t,e,r){var n=Math.min(t.length,e.length)-1,o=new Array(n),a=new Array(n),s=-1;for(t[n]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<n;)o[s]=rt(t[s],t[s+1]),a[s]=r(e[s],e[s+1]);return function(i){var u=Yt(t,i,1,n)-1;return a[u](o[u](i))}}function he(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function be(){var t=Mt,e=Mt,r=ot,n,o,a,s=L,i,u,l;function f(){var m=Math.min(t.length,e.length);return s!==L&&(s=de(t[0],t[m-1])),i=m>2?pe:ge,u=l=null,c}function c(m){return m==null||isNaN(m=+m)?a:(u||(u=i(t.map(n),e,r)))(n(s(m)))}return c.invert=function(m){return s(o((l||(l=i(e,t.map(n),et)))(m)))},c.domain=function(m){return arguments.length?(t=Array.from(m,me),f()):t.slice()},c.range=function(m){return arguments.length?(e=Array.from(m),f()):e.slice()},c.rangeRound=function(m){return e=Array.from(m),r=Kt,f()},c.clamp=function(m){return arguments.length?(s=m?!0:L,f()):s!==L},c.interpolate=function(m){return arguments.length?(r=m,f()):r},c.unknown=function(m){return arguments.length?(a=m,c):a},function(m,p){return n=m,o=p,f()}}function ye(){return be()(L,L)}function Me(t,e,r,n){var o=qt(t,e,r),a;switch(n=H(n??",f"),n.type){case"s":{var s=Math.max(Math.abs(t),Math.abs(e));return n.precision==null&&!isNaN(a=le(o,s))&&(n.precision=a),wt(n,s)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(a=ue(o,Math.max(Math.abs(t),Math.abs(e))))&&(n.precision=a-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(a=se(o))&&(n.precision=a-(n.type==="%")*2);break}}return Dt(n)}function xe(t){var e=t.domain;return t.ticks=function(r){var n=e();return Ut(n[0],n[n.length-1],r??10)},t.tickFormat=function(r,n){var o=e();return Me(o[0],o[o.length-1],r??10,n)},t.nice=function(r){r==null&&(r=10);var n=e(),o=0,a=n.length-1,s=n[o],i=n[a],u,l,f=10;for(i<s&&(l=s,s=i,i=l,l=o,o=a,a=l);f-- >0;){if(l=nt(s,i,r),l===u)return n[o]=s,n[a]=i,e(n);if(l>0)s=Math.floor(s/l)*l,i=Math.ceil(i/l)*l;else if(l<0)s=Math.ceil(s*l)/l,i=Math.floor(i*l)/l;else break;u=l}return t},t}function St(){var t=ye();return t.copy=function(){return he(t,St())},ce.apply(t,arguments),xe(t)}function ve(t){return new Z(function(e){Ft(t()).subscribe(e)})}function De(t,e,r){return ve(function(){return t()?e:r})}const J=({maxValue:t=1,minValue:e=0,axisWidth:r,scaleDomain:n=T.scaleDomain,scaleRange:o=T.scaleRange})=>{const a=n[0]??T.scaleDomain[0],s=n[1]??T.scaleDomain[1],i=o[0]??T.scaleRange[0],u=o[1]??T.scaleRange[1],l=a==="auto"?e:a,f=s==="auto"?t:s,c=t-(t-l)/(1-i),m=f/u;return St().domain([c,m]).range([0,r])};function we(t,e){if(!t.length)return[];try{const r=t.reduce((s,i)=>i.length>s?i.length:s,0),o=t.map((s,i)=>{if(s.length===r)return s;const u=Object.assign([],s);for(let l=u.length;l<r;l++)u[l]=null;return u}).map((s,i)=>s.map((u,l)=>u==null?{id:"",label:"",data:{},value:null}:typeof u=="number"?{id:"",label:"",data:{},value:u}:{id:u.id??"",label:u.label??"",data:u.data??{},value:u.value}));return Nt(e.seriesDirection,o)}catch{return[]}}const $e=t=>{const{data:e=[],dataFormatter:r,chartParams:n}=t;if(!e.length)return[];let o;try{const a=we(e,r.grid),s=kt({transposedDataGrid:a,dataFormatterGrid:r.grid,chartType:"grid"}),i=Pt({transposedDataGrid:a,dataFormatterGrid:r.grid,chartType:"grid"});let u=0;o=a.map((l,f)=>l.map((c,m)=>{const p=Ct("grid",0,f,m),d=i[m],h={id:c.id?c.id:p,index:u,label:c.label?c.label:p,description:c.description??"",data:c.data,value:c.value,gridIndex:0,seriesIndex:f,seriesLabel:s[f],groupIndex:m,groupLabel:d,color:Gt(f,n),visible:!0};return h.visible=r.visibleFilter(h,t),u++,h}))}catch(a){throw Error(a)}return o},Fe=({computedData$:t,fullDataFormatter$:e,layout$:r})=>{function n(a,s,i){const u=s.grid.groupAxis.position==="top"||s.grid.groupAxis.position==="bottom"?i.width:i.height,l=a[0]?a[0].length-1:0;return J({maxValue:l,minValue:0,axisWidth:u,scaleDomain:[0,l],scaleRange:[0,1]})}function o(a,s,i){const u=s.grid.valueAxis.position==="left"||s.grid.valueAxis.position==="right"?i.height:i.width,l=a.flat(),[f,c]=Lt(l);return J({maxValue:c,minValue:f,axisWidth:u,scaleDomain:[f,c],scaleRange:[0,1]})}return R({computedData:t,fullDataFormatter:e,layout:r}).pipe(G(async a=>a),k(a=>{const s=n(a.computedData,a.fullDataFormatter,a.layout),i=o(a.computedData,a.fullDataFormatter,a.layout),u=i(0);return a.computedData.map((l,f)=>l.map((c,m)=>{const p=s(m),d=i(c.value??0);return{...c,axisX:p,axisY:d,axisYFromZero:d-u}}))}))},ke=({fullDataFormatter$:t,layout$:e})=>{const r=new at;function n({xAxis:o,yAxis:a,width:s,height:i}){if(!o||!a)return{translate:[0,0],scale:[1,1],rotate:0,rotateX:0,rotateY:0,value:""};let u=0,l=0,f=0,c=0,m=0;return o.position==="bottom"?a.position==="left"?(c=180,l=i):a.position==="right"?(c=180,m=180,u=s,l=i):(c=180,l=i):o.position==="top"?a.position==="left"||(a.position==="right"?(m=180,u=s):(c=180,l=i)):o.position==="left"?a.position==="bottom"?(f=-90,l=i):a.position==="top"?(f=-90,m=180):(c=180,l=i):o.position==="right"&&(a.position==="bottom"?(f=-90,c=180,l=i,u=s):a.position==="top"?(f=-90,c=180,m=180,u=s):(c=180,l=i)),{translate:[u,l],scale:[1,1],rotate:f,rotateX:c,rotateY:m,value:`translate(${u}px, ${l}px) rotate(${f}deg) rotateX(${c}deg) rotateY(${m}deg)`}}return new Z(o=>(R({fullDataFormatter:t,layout:e}).pipe(it(r),G(async a=>a)).subscribe(a=>{const s=n({xAxis:a.fullDataFormatter.grid.groupAxis,yAxis:a.fullDataFormatter.grid.valueAxis,width:a.layout.width,height:a.layout.height});o.next(s)}),function(){r.next(void 0)}))},Pe=({gridAxesTransform$:t})=>t.pipe(k(e=>{const r=[0,0],n=[1/e.scale[0],1/e.scale[1]],o=e.rotate*-1,a=e.rotateX*-1,s=e.rotateY*-1;return{translate:r,scale:n,rotate:o,rotateX:a,rotateY:s,value:`translate(${r[0]}px, ${r[1]}px) rotate(${o}deg) rotateX(${a}deg) rotateY(${s}deg)`}})),Ce=({computedData$:t,fullDataFormatter$:e,layout$:r})=>{const n=new at;function o({data:a,groupAxis:s,valueAxis:i,width:u,height:l}){let f=0,c=0,m=0,p=0;const d=s.position==="top"||s.position==="bottom"?u:l,h=0,b=a[0]?a[0].length-1:0,v=s.scaleDomain[0]==="auto"?h-s.scalePadding:s.scaleDomain[0]-s.scalePadding,D=s.scaleDomain[1]==="auto"?b+s.scalePadding:s.scaleDomain[1]+s.scalePadding,y=J({maxValue:b,minValue:h,axisWidth:d,scaleDomain:[v,D],scaleRange:[0,1]}),w=y(h),M=y(b);h==b?(f=0,m=1):(f=w,m=(M-w)/d);const F=a.map((A,K)=>A.filter((N,C)=>C>=v&&C<=D&&N.visible==!0)),P=ct(F),V=i.position==="left"||i.position==="right"?l:u,Y=J({maxValue:P[1],minValue:P[0],axisWidth:V,scaleDomain:i.scaleDomain,scaleRange:i.scaleRange}),j=ct(a),g=Y(j[0]),S=Y(j[1]);return c=g,p=(S-g)/V,{translate:[f,c],scale:[m,p],rotate:0,rotateX:0,rotateY:0,value:`translate(${f}px, ${c}px) scale(${m}, ${p})`}}return new Z(a=>(R({computedData:t,fullDataFormatter:e,layout:r}).pipe(it(n),G(async s=>s)).subscribe(s=>{const i=o({data:s.computedData,groupAxis:s.fullDataFormatter.grid.groupAxis,valueAxis:s.fullDataFormatter.grid.valueAxis,width:s.layout.width,height:s.layout.height});a.next(i)}),function(){n.next(void 0)}))},Ge=({gridContainerPosition$:t,gridAxesTransform$:e,gridGraphicTransform$:r})=>R({gridContainerPosition:t,gridAxesTransform:e,gridGraphicTransform:r}).pipe(G(async n=>n),k(n=>n.gridAxesTransform.rotate==0||n.gridAxesTransform.rotate==180?n.gridContainerPosition.map((o,a)=>[1/n.gridGraphicTransform.scale[0]/n.gridContainerPosition[a].scale[0],1/n.gridGraphicTransform.scale[1]/n.gridContainerPosition[a].scale[1]]):n.gridContainerPosition.map((o,a)=>[1/n.gridGraphicTransform.scale[0]/n.gridContainerPosition[a].scale[1],1/n.gridGraphicTransform.scale[1]/n.gridContainerPosition[a].scale[0]]))),Ne=({fullDataFormatter$:t,layout$:e})=>{const r=new at;function n({xAxisPosition:o,yAxisPosition:a,width:s,height:i}){if((o==="bottom"||o==="top")&&(a==="left"||a==="right"))return{width:s,height:i};if((o==="left"||o==="right")&&(a==="bottom"||a==="top"))return{width:i,height:s}}return new Z(o=>{R({fullDataFormatter:t,layout:e}).pipe(it(r),G(async a=>a)).subscribe(a=>{const s=n({xAxisPosition:a.fullDataFormatter.grid.groupAxis.position,yAxisPosition:a.fullDataFormatter.grid.valueAxis.position,width:a.layout.width,height:a.layout.height});return o.next(s),function(){r.next(void 0)}})})},Te=({computedData$:t})=>t.pipe(k(e=>e.filter(r=>r.length).map(r=>r[0].seriesLabel)),Tt((e,r)=>JSON.stringify(e).length===JSON.stringify(r).length)),Le=({computedData$:t})=>t.pipe(k(e=>e.map(n=>n.filter(o=>o.visible==!0)).filter(n=>n.length))),Oe=({computedLayoutData$:t})=>t.pipe(k(e=>e.map(n=>n.filter(o=>o.visible==!0)).filter(n=>n.length))),Re=({computedData$:t,fullDataFormatter$:e,layout$:r})=>R({computedData:t,fullDataFormatter:e,layout:r}).pipe(G(async o=>o),k(o=>{if(o.fullDataFormatter.grid.separateSeries)return ft(o.layout,o.fullDataFormatter.container,o.computedData.length);{const a=ft(o.layout,o.fullDataFormatter.container,1);return o.computedData.map((s,i)=>a[0])}})),Ve=({isSeriesSeprate$:t,computedData$:e})=>{const r=e.pipe(k(n=>{const o=new Array(n[0]?n[0].length:0).fill(null).map((s,i)=>n.reduce((u,l)=>{if(l&&l[i]){const f=l[i].value==null||l[i].visible==!1?0:l[i].value;return u+f}return u},0));return n.map((s,i)=>s.map((u,l)=>({...u,value:o[l]})))}));return t.pipe(G(n=>De(()=>n,e,r)))},je=({selection:t,pluginName:e,clipPathID:r,seriesLabels$:n,gridContainerPosition$:o,gridAxesTransform$:a,gridGraphicTransform$:s})=>{const i=tt(e,"series"),u=tt(e,"axes"),l=tt(e,"graphic"),f=n.pipe(W((d,h)=>t.selectAll(`g.${i}`).data(d,b=>b).join(b=>b.append("g").classed(i,!0).each((v,D,y)=>{Q(y[D]).selectAll(`g.${u}`).data([D]).join(w=>w.append("g").classed(u,!0).attr("clip-path",`url(#${r})`).each((M,F,P)=>{Q(P[F]).selectAll("defs").data([F]).join("defs"),Q(P[F]).selectAll("g").data([F]).join("g").classed(l,!0)}),w=>w,w=>w.remove())}),b=>b,b=>b.remove())),I(1));z({seriesSelection:f,gridContainerPosition:o}).pipe(X(async d=>d)).subscribe(d=>{d.seriesSelection.transition().attr("transform",(h,b)=>{const v=d.gridContainerPosition[b]??d.gridContainerPosition[0],D=v.translate,y=v.scale;return`translate(${D[0]}, ${D[1]}) scale(${y[0]}, ${y[1]})`})});const c=z({seriesSelection:f,gridAxesTransform:a}).pipe(X(async d=>d),W(d=>d.seriesSelection.select(`g.${u}`).style("transform",d.gridAxesTransform.value)),I(1)),m=c.pipe(W(d=>d.select("defs")),I(1)),p=z({axesSelection:c,gridGraphicTransform:s}).pipe(X(async d=>d),W(d=>{const h=d.axesSelection.select(`g.${l}`);return h.transition().duration(50).style("transform",d.gridGraphicTransform.value),h}),I(1));return{seriesSelection$:f,axesSelection$:c,defsSelection$:m,graphicGSelection$:p}},ze=({fullDataFormatter$:t,gridAxesSize$:e,computedData$:r,fullChartParams$:n})=>{const o=new Ot,a=new mt(s=>{z({dataFormatter:t,computedData:r}).pipe(dt(o),X(async i=>i)).subscribe(i=>{const l=i.computedData[0]?i.computedData[0].length-1:0,f=i.dataFormatter.grid.groupAxis.scaleDomain[0]==="auto"?0-i.dataFormatter.grid.groupAxis.scalePadding:i.dataFormatter.grid.groupAxis.scaleDomain[0]-i.dataFormatter.grid.groupAxis.scalePadding,c=i.dataFormatter.grid.groupAxis.scaleDomain[1]==="auto"?l+i.dataFormatter.grid.groupAxis.scalePadding:i.dataFormatter.grid.groupAxis.scaleDomain[1]+i.dataFormatter.grid.groupAxis.scalePadding,p=(i.dataFormatter.grid.seriesDirection==="row"?(i.computedData[0]??[]).map(d=>d.groupLabel):i.computedData.map(d=>d[0].groupLabel)).filter((d,h)=>h>=f&&h<=c);s.next(p)})});return new mt(s=>{z({dataFormatter:t,axisSize:e,fullChartParams:n,scaleRangeGroupLabels:a}).pipe(dt(o),X(async i=>i)).subscribe(i=>{const u=i.dataFormatter.grid.valueAxis.position==="right"||i.dataFormatter.grid.valueAxis.position==="bottom",l=Rt({axisLabels:i.scaleRangeGroupLabels,axisWidth:i.axisSize.width,reverse:u}),f=m=>i.dataFormatter.grid.groupAxis.position==="bottom"||i.dataFormatter.grid.groupAxis.position==="top"?m.offsetX-i.fullChartParams.padding.left:m.offsetY-i.fullChartParams.padding.top,c=m=>{const p=f(m),d=l(p);return{groupIndex:d,groupLabel:i.scaleRangeGroupLabels[d]??""}};return s.next(c),function(){o.next(void 0)}})})};export{Pe as a,Ce as b,we as c,Ge as d,Ne as e,Le as f,ke as g,Fe as h,Oe as i,Ve as j,je as k,ze as l,Re as m,$e as n,Te as s};
