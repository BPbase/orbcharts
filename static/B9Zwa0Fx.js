import{S as T,t as $,d as f,e as E,f as b,s as y,g as M,O as te,A as F,aa as ae,ab as ie,ac as re}from"./_HanNZE-.js";import{f as R,h as se,i as ne,j as oe,g as le}from"./InbBT3x0.js";import{l as pe,g as ue}from"./CD6lHqiY.js";import{f as ge}from"./DYlwYz0t.js";import{c as ce}from"./DeE08nM3.js";import{c as de}from"./C92z20-z.js";function he(s="curveLinear",p){return ne().x(t=>t.axisX).y0(t=>p).y1(t=>t.axisY).curve(oe[s])}function me(s){let p=[[]],t=0;for(let i in s){if(s[i].visible==!1||s[i].value===void 0||s[i].value===null){p[t].length&&(t++,p[t]=[]);continue}p[t].push(s[i])}return p}function $e({selection:s,pathClassName:p,segmentData:t,areaPath:i,linearGradientIds:r,params:g}){return s.selectAll("path").data(t,(o,c)=>o.length?`${o[0].id}_${o[o.length-1].id}`:c).join(o=>o.append("path").classed(p,!0).attr("fill","none").style("vector-effect","non-scaling-stroke").style("cursor","pointer"),o=>o,o=>o.remove()).attr("fill",(o,c)=>o[0]?`url(#${r[o[0].seriesIndex]})`:"").attr("d",o=>i(o))}function De({selection:s,seriesLabel:p,fullChartParams:t}){if(s.interrupt("highlight"),!p){s.transition("highlight").duration(200).style("opacity",1);return}s.each((i,r,g)=>{i===p?M(g[r]).style("opacity",1):M(g[r]).style("opacity",t.styles.unhighlightedOpacity)})}function xe({defsSelection:s,computedData:p,linearGradientIds:t,params:i}){s.selectAll("linearGradient").data(p??[]).join(r=>r.append("linearGradient").attr("x1","0%").attr("x2","0%").attr("y1","100%").attr("y2","0%").attr("spreadMethod","pad"),r=>r,r=>r.remove()).attr("id",(r,g)=>r[0]?t[r[0].seriesIndex]:"").html((r,g)=>{const h=r[0]?r[0].color:"";return`
        <stop offset="0%"   stop-color="${h}" stop-opacity="${i.linearGradientOpacity[0]}"/>
        <stop offset="100%" stop-color="${h}" stop-opacity="${i.linearGradientOpacity[1]}"/>
      `})}function Le({defsSelection:s,clipPathData:p,transitionDuration:t,transitionEase:i}){s.selectAll("clipPath").data(p).join(r=>r.append("clipPath"),r=>r,r=>r.remove()).attr("id",r=>r.id).each((r,g,h)=>{M(h[g]).selectAll("rect").data([r]).join(o=>{const c=o.append("rect");return c.transition().duration(t).ease(se(i)).tween("tween",(P,z,D)=>C=>{const G=P.width*C;c.attr("x",0).attr("y",0).attr("width",S=>G).attr("height",S=>S.height)}),c},o=>o.attr("x",0).attr("y",0).attr("width",c=>c.width).attr("height",c=>c.height),o=>o.remove())})}const fe=(s,{selection:p,computedData$:t,computedLayoutData$:i,visibleComputedData$:r,visibleComputedLayoutData$:g,seriesLabels$:h,SeriesDataMap$:o,GroupDataMap$:c,fullParams$:P,fullDataFormatter$:z,fullChartParams$:D,gridAxesTransform$:C,gridGraphicTransform$:G,gridAxesSize$:S,gridHighlight$:V,gridContainerPosition$:N,layout$:Se,event$:I})=>{const d=new T,B=R(s,"clipPath-box"),v=le(s,"path"),{seriesSelection$:Ae,axesSelection$:be,defsSelection$:k,graphicGSelection$:O}=pe({selection:p,pluginName:s,clipPathID:B,seriesLabels$:h,gridContainerPosition$:N,gridAxesTransform$:C,gridGraphicTransform$:G}),X=G.pipe($(d),f(e=>-e.translate[1]/e.scale[1])),K=new te(e=>{const u=b({fullParams:P,valueAxisStart:X}).pipe($(d)).subscribe(n=>{const l=he(n.fullParams.lineCurve,n.valueAxisStart);e.next(l)});return()=>{u.unsubscribe()}}),W=D.pipe(f(e=>e.transitionDuration),E()),Y=D.pipe(f(e=>e.transitionEase),E());b({defsSelection:k,seriesLabels:h,axisSize:S,transitionDuration:W,transitionEase:Y}).pipe($(d),y(async e=>e)).subscribe(e=>{const n=[{id:B,width:e.axisSize.width,height:e.axisSize.height}].concat(e.seriesLabels.map(l=>({id:`orbcharts__clipPath_${l}`,width:e.axisSize.width,height:e.axisSize.height})));Le({defsSelection:e.defsSelection,clipPathData:n,transitionDuration:e.transitionDuration,transitionEase:e.transitionEase})});const q=t.pipe(f(e=>{const u=new Map;return e.flat().forEach(n=>u.set(n.id,n)),u})),J=ue({fullDataFormatter$:z,gridAxesSize$:S,computedData$:t,fullChartParams$:D}),Q=D.pipe($(d),f(e=>e.highlightTarget),E()),Z=h.pipe($(d),f(e=>e.map((u,n)=>R(s,`lineargradient-${u}`)))),ee=b({graphicGSelection:O,defsSelection:k,visibleComputedLayoutData:g,linearGradientIds:Z,areaPath:K,params:P}).pipe($(d),y(async e=>e),f(e=>{let u=[];return e.graphicGSelection.each((n,l,m)=>{const A=me(e.visibleComputedLayoutData[l]??[]);u[l]=$e({selection:M(m[l]),pathClassName:v,areaPath:e.areaPath,segmentData:A,linearGradientIds:e.linearGradientIds,params:e.params}),xe({defsSelection:e.defsSelection,computedData:e.visibleComputedLayoutData,linearGradientIds:e.linearGradientIds,params:e.params})}),u}));return b({pathSelectionArr:ee,computedData:t,SeriesDataMap:o,GroupDataMap:c,highlightTarget:Q,gridGroupPositionFn:J}).pipe($(d),y(async e=>e)).subscribe(e=>{e.pathSelectionArr.forEach(u=>{u.on("mouseover",(n,l)=>{n.stopPropagation();const m=l[0]?l[0].seriesLabel:"",{groupIndex:A,groupLabel:x}=e.gridGroupPositionFn(n),a=e.GroupDataMap.get(x).find(L=>L.seriesLabel===m)??l[0];I.next({type:"grid",eventName:"mouseover",pluginName:s,highlightTarget:e.highlightTarget,datum:a,gridIndex:a.gridIndex,series:e.SeriesDataMap.get(a.seriesLabel),seriesIndex:a.seriesIndex,seriesLabel:a.seriesLabel,groups:e.GroupDataMap.get(a.groupLabel),groupIndex:a.groupIndex,groupLabel:a.groupLabel,event:n,data:e.computedData})}).on("mousemove",(n,l)=>{n.stopPropagation();const m=l[0]?l[0].seriesLabel:"",{groupIndex:A,groupLabel:x}=e.gridGroupPositionFn(n),a=e.GroupDataMap.get(x).find(L=>L.seriesLabel===m)??l[0];I.next({type:"grid",eventName:"mousemove",pluginName:s,highlightTarget:e.highlightTarget,datum:a,gridIndex:a.gridIndex,series:e.SeriesDataMap.get(a.seriesLabel),seriesIndex:a.seriesIndex,seriesLabel:a.seriesLabel,groups:e.GroupDataMap.get(a.groupLabel),groupIndex:a.groupIndex,groupLabel:a.groupLabel,event:n,data:e.computedData})}).on("mouseout",(n,l)=>{n.stopPropagation();const m=l[0]?l[0].seriesLabel:"",{groupIndex:A,groupLabel:x}=e.gridGroupPositionFn(n),a=e.GroupDataMap.get(x).find(L=>L.seriesLabel===m)??l[0];I.next({type:"grid",eventName:"mouseout",pluginName:s,highlightTarget:e.highlightTarget,datum:a,gridIndex:a.gridIndex,series:e.SeriesDataMap.get(a.seriesLabel),seriesIndex:a.seriesIndex,seriesLabel:a.seriesLabel,groups:e.GroupDataMap.get(a.groupLabel),groupIndex:a.groupIndex,groupLabel:a.groupLabel,event:n,data:e.computedData})}).on("click",(n,l)=>{n.stopPropagation();const m=l[0]?l[0].seriesLabel:"",{groupIndex:A,groupLabel:x}=e.gridGroupPositionFn(n),a=e.GroupDataMap.get(x).find(L=>L.seriesLabel===m)??l[0];I.next({type:"grid",eventName:"click",pluginName:s,highlightTarget:e.highlightTarget,datum:a,gridIndex:a.gridIndex,series:e.SeriesDataMap.get(a.seriesLabel),seriesIndex:a.seriesIndex,seriesLabel:a.seriesLabel,groups:e.GroupDataMap.get(a.groupLabel),groupIndex:a.groupIndex,groupLabel:a.groupLabel,event:n,data:e.computedData})})})}),D.pipe($(d),ge(e=>e.highlightTarget==="series"),y(e=>b({graphicGSelection:O,gridHighlight:V,DataMap:q,fullChartParams:D}).pipe($(d),y(async u=>u)))).subscribe(e=>{const u=e.gridHighlight[0]?e.gridHighlight[0].seriesLabel:null;De({selection:e.graphicGSelection,seriesLabel:u,fullChartParams:e.fullChartParams})}),()=>{d.next(void 0)}},j="LineAreas",Ce=F(j,ae)(({selection:s,name:p,observer:t,subject:i})=>{const r=new T,g=fe(j,{selection:s,computedData$:t.computedData$,visibleComputedData$:t.visibleComputedData$,computedLayoutData$:t.computedLayoutData$,visibleComputedLayoutData$:t.visibleComputedLayoutData$,seriesLabels$:t.seriesLabels$,SeriesDataMap$:t.SeriesDataMap$,GroupDataMap$:t.GroupDataMap$,fullParams$:t.fullParams$,fullDataFormatter$:t.fullDataFormatter$,fullChartParams$:t.fullChartParams$,gridAxesTransform$:t.gridAxesTransform$,gridGraphicTransform$:t.gridGraphicTransform$,gridAxesSize$:t.gridAxesSize$,gridHighlight$:t.gridHighlight$,gridContainerPosition$:t.gridContainerPosition$,layout$:t.layout$,event$:i.event$});return()=>{r.next(void 0),g()}}),H="Dots",_e=F(H,ie)(({selection:s,name:p,subject:t,observer:i})=>{const r=new T,g=ce(H,{selection:s,computedData$:i.computedData$,computedLayoutData$:i.computedLayoutData$,visibleComputedData$:i.visibleComputedData$,visibleComputedLayoutData$:i.visibleComputedLayoutData$,seriesLabels$:i.seriesLabels$,SeriesDataMap$:i.SeriesDataMap$,GroupDataMap$:i.GroupDataMap$,fullParams$:i.fullParams$,fullChartParams$:i.fullChartParams$,gridAxesTransform$:i.gridAxesTransform$,gridGraphicTransform$:i.gridGraphicTransform$,gridGraphicReverseScale$:i.gridGraphicReverseScale$,gridAxesSize$:i.gridAxesSize$,gridHighlight$:i.gridHighlight$,gridContainerPosition$:i.gridContainerPosition$,event$:t.event$});return()=>{r.next(void 0),g()}}),U="ValueStackAxis",we=F(U,re)(({selection:s,name:p,observer:t,subject:i})=>{const r=new T,g=de(U,{selection:s,computedData$:t.computedStackedData$,fullParams$:t.fullParams$,fullDataFormatter$:t.fullDataFormatter$,fullChartParams$:t.fullChartParams$,gridAxesTransform$:t.gridAxesTransform$,gridAxesReverseTransform$:t.gridAxesReverseTransform$,gridAxesSize$:t.gridAxesSize$,gridContainerPosition$:t.gridContainerPosition$,isSeriesSeprate$:t.isSeriesSeprate$});return()=>{r.next(void 0),g()}}),Ee=[[55,80,50,11,150],[35,40,15,65,120]];export{_e as D,Ce as L,we as V,fe as c,Ee as g};
