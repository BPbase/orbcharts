import{ao as x,a as $,t as m,s as f,m as F,$ as D,ap as E,d as y,k as T,l as B,g as b}from"./DthhAFdh.js";import{s as L}from"./GXOhBS4E.js";const h="PieEventTexts",P=b(h,"text"),_={name:h,defaultParams:D,layerIndex:E,validator:(i,{validateColumns:s})=>s(i,{renderFn:{toBeTypes:["Function"]},textAttrs:{toBeTypes:["object[]"]},textStyles:{toBeTypes:["object[]"]}})};function g(i,s){const t=i.selectAll(`text.${P}`).data(s),o=t.enter().append("text").classed(P,!0),r=t.merge(o);return r.each((e,n,l)=>{const c=f(l[n]).text(e.text);Object.keys(e.attr).forEach(a=>{c.attr(a,e.attr[a])}),Object.keys(e.style).forEach(a=>{c.style(a,e.style[a])})}),t.exit().remove(),r}function C({eventData:i,renderFn:s,textAttrs:t,textStyles:o}){const r=s(i);return(Array.isArray(r)?r:[r]).map((n,l)=>({text:n,attr:t[l],style:o[l]}))}function v(i,s){const t=new $;let o;const r=s.fullChartParams$.pipe(m(t),F(e=>e.highlightTarget),y());return T({computedData:s.computedData$,fullParams:s.fullParams$,fullChartParams:s.fullChartParams$,highlightTarget:r}).pipe(m(t),B(async e=>e)).subscribe(e=>{s.containerSelection.transition("move").duration(e.fullChartParams.transitionDuration).tween("move",(n,l)=>c=>{const a=C({eventData:{type:"series",pluginName:i,eventName:"transitionMove",event:n,tween:c,highlightTarget:e.highlightTarget,data:e.computedData,series:[],seriesIndex:-1,seriesLabel:"",datum:null},renderFn:e.fullParams.renderFn,textAttrs:e.fullParams.textAttrs,textStyles:e.fullParams.textStyles});g(s.containerSelection,a)}).on("end",(n,l)=>{const c=C({eventData:{type:"series",pluginName:i,eventName:"transitionEnd",event:n,tween:1,highlightTarget:e.highlightTarget,data:e.computedData,series:[],seriesIndex:-1,seriesLabel:"",datum:null},renderFn:e.fullParams.renderFn,textAttrs:e.fullParams.textAttrs,textStyles:e.fullParams.textStyles});g(s.containerSelection,c),o&&o.unsubscribe(),o=s.event$.subscribe(a=>{const p=C({eventData:a,renderFn:e.fullParams.renderFn,textAttrs:e.fullParams.textAttrs,textStyles:e.fullParams.textStyles});g(s.containerSelection,p)})})}),()=>{t.next(void 0)}}const R=x(_)(({selection:i,name:s,observer:t,subject:o})=>{const r=new $,{seriesCenterSelection$:e}=L({selection:i,pluginName:h,separateSeries$:t.separateSeries$,seriesLabels$:t.seriesLabels$,seriesContainerPosition$:t.seriesContainerPosition$}),n=[];return e.pipe(m(r)).subscribe(l=>{n.forEach(c=>c()),l.each((c,a,p)=>{const A=f(p[a]),S=t.computedSortedData$.pipe(m(r),F(u=>u[a]??u[0])),d=t.seriesContainerPosition$.pipe(m(r),F(u=>u[a]??u[0]));n[a]=v(h,{containerSelection:A,computedData$:t.computedData$,containerComputedSortedData$:S,SeriesDataMap$:t.SeriesDataMap$,fullParams$:t.fullParams$,fullChartParams$:t.fullChartParams$,seriesHighlight$:t.seriesHighlight$,seriesContainerPosition$:d,event$:o.event$})})}),()=>{r.next(void 0),n.forEach(l=>l())}}),U={name:"PRESET_BUBBLES_BASIC",description:"Basic bubble chart",descriptionZh:"基本泡泡圖",chartParams:{colors:{light:{label:["#6CBAFF","#FF6C6C","#F9B052","#7DD3C4","#AA93D2","#0088FF","#FFBABA","#86DC72","#EF76FF","#C4C4C4"]},dark:{label:["#6CBAFF","#FF6C6C","#F9B052","#7DD3C4","#AA93D2","#0088FF","#FFBABA","#86DC72","#EF76FF","#C4C4C4"]}}},pluginParams:{SeriesLegend:{listRectRadius:7}}};export{R as P,U as a};
