import{B as g,C as A,E,F as b,G as h,H as R,I as $,J as x,K as P}from"./Bt7wG3zu.js";function y(o,e){const n=new Map;let c=Object.assign([],o),t=[];return c.forEach((s,i)=>{Array.isArray(s)?s.forEach((a,r)=>{t.push({rowIndex:i,columnIndex:r,index:-1,datum:a})}):t.push({rowIndex:i,columnIndex:0,index:-1,datum:s})}),t.sort((s,i)=>e(s.datum,i.datum)),t=t.map((s,i)=>({...s,index:i})),t.forEach(s=>{n.set(String([s.rowIndex,s.columnIndex]),s.index)}),n}const D=o=>{const{data:e=[],dataFormatter:n,chartParams:c}=o;if(!e.length)return[];const t=[];try{const s=(a=>{if(a){const r=y(e,n.sort);return(u,l,d)=>r.get(String([l,d]))}else return(r,u,l)=>r.length})(n.sort!=null),i=(a,r,u,l,d)=>{const p=g(n.type,r,u),m=n.seriesLabels[r]||A("series",r),S=E(r,c),f=n.visibleFilter(a,r,u,o);return typeof a=="number"?{id:p,index:l,sortedIndex:d,label:p,description:"",data:{},value:a,seriesIndex:r,seriesLabel:m,color:S,visible:f}:{id:a.id?a.id:p,index:l,sortedIndex:d,label:a.label?a.label:p,description:a.description,data:a.data??{},value:a.value,seriesIndex:r,seriesLabel:m,color:S,visible:f}};e.forEach((a,r)=>{if(Array.isArray(a))a.forEach((u,l)=>{const d=s(t,r,l),p=i(u,r,l,t.length,d);t.push(p)});else{const u=s(t,r,0),l=i(a,r,0,t.length,u);t.push(l)}})}catch(s){throw Error(s)}return t},F=({subject:o,observer:e})=>{const n=b(e.fullChartParams$).pipe(h(1)),c=R({datumList$:e.computedData$,fullChartParams$:e.fullChartParams$,event$:o.event$}).pipe(h(1)),t=$({datumList$:e.computedData$}).pipe(h(1));return{fullParams$:e.fullParams$,fullChartParams$:e.fullChartParams$,fullDataFormatter$:e.fullDataFormatter$,computedData$:e.computedData$,layout$:e.layout$,textSizePx$:n,seriesHighlight$:c,SeriesDataMap$:t}};class _ extends x{constructor(e,n){super({defaultDataFormatter:P,computedDataFn:D,contextObserverFn:F},e,n)}}const L={force:{strength:.03,velocityDecay:.2,collisionSpacing:2},bubbleText:{fillRate:.6,lineHeight:12,lineLengthMin:4},highlightRIncrease:0,bubbleScaleType:"area"},T={outerRadius:.95,innerRadius:0,outerMouseoverRadius:1,enterDuration:800,startAngle:0,endAngle:Math.PI*2,padAngle:.02,cornerRadius:0},C={eventFn:(o,e,n)=>e==="mouseover"||e==="mousemove"?[String(o.datum.value)]:[String(Math.round(o.data.reduce((c,t)=>c+(t.value??0),0)*n))],textAttrs:[{transform:"translate(0, 0)"}],textStyles:[{"font-weight":"bold","text-anchor":"middle","pointer-events":"none","dominant-baseline":"middle","font-size":64,fill:"#000"}]},I={outerRadius:.95,outerMouseoverRadius:1,startAngle:0,endAngle:Math.PI*2,labelCentroid:2.3,labelColorType:"series",labelFn:o=>String(o.value)},v={position:"right",justify:"end",padding:28,backgroundFill:"none",backgroundStroke:"none",gap:10,listRectWidth:14,listRectHeight:14,listRectRadius:0,textColorType:"primary"};export{C as D,_ as S,I as a,L as b,T as c,v as d};
