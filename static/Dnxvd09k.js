import{a4 as At,a5 as _,a6 as st,a7 as lt,a8 as $t,a9 as T,aa as Ft,ab as Nt,ac as kt,ad as Ct,C as Gt,F as Pt,N as nt,ae as rt,P as V,T as at,Q as E,l as j,af as xt,ag as ct,U as ut,a0 as Lt,a2 as Tt,S as Rt,O as ft,e as X,t as mt,s as I,ah as Ot,m as z,b as Q}from"./pf1r-l3X.js";import{g as K}from"./DSAQ5uLE.js";function q(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Vt(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function yt(t){let e,r,n;t.length!==2?(e=q,r=(s,u)=>q(t(s),u),n=(s,u)=>t(s)-u):(e=t===q||t===Vt?t:jt,r=t,n=t);function o(s,u,l=0,m=s.length){if(l<m){if(e(u,u)!==0)return m;do{const c=l+m>>>1;r(s[c],u)<0?l=c+1:m=c}while(l<m)}return l}function a(s,u,l=0,m=s.length){if(l<m){if(e(u,u)!==0)return m;do{const c=l+m>>>1;r(s[c],u)<=0?l=c+1:m=c}while(l<m)}return l}function i(s,u,l=0,m=s.length){const c=o(s,u,l,m-1);return c>l&&n(s[c-1],u)>-n(s[c],u)?c-1:c}return{left:o,center:i,right:a}}function jt(){return 0}function Yt(t){return t===null?NaN:+t}const zt=yt(q),Xt=zt.right;yt(Yt).center;const It=Math.sqrt(50),Et=Math.sqrt(10),Wt=Math.sqrt(2);function B(t,e,r){const n=(e-t)/Math.max(0,r),o=Math.floor(Math.log10(n)),a=n/Math.pow(10,o),i=a>=It?10:a>=Et?5:a>=Wt?2:1;let s,u,l;return o<0?(l=Math.pow(10,-o)/i,s=Math.round(t*l),u=Math.round(e*l),s/l<t&&++s,u/l>e&&--u,l=-l):(l=Math.pow(10,o)*i,s=Math.round(t/l),u=Math.round(e/l),s*l<t&&++s,u*l>e&&--u),u<s&&.5<=r&&r<2?B(t,e,r*2):[s,u,l]}function Ut(t,e,r){if(e=+e,t=+t,r=+r,!(r>0))return[];if(t===e)return[t];const n=e<t,[o,a,i]=n?B(e,t,r):B(t,e,r);if(!(a>=o))return[];const s=a-o+1,u=new Array(s);if(n)if(i<0)for(let l=0;l<s;++l)u[l]=(a-l)/-i;else for(let l=0;l<s;++l)u[l]=(a-l)*i;else if(i<0)for(let l=0;l<s;++l)u[l]=(o+l)/-i;else for(let l=0;l<s;++l)u[l]=(o+l)*i;return u}function tt(t,e,r){return e=+e,t=+t,r=+r,B(t,e,r)[2]}function qt(t,e,r){e=+e,t=+t,r=+r;const n=e<t,o=n?tt(e,t,r):tt(t,e,r);return(n?-1:1)*(o<0?1/-o:o)}function Bt(t,e){e||(e=[]);var r=t?Math.min(e.length,t.length):0,n=e.slice(),o;return function(a){for(o=0;o<r;++o)n[o]=t[o]*(1-a)+e[o]*a;return n}}function Zt(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Ht(t,e){var r=e?e.length:0,n=t?Math.min(r,t.length):0,o=new Array(n),a=new Array(r),i;for(i=0;i<n;++i)o[i]=it(t[i],e[i]);for(;i<r;++i)a[i]=e[i];return function(s){for(i=0;i<n;++i)a[i]=o[i](s);return a}}function Jt(t,e){var r=new Date;return t=+t,e=+e,function(n){return r.setTime(t*(1-n)+e*n),r}}function Qt(t,e){var r={},n={},o;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(o in e)o in t?r[o]=it(t[o],e[o]):n[o]=e[o];return function(a){for(o in r)n[o]=r[o](a);return n}}function it(t,e){var r=typeof e,n;return e==null||r==="boolean"?At(e):(r==="number"?_:r==="string"?(n=st(e))?(e=n,lt):$t:e instanceof st?lt:e instanceof Date?Jt:Zt(e)?Bt:Array.isArray(e)?Ht:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Qt:_)(t,e)}function Kt(t,e){return t=+t,e=+e,function(r){return Math.round(t*(1-r)+e*r)}}function _t(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Z(t,e){if((r=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var r,n=t.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+t.slice(r+1)]}function O(t){return t=Z(Math.abs(t)),t?t[1]:NaN}function te(t,e){return function(r,n){for(var o=r.length,a=[],i=0,s=t[0],u=0;o>0&&s>0&&(u+s+1>n&&(s=Math.max(1,n-u)),a.push(r.substring(o-=s,o+s)),!((u+=s+1)>n));)s=t[i=(i+1)%t.length];return a.reverse().join(e)}}function ee(t){return function(e){return e.replace(/[0-9]/g,function(r){return t[+r]})}}var ne=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function H(t){if(!(e=ne.exec(t)))throw new Error("invalid format: "+t);var e;return new ot({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}H.prototype=ot.prototype;function ot(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}ot.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function re(t){t:for(var e=t.length,r=1,n=-1,o;r<e;++r)switch(t[r]){case".":n=o=r;break;case"0":n===0&&(n=r),o=r;break;default:if(!+t[r])break t;n>0&&(n=0);break}return n>0?t.slice(0,n)+t.slice(o+1):t}var vt;function ae(t,e){var r=Z(t,e);if(!r)return t+"";var n=r[0],o=r[1],a=o-(vt=Math.max(-8,Math.min(8,Math.floor(o/3)))*3)+1,i=n.length;return a===i?n:a>i?n+new Array(a-i+1).join("0"):a>0?n.slice(0,a)+"."+n.slice(a):"0."+new Array(1-a).join("0")+Z(t,Math.max(0,e+a-1))[0]}function gt(t,e){var r=Z(t,e);if(!r)return t+"";var n=r[0],o=r[1];return o<0?"0."+new Array(-o).join("0")+n:n.length>o+1?n.slice(0,o+1)+"."+n.slice(o+1):n+new Array(o-n.length+2).join("0")}const dt={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:_t,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>gt(t*100,e),r:gt,s:ae,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function ht(t){return t}var pt=Array.prototype.map,bt=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function ie(t){var e=t.grouping===void 0||t.thousands===void 0?ht:te(pt.call(t.grouping,Number),t.thousands+""),r=t.currency===void 0?"":t.currency[0]+"",n=t.currency===void 0?"":t.currency[1]+"",o=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?ht:ee(pt.call(t.numerals,String)),i=t.percent===void 0?"%":t.percent+"",s=t.minus===void 0?"−":t.minus+"",u=t.nan===void 0?"NaN":t.nan+"";function l(c){c=H(c);var f=c.fill,x=c.align,g=c.sign,v=c.symbol,y=c.zero,S=c.width,M=c.comma,p=c.precision,d=c.trim,b=c.type;b==="n"?(M=!0,b="g"):dt[b]||(p===void 0&&(p=12),d=!0,b="g"),(y||f==="0"&&x==="=")&&(y=!0,f="0",x="=");var D=v==="$"?r:v==="#"&&/[boxX]/.test(b)?"0"+b.toLowerCase():"",A=v==="$"?n:/[%p]/.test(b)?i:"",N=dt[b],k=/[defgprs%]/.test(b);p=p===void 0?6:/[gprs]/.test(b)?Math.max(1,Math.min(21,p)):Math.max(0,Math.min(20,p));function C(h){var $=D,w=A,G,W,Y;if(b==="c")w=N(h)+w,h="";else{h=+h;var L=h<0||1/h<0;if(h=isNaN(h)?u:N(Math.abs(h),p),d&&(h=re(h)),L&&+h==0&&g!=="+"&&(L=!1),$=(L?g==="("?g:s:g==="-"||g==="("?"":g)+$,w=(b==="s"?bt[8+vt/3]:"")+w+(L&&g==="("?")":""),k){for(G=-1,W=h.length;++G<W;)if(Y=h.charCodeAt(G),48>Y||Y>57){w=(Y===46?o+h.slice(G+1):h.slice(G))+w,h=h.slice(0,G);break}}}M&&!y&&(h=e(h,1/0));var P=$.length+h.length+w.length,F=P<S?new Array(S-P+1).join(f):"";switch(M&&y&&(h=e(F+h,F.length?S-w.length:1/0),F=""),x){case"<":h=$+h+w+F;break;case"=":h=$+F+h+w;break;case"^":h=F.slice(0,P=F.length>>1)+$+h+w+F.slice(P);break;default:h=F+$+h+w;break}return a(h)}return C.toString=function(){return c+""},C}function m(c,f){var x=l((c=H(c),c.type="f",c)),g=Math.max(-8,Math.min(8,Math.floor(O(f)/3)))*3,v=Math.pow(10,-g),y=bt[8+g/3];return function(S){return x(v*S)+y}}return{format:l,formatPrefix:m}}var U,Dt,St;oe({thousands:",",grouping:[3],currency:["$",""]});function oe(t){return U=ie(t),Dt=U.format,St=U.formatPrefix,U}function se(t){return Math.max(0,-O(Math.abs(t)))}function le(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(O(e)/3)))*3-O(Math.abs(t)))}function ce(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,O(e)-O(t))+1}function ue(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function fe(t){return function(){return t}}function me(t){return+t}var Mt=[0,1];function R(t){return t}function et(t,e){return(e-=t=+t)?function(r){return(r-t)/e}:fe(isNaN(e)?NaN:.5)}function ge(t,e){var r;return t>e&&(r=t,t=e,e=r),function(n){return Math.max(t,Math.min(e,n))}}function de(t,e,r){var n=t[0],o=t[1],a=e[0],i=e[1];return o<n?(n=et(o,n),a=r(i,a)):(n=et(n,o),a=r(a,i)),function(s){return a(n(s))}}function he(t,e,r){var n=Math.min(t.length,e.length)-1,o=new Array(n),a=new Array(n),i=-1;for(t[n]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++i<n;)o[i]=et(t[i],t[i+1]),a[i]=r(e[i],e[i+1]);return function(s){var u=Xt(t,s,1,n)-1;return a[u](o[u](s))}}function pe(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function be(){var t=Mt,e=Mt,r=it,n,o,a,i=R,s,u,l;function m(){var f=Math.min(t.length,e.length);return i!==R&&(i=ge(t[0],t[f-1])),s=f>2?he:de,u=l=null,c}function c(f){return f==null||isNaN(f=+f)?a:(u||(u=s(t.map(n),e,r)))(n(i(f)))}return c.invert=function(f){return i(o((l||(l=s(e,t.map(n),_)))(f)))},c.domain=function(f){return arguments.length?(t=Array.from(f,me),m()):t.slice()},c.range=function(f){return arguments.length?(e=Array.from(f),m()):e.slice()},c.rangeRound=function(f){return e=Array.from(f),r=Kt,m()},c.clamp=function(f){return arguments.length?(i=f?!0:R,m()):i!==R},c.interpolate=function(f){return arguments.length?(r=f,m()):r},c.unknown=function(f){return arguments.length?(a=f,c):a},function(f,x){return n=f,o=x,m()}}function Me(){return be()(R,R)}function xe(t,e,r,n){var o=qt(t,e,r),a;switch(n=H(n??",f"),n.type){case"s":{var i=Math.max(Math.abs(t),Math.abs(e));return n.precision==null&&!isNaN(a=le(o,i))&&(n.precision=a),St(n,i)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(a=ce(o,Math.max(Math.abs(t),Math.abs(e))))&&(n.precision=a-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(a=se(o))&&(n.precision=a-(n.type==="%")*2);break}}return Dt(n)}function ye(t){var e=t.domain;return t.ticks=function(r){var n=e();return Ut(n[0],n[n.length-1],r??10)},t.tickFormat=function(r,n){var o=e();return xe(o[0],o[o.length-1],r??10,n)},t.nice=function(r){r==null&&(r=10);var n=e(),o=0,a=n.length-1,i=n[o],s=n[a],u,l,m=10;for(s<i&&(l=i,i=s,s=l,l=o,o=a,a=l);m-- >0;){if(l=tt(i,s,r),l===u)return n[o]=i,n[a]=s,e(n);if(l>0)i=Math.floor(i/l)*l,s=Math.ceil(s/l)*l;else if(l<0)i=Math.ceil(i*l)/l,s=Math.floor(s*l)/l;else break;u=l}return t},t}function wt(){var t=Me();return t.copy=function(){return pe(t,wt())},ue.apply(t,arguments),ye(t)}const J=({maxValue:t=1,minValue:e=0,axisWidth:r,scaleDomain:n=T.scaleDomain,scaleRange:o=T.scaleRange})=>{const a=n[0]??T.scaleDomain[0],i=n[1]??T.scaleDomain[1],s=o[0]??T.scaleRange[0],u=o[1]??T.scaleRange[1],l=a==="auto"?e:a,m=i==="auto"?t:i;let c=r*s,f=r*u;return wt().domain([l,m]).range([c,f])},Ae=t=>ve(t,"grid",0),ve=(t,e,r=0)=>{const{data:n=[],dataFormatter:o,chartParams:a,layout:i}=t;if(!n.length)return[];let s;try{const u=n.reduce((M,p)=>p.length>M?p.length:M,0),m=n.map((M,p)=>{if(M.length===u)return M;const d=Object.assign([],M);for(let b=d.length;b<u;b++)d[b]=null;return d}).map((M,p)=>M.map((d,b)=>{const D=o.grid.visibleFilter(d,p,b,t);return d==null?{id:"",label:"",data:{},value:null,_visible:D}:typeof d=="number"?{id:"",label:"",data:{},value:d,_visible:D}:{id:d.id??"",label:d.label??"",data:d.data??{},value:d.value,_visible:D}})),c=Ft(o.grid.gridData.seriesDirection,m),{groupScale:f}=(()=>{const M=o.grid.groupAxis.position==="top"||o.grid.groupAxis.position==="bottom"?i.width:i.height,p=c[0]?c[0].length-1:0;return{groupScale:J({maxValue:p,minValue:0,axisWidth:M,scaleDomain:[0,p],scaleRange:[0,1]})}})(),x=Nt({transposedDataGrid:c,dataFormatter:o,chartType:e,gridIndex:r}),g=kt({transposedDataGrid:c,dataFormatter:o,chartType:e,gridIndex:r}),v=(()=>{const M=o.grid.valueAxis.position==="left"||o.grid.valueAxis.position==="right"?i.height:i.width,p=c.flat().filter(D=>D._visible!=!1),[d,b]=Ct(p);return c.map((D,A)=>J({maxValue:b,minValue:d,axisWidth:M,scaleDomain:[d,b],scaleRange:[0,1]}))})(),y=c.map((M,p)=>v[p](0));let S=0;s=c.map((M,p)=>M.map((d,b)=>{const D=Gt(e,r,p,b),A=g[b],N=v[p],k=N(d.value??0),C=y[p],h={id:d.id?d.id:D,index:S,label:d.label?d.label:D,description:d.description??"",data:d.data,value:d.value,gridIndex:r,accSeriesIndex:p,seriesIndex:p,seriesLabel:x[p],groupIndex:b,groupLabel:A,color:Pt(p,a),axisX:f(b),axisY:k,axisYFromZero:k-C,visible:d._visible};return S++,h}))}catch(u){throw Error(u)}return s},$e=({fullDataFormatter$:t,layout$:e})=>{const r=new nt;function n({xAxis:o,yAxis:a,width:i,height:s}){if(!o||!a)return{translate:[0,0],scale:[1,1],rotate:0,rotateX:0,rotateY:0,value:""};let u=0,l=0,m=0,c=0,f=0;return o.position==="bottom"?a.position==="left"?(c=180,l=s):a.position==="right"?(c=180,f=180,u=i,l=s):(c=180,l=s):o.position==="top"?a.position==="left"||(a.position==="right"?(f=180,u=i):(c=180,l=s)):o.position==="left"?a.position==="bottom"?(m=-90,l=s):a.position==="top"?(m=-90,f=180):(c=180,l=s):o.position==="right"&&(a.position==="bottom"?(m=-90,c=180,l=s,u=i):a.position==="top"?(m=-90,c=180,f=180,u=i):(c=180,l=s)),{translate:[u,l],scale:[1,1],rotate:m,rotateX:c,rotateY:f,value:`translate(${u}px, ${l}px) rotate(${m}deg) rotateX(${c}deg) rotateY(${f}deg)`}}return new rt(o=>(V({fullDataFormatter:t,layout:e}).pipe(at(r),E(async a=>a)).subscribe(a=>{const i=n({xAxis:a.fullDataFormatter.grid.groupAxis,yAxis:a.fullDataFormatter.grid.valueAxis,width:a.layout.width,height:a.layout.height});o.next(i)}),function(){r.next(void 0)}))},Fe=({gridAxesTransform$:t})=>t.pipe(j(e=>{const r=[0,0],n=[1/e.scale[0],1/e.scale[1]],o=e.rotate*-1,a=e.rotateX*-1,i=e.rotateY*-1;return{translate:r,scale:n,rotate:o,rotateX:a,rotateY:i,value:`translate(${r[0]}px, ${r[1]}px) rotate(${o}deg) rotateX(${a}deg) rotateY(${i}deg)`}})),Ne=({computedData$:t,fullDataFormatter$:e,layout$:r})=>{const n=new nt;function o({data:a,groupAxis:i,valueAxis:s,width:u,height:l}){let m=0,c=0,f=0,x=0;const g=i.position==="top"||i.position==="bottom"?u:l,v=0,y=a[0]?a[0].length-1:0,S=i.scaleDomain[0]==="auto"?v-i.scalePadding:i.scaleDomain[0]-i.scalePadding,M=i.scaleDomain[1]==="auto"?y+i.scalePadding:i.scaleDomain[1]+i.scalePadding,p=J({maxValue:y,minValue:v,axisWidth:g,scaleDomain:[S,M],scaleRange:[0,1]}),d=p(v),b=p(y);m=d,f=(b-d)/g;const A=a.map((W,Y)=>W.filter((L,P)=>P>=S&&P<=M&&L.visible==!0)),N=ct(A),k=s.position==="left"||s.position==="right"?l:u,C=J({maxValue:N[1],minValue:N[0],axisWidth:k,scaleDomain:s.scaleDomain,scaleRange:s.scaleRange}),h=ct(a),$=C(h[0]),w=C(h[1]);return c=$,x=(w-$)/k,{translate:[m,c],scale:[f,x],rotate:0,rotateX:0,rotateY:0,value:`translate(${m}px, ${c}px) scale(${f}, ${x})`}}return new rt(a=>(V({computedData:t,fullDataFormatter:e,layout:r}).pipe(at(n),E(async i=>i)).subscribe(i=>{const s=o({data:i.computedData,groupAxis:i.fullDataFormatter.grid.groupAxis,valueAxis:i.fullDataFormatter.grid.valueAxis,width:i.layout.width,height:i.layout.height});a.next(s)}),function(){n.next(void 0)}))},ke=({gridContainer$:t,gridAxesTransform$:e,gridGraphicTransform$:r})=>V({gridContainer:t,gridAxesTransform:e,gridGraphicTransform:r}).pipe(E(async n=>n),j(n=>n.gridAxesTransform.rotate==0||n.gridAxesTransform.rotate==180?n.gridContainer.map((o,a)=>[1/n.gridGraphicTransform.scale[0]/n.gridContainer[a].scale[0],1/n.gridGraphicTransform.scale[1]/n.gridContainer[a].scale[1]]):n.gridContainer.map((o,a)=>[1/n.gridGraphicTransform.scale[0]/n.gridContainer[a].scale[1],1/n.gridGraphicTransform.scale[1]/n.gridContainer[a].scale[0]]))),Ce=({fullDataFormatter$:t,layout$:e})=>{const r=new nt;function n({xAxisPosition:o,yAxisPosition:a,width:i,height:s}){if((o==="bottom"||o==="top")&&(a==="left"||a==="right"))return{width:i,height:s};if((o==="left"||o==="right")&&(a==="bottom"||a==="top"))return{width:s,height:i}}return new rt(o=>{V({fullDataFormatter:t,layout:e}).pipe(at(r),E(async a=>a)).subscribe(a=>{const i=n({xAxisPosition:a.fullDataFormatter.grid.groupAxis.position,yAxisPosition:a.fullDataFormatter.grid.valueAxis.position,width:a.layout.width,height:a.layout.height});return o.next(i),function(){r.next(void 0)}})})},Ge=({computedData$:t})=>t.pipe(j(e=>e.filter(r=>r.length).map(r=>r[0].seriesLabel)),xt((e,r)=>JSON.stringify(e).length===JSON.stringify(r).length)),Pe=({computedData$:t})=>t.pipe(j(e=>e.map(n=>n.filter(o=>o.visible==!0)).filter(n=>n.length))),Le=({computedData$:t,fullDataFormatter$:e})=>V({computedData:t,fullDataFormatter:e}).pipe(j(r=>!!(r.fullDataFormatter.grid.seriesSlotIndexes&&r.fullDataFormatter.grid.seriesSlotIndexes.length===r.computedData.length)),xt()),Te=({computedData$:t,fullDataFormatter$:e,fullChartParams$:r,layout$:n})=>V({computedData:t,fullDataFormatter:e,fullChartParams:r,layout:n}).pipe(E(async a=>a),j(a=>{const i=a.fullDataFormatter.grid;if(!!(i.seriesSlotIndexes&&i.seriesSlotIndexes.length===a.computedData.length))return a.computedData.map((u,l)=>{const m=i.seriesSlotIndexes[l]%a.fullDataFormatter.container.columnAmount,c=Math.floor(i.seriesSlotIndexes[l]/a.fullDataFormatter.container.columnAmount),{translate:f,scale:x}=ut(a.layout,a.fullDataFormatter.container,c,m);return{slotIndex:i.seriesSlotIndexes[l],rowIndex:c,columnIndex:m,translate:f,scale:x}});{const u=i.slotIndex%a.fullDataFormatter.container.columnAmount,l=Math.floor(i.slotIndex/a.fullDataFormatter.container.columnAmount);return a.computedData.map((m,c)=>{const{translate:f,scale:x}=ut(a.layout,a.fullDataFormatter.container,l,u);return{slotIndex:i.slotIndex,rowIndex:l,columnIndex:u,translate:f,scale:x}})}}));function De(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Lt(t);return Tt(t,r)}const Re=({selection:t,pluginName:e,clipPathID:r,existedSeriesLabels$:n,gridContainer$:o,gridAxesTransform$:a,gridGraphicTransform$:i})=>{const s=K(e,"series"),u=K(e,"axes"),l=K(e,"graphic"),m=n.pipe(z((g,v)=>t.selectAll(`g.${s}`).data(g,y=>y).join(y=>y.append("g").classed(s,!0).each((S,M,p)=>{Q(p[M]).selectAll(`g.${u}`).data([M]).join(d=>d.append("g").classed(u,!0).attr("clip-path",`url(#${r})`).each((b,D,A)=>{Q(A[D]).selectAll("defs").data([D]).join("defs"),Q(A[D]).selectAll("g").data([D]).join("g").classed(l,!0)}),d=>d,d=>d.remove())}),y=>y,y=>y.remove())),I(g=>X({seriesSelection:De(g),gridContainer:o})),z(g=>(g.seriesSelection.transition().attr("transform",(v,y)=>{const S=g.gridContainer[y]??g.gridContainer[0],M=S.translate,p=S.scale;return`translate(${M[0]}, ${M[1]}) scale(${p[0]}, ${p[1]})`}),g.seriesSelection))),c=X({seriesSelection:m,gridAxesTransform:a}).pipe(I(async g=>g),z(g=>g.seriesSelection.select(`g.${u}`).style("transform",g.gridAxesTransform.value))),f=c.pipe(z(g=>g.select("defs"))),x=X({axesSelection:c,gridGraphicTransform:i}).pipe(I(async g=>g),z(g=>{const v=g.axesSelection.select(`g.${l}`);return v.transition().duration(50).style("transform",g.gridGraphicTransform.value),v}));return{seriesSelection$:m,axesSelection$:c,defsSelection$:f,graphicGSelection$:x}},Oe=({fullDataFormatter$:t,gridAxesSize$:e,computedData$:r,fullChartParams$:n})=>{const o=new Rt,a=new ft(i=>{X({dataFormatter:t,computedData:r}).pipe(mt(o),I(async s=>s)).subscribe(s=>{const l=s.computedData[0]?s.computedData[0].length-1:0,m=s.dataFormatter.grid.groupAxis.scaleDomain[0]==="auto"?0-s.dataFormatter.grid.groupAxis.scalePadding:s.dataFormatter.grid.groupAxis.scaleDomain[0]-s.dataFormatter.grid.groupAxis.scalePadding,c=s.dataFormatter.grid.groupAxis.scaleDomain[1]==="auto"?l+s.dataFormatter.grid.groupAxis.scalePadding:s.dataFormatter.grid.groupAxis.scaleDomain[1]+s.dataFormatter.grid.groupAxis.scalePadding,x=(s.dataFormatter.grid.gridData.seriesDirection==="row"?(s.computedData[0]??[]).map(g=>g.groupLabel):s.computedData.map(g=>g[0].groupLabel)).filter((g,v)=>v>=m&&v<=c);i.next(x)})});return new ft(i=>{X({dataFormatter:t,axisSize:e,fullChartParams:n,scaleRangeGroupLabels:a}).pipe(mt(o),I(async s=>s)).subscribe(s=>{const u=s.dataFormatter.grid.valueAxis.position==="right"||s.dataFormatter.grid.valueAxis.position==="bottom",l=Ot({axisLabels:s.scaleRangeGroupLabels,axisWidth:s.axisSize.width,reverse:u}),m=f=>s.dataFormatter.grid.groupAxis.position==="bottom"||s.dataFormatter.grid.groupAxis.position==="top"?f.offsetX-s.fullChartParams.padding.left:f.offsetY-s.fullChartParams.padding.top,c=f=>{const x=m(f),g=l(x);return{groupIndex:g,groupLabel:s.scaleRangeGroupLabels[g]??""}};return i.next(c),function(){o.next(void 0)}})})};export{Re as a,Te as b,$e as c,Fe as d,Ne as e,ke as f,Oe as g,Ce as h,Le as i,Ge as j,Pe as k,Ae as l,ve as m,De as o};
